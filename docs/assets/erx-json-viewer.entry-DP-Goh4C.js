import{r as l,h as o}from"./index-DLMfuaWg.js";const x=()=>":host{display:block;font-family:'SF Mono', Monaco, 'Cascadia Code', Consolas, monospace;font-size:13px}.erx-json{background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;overflow:hidden}.erx-json__toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 12px;background:var(--erx-surface-secondary, #f9fafb);border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-json__search{flex:1;max-width:200px;padding:6px 10px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);font-size:12px;font-family:inherit}.erx-json__actions{display:flex;gap:8px}.erx-json__btn{padding:4px 10px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:4px;background:var(--erx-surface, #fff);font-size:11px;font-family:-apple-system, sans-serif;color:var(--erx-text-secondary, #6b7280);cursor:pointer;transition:all 150ms ease}.erx-json__btn:hover{background:var(--erx-surface-secondary, #f9fafb);color:var(--erx-text, #111827)}.erx-json__tree{padding:12px;overflow-x:auto}.erx-json__root-name{font-weight:600;color:var(--erx-text, #111827)}.erx-json__row{display:flex;align-items:center;gap:4px;padding:2px 0;line-height:1.5}.erx-json__toggle{width:16px;height:16px;padding:0;border:none;background:transparent;color:var(--erx-text-tertiary, #9ca3af);font-size:8px;cursor:pointer;flex-shrink:0}.erx-json__toggle:hover{color:var(--erx-text, #111827)}.erx-json__toggle-placeholder{width:16px;flex-shrink:0}.erx-json__key{color:#9333ea}.erx-json__preview{color:var(--erx-text-tertiary, #9ca3af);font-style:italic}.erx-json__value--string{color:#16a34a}.erx-json__value--number{color:#2563eb}.erx-json__value--boolean{color:#dc2626}.erx-json__value--null{color:#9ca3af;font-style:italic}.erx-json__value--undefined{color:#9ca3af;font-style:italic}.erx-json__type{margin-left:8px;padding:1px 6px;background:var(--erx-surface-secondary, #f9fafb);border-radius:4px;font-size:10px;color:var(--erx-text-tertiary, #9ca3af)}.erx-json__empty{color:var(--erx-text-tertiary, #9ca3af);font-style:italic}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-json,:host(.dark) .erx-json{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-json__toolbar,:host(.dark) .erx-json__toolbar{background:var(--erx-surface-secondary);border-color:var(--erx-border-color)}:host-context(.dark) .erx-json__key,:host(.dark) .erx-json__key{color:#c084fc}:host-context(.dark) .erx-json__value--string,:host(.dark) .erx-json__value--string{color:#4ade80}:host-context(.dark) .erx-json__value--number,:host(.dark) .erx-json__value--number{color:#60a5fa}",f=class{constructor(e){l(this,e)}data=null;expandDepth=2;rootName;showTypes=!1;showArrayIndexes=!0;collapsed=!1;searchable=!1;copyable=!0;maxStringLength=100;expandedPaths=new Set;searchQuery="";copied=!1;componentWillLoad(){this.collapsed||this.initExpandedPaths(this.data,"",0)}initExpandedPaths(e,r,t){t>=this.expandDepth||(this.isObject(e)||Array.isArray(e))&&(this.expandedPaths.add(r||"root"),(Array.isArray(e)?e.map((s,a)=>[a,s]):Object.entries(e)).forEach(([s])=>{const a=r?`${r}.${s}`:String(s);this.initExpandedPaths(e[s],a,t+1)}))}async expandAll(){this.initExpandedPaths(this.data,"",1/0),this.expandedPaths=new Set(this.expandedPaths)}async collapseAll(){this.expandedPaths=new Set}async copyToClipboard(){try{await navigator.clipboard.writeText(JSON.stringify(this.data,null,2)),this.copied=!0,setTimeout(()=>this.copied=!1,2e3)}catch{console.error("Failed to copy to clipboard")}}isObject(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}getType(e){return e===null?"null":Array.isArray(e)?"array":typeof e}togglePath(e){const r=new Set(this.expandedPaths);r.has(e)?r.delete(e):r.add(e),this.expandedPaths=r}matchesSearch(e,r){if(!this.searchQuery)return!0;const t=this.searchQuery.toLowerCase();return!!(e.toLowerCase().includes(t)||typeof r=="string"&&r.toLowerCase().includes(t)||typeof r=="number"&&String(r).includes(t))}renderValue(e,r,t,n){const s=this.getType(e),a=this.expandedPaths.has(t||"root"),i=s==="object"||s==="array";return!this.matchesSearch(String(r),e)&&!i?null:o("div",{class:"erx-json__node",style:{paddingLeft:`${n*16}px`}},o("div",{class:"erx-json__row"},i?o("button",{class:"erx-json__toggle",onClick:()=>this.togglePath(t||"root")},a?"▼":"▶"):o("span",{class:"erx-json__toggle-placeholder"}),r!==void 0&&o("span",{class:"erx-json__key"},this.showArrayIndexes||typeof r=="string"?`${r}`:"",r!==void 0&&":"),i?o("span",{class:"erx-json__preview"},s==="array"?`Array(${e.length})`:`Object{${Object.keys(e).length}}`):o("span",{class:`erx-json__value erx-json__value--${s}`},this.renderPrimitiveValue(e)),this.showTypes&&o("span",{class:"erx-json__type"},s)),i&&a&&o("div",{class:"erx-json__children"},s==="array"?e.map((c,d)=>this.renderValue(c,d,`${t}.${d}`,n+1)):Object.entries(e).map(([c,d])=>this.renderValue(d,c,`${t}.${c}`,n+1))))}renderPrimitiveValue(e){return e===null?"null":e===void 0?"undefined":typeof e=="string"?`"${e.length>this.maxStringLength?e.substring(0,this.maxStringLength)+"...":e}"`:typeof e=="boolean"?e?"true":"false":String(e)}render(){return o("div",{key:"98b771dedeb2157ce04615c4525c5e43bc8b7108",class:"erx-json",part:"container"},o("div",{key:"61fb5b921190655862638f92e305f8678d98044f",class:"erx-json__toolbar",part:"toolbar"},this.searchable&&o("input",{key:"4f030bc720e89298f7cb03410cdb52228907cd4c",type:"text",class:"erx-json__search",placeholder:"Search...",value:this.searchQuery,onInput:e=>this.searchQuery=e.target.value}),o("div",{key:"17d6f3b775ad99c629f38c329f8f2a16d4135cd8",class:"erx-json__actions"},o("button",{key:"855303ef8f4d654704cc56028d88b966bdf207df",class:"erx-json__btn",onClick:()=>this.expandAll()},"Expand All"),o("button",{key:"30ac8b0893228251b75208877c8895b58ba7ec67",class:"erx-json__btn",onClick:()=>this.collapseAll()},"Collapse All"),this.copyable&&o("button",{key:"495954c0ae6f7eb1dafb15d29686caf9b81f7f32",class:"erx-json__btn",onClick:()=>this.copyToClipboard()},this.copied?"✓ Copied":"Copy"))),o("div",{key:"06f1dc5d11257de5e7ab1e6b94fb9f002a13f4a0",class:"erx-json__tree",part:"tree"},this.rootName&&o("span",{key:"47666d038fdac37e8a09f6560bf8b0adfb801f26",class:"erx-json__root-name"},this.rootName,":"),this.data!==void 0?this.renderValue(this.data,"","",0):o("span",{class:"erx-json__empty"},"No data")))}};f.style=x();export{f as erx_json_viewer};

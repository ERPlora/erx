import{r as b,c as f,g as v,h as o}from"./index-DLMfuaWg.js";const S=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;height:100%}.erx-panels{display:flex;height:100%}.erx-panels--vertical{flex-direction:column}.erx-panels--resizing{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:col-resize}.erx-panels--vertical.erx-panels--resizing{cursor:row-resize}.erx-panels__panel{overflow:hidden;position:relative;background:var(--erx-surface, #fff)}.erx-panels__panel--collapsed{flex:0 0 32px !important}.erx-panels__collapse-btn{position:absolute;top:8px;right:8px;width:24px;height:24px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:4px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:10px;cursor:pointer;z-index:10}.erx-panels__collapse-btn:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-panels__content{height:100%;overflow:auto}.erx-panels__handle{flex-shrink:0;display:flex;align-items:center;justify-content:center;background:var(--erx-border-color, #e5e7eb);cursor:col-resize;transition:background 150ms ease}.erx-panels--vertical .erx-panels__handle{cursor:row-resize}.erx-panels__handle:hover{background:var(--erx-color-primary, #667eea)}.erx-panels__handle-bar{width:4px;height:32px;background:var(--erx-text-tertiary, #9ca3af);border-radius:2px;opacity:0.5}.erx-panels--vertical .erx-panels__handle-bar{width:32px;height:4px}.erx-panels__handle:hover .erx-panels__handle-bar{background:white;opacity:1}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-panels__panel,:host(.dark) .erx-panels__panel{background:var(--erx-surface)}",k=class{constructor(s){b(this,s),this.erxResize=f(this,"erxResize"),this.erxCollapse=f(this,"erxCollapse")}get el(){return v(this)}config;sizes={};collapsedPanels=new Set;resizingIndex=null;erxResize;erxCollapse;componentWillLoad(){this.initializeSizes()}initializeSizes(){const i=100-this.config.panels.reduce((e,n)=>e+(n.defaultSize||0),0),t=this.config.panels.filter(e=>!e.defaultSize).length,a=t>0?i/t:0;this.config.panels.forEach(e=>{this.sizes[e.id]=e.defaultSize||a,e.collapsed&&this.collapsedPanels.add(e.id)})}get handleSize(){return this.config.handleSize??8}handleResizeStart(s,i){i.preventDefault(),this.resizingIndex=s;const t=this.el.getBoundingClientRect(),a=this.config.direction==="horizontal",e=a?t.width:t.height,n=this.config.panels[s],r=this.config.panels[s+1],d=this.sizes[n.id],h=this.sizes[r.id],g=a?i.clientX:i.clientY,p=u=>{const z=((a?u.clientX:u.clientY)-g)/e*100;let l=d+z,c=h-z;n.minSize&&(l=Math.max(l,n.minSize)),n.maxSize&&(l=Math.min(l,n.maxSize)),r.minSize&&(c=Math.max(c,r.minSize)),r.maxSize&&(c=Math.min(c,r.maxSize));const m=l+c,_=d+h;Math.abs(m-_)<.1&&(this.sizes={...this.sizes,[n.id]:l,[r.id]:c},this.erxResize.emit({panelId:n.id,size:l,sizes:{...this.sizes}}))},x=()=>{this.resizingIndex=null,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",x)}toggleCollapse(s){if(!s.collapsible)return;const i=new Set(this.collapsedPanels),t=i.has(s.id);t?i.delete(s.id):i.add(s.id),this.collapsedPanels=i,this.erxCollapse.emit({panelId:s.id,collapsed:!t})}render(){const{config:s}=this,i=s.direction==="horizontal";return o("div",{key:"8b0e5f5c9358c2a180e0e4464985d2fccab38c97",class:{"erx-panels":!0,[`erx-panels--${s.direction}`]:!0,"erx-panels--resizing":this.resizingIndex!==null},part:"container"},s.panels.map((t,a)=>{const e=this.collapsedPanels.has(t.id),n=e?0:this.sizes[t.id];return[o("div",{class:{"erx-panels__panel":!0,"erx-panels__panel--collapsed":e},style:{[i?"width":"height"]:e?"32px":`${n}%`,flexGrow:e?"0":void 0,flexShrink:e?"0":void 0},key:t.id,part:"panel"},t.collapsible&&o("button",{class:"erx-panels__collapse-btn",onClick:()=>this.toggleCollapse(t)},e?i?"▶":"▼":i?"◀":"▲"),!e&&o("div",{class:"erx-panels__content"},o("slot",{name:t.id}))),a<s.panels.length-1&&!e&&!this.collapsedPanels.has(s.panels[a+1].id)&&o("div",{class:"erx-panels__handle",style:{[i?"width":"height"]:`${this.handleSize}px`},onMouseDown:r=>this.handleResizeStart(a,r),part:"handle"},o("div",{class:"erx-panels__handle-bar"}))]}))}};k.style=S();export{k as erx_resizable_panels};

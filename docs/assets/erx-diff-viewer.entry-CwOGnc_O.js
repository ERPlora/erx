import{r as l,h as r}from"./index-DLMfuaWg.js";const x=()=>":host{display:block;font-family:ui-monospace, SFMono-Regular, 'SF Mono', Menlo, monospace;font-size:13px}.erx-diff{background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;overflow:hidden}.erx-diff--wrap .erx-diff__content{white-space:pre-wrap;word-break:break-all}.erx-diff__split{display:flex}.erx-diff__pane{flex:1;min-width:0;overflow:auto}.erx-diff__pane--old{border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-diff__pane-header{padding:8px 12px;background:var(--erx-surface-secondary, #f9fafb);border-bottom:1px solid var(--erx-border-color, #e5e7eb);font-weight:600;font-size:12px;color:var(--erx-text-secondary, #6b7280)}.erx-diff__unified-header{padding:8px 12px;background:var(--erx-surface-secondary, #f9fafb);border-bottom:1px solid var(--erx-border-color, #e5e7eb);display:flex;flex-direction:column;gap:2px}.erx-diff__file{font-size:12px}.erx-diff__file--old{color:var(--erx-color-danger, #ef4444)}.erx-diff__file--new{color:var(--erx-color-success, #10b981)}.erx-diff__lines{overflow:auto}.erx-diff__line{display:flex;min-height:22px;line-height:22px}.erx-diff__line--unchanged{background:transparent}.erx-diff__line--added{background:rgba(16, 185, 129, 0.15)}.erx-diff__line--removed{background:rgba(239, 68, 68, 0.15)}.erx-diff__line--empty{background:var(--erx-surface-secondary, #f9fafb)}.erx-diff__ln{width:40px;min-width:40px;padding:0 8px;text-align:right;color:var(--erx-text-tertiary, #9ca3af);background:var(--erx-surface-secondary, #f9fafb);border-right:1px solid var(--erx-border-color, #e5e7eb);-webkit-user-select:none;-moz-user-select:none;user-select:none}.erx-diff__ln--old{width:35px;min-width:35px}.erx-diff__ln--new{width:35px;min-width:35px}.erx-diff__prefix{width:20px;min-width:20px;text-align:center;color:var(--erx-text-secondary, #6b7280);-webkit-user-select:none;-moz-user-select:none;user-select:none}.erx-diff__line--added .erx-diff__prefix{color:var(--erx-color-success, #10b981)}.erx-diff__line--removed .erx-diff__prefix{color:var(--erx-color-danger, #ef4444)}.erx-diff__content{flex:1;padding:0 12px;white-space:pre;color:var(--erx-text, #111827)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-diff,:host(.dark) .erx-diff{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-diff__line--added,:host(.dark) .erx-diff__line--added{background:rgba(16, 185, 129, 0.2)}:host-context(.dark) .erx-diff__line--removed,:host(.dark) .erx-diff__line--removed{background:rgba(239, 68, 68, 0.2)}:host-context(.dark) .erx-diff__content,:host(.dark) .erx-diff__content{color:var(--erx-text)}",c=class{constructor(i){l(this,i)}oldText="";newText="";oldTitle="Original";newTitle="Modified";mode="split";showLineNumbers=!0;showHeaders=!0;wordWrap=!1;diffLines=[];componentWillLoad(){this.computeDiff()}componentWillUpdate(){this.computeDiff()}computeDiff(){const i=this.oldText.split(`
`),n=this.newText.split(`
`),e=[];let d=0,f=0;for(;d<i.length||f<n.length;){const s=i[d],o=n[f];if(d>=i.length)e.push({newLineNumber:f+1,content:o,type:"added"}),f++;else if(f>=n.length)e.push({oldLineNumber:d+1,content:s,type:"removed"}),d++;else if(s===o)e.push({oldLineNumber:d+1,newLineNumber:f+1,content:s,type:"unchanged"}),d++,f++;else{const t=n.indexOf(s,f),a=i.indexOf(o,d);t===-1&&a===-1?(e.push({oldLineNumber:d+1,content:s,type:"removed"}),e.push({newLineNumber:f+1,content:o,type:"added"}),d++,f++):t!==-1&&(a===-1||t-f<=a-d)?(e.push({newLineNumber:f+1,content:o,type:"added"}),f++):(e.push({oldLineNumber:d+1,content:s,type:"removed"}),d++)}}this.diffLines=e}renderSplitView(){const i=[];let n=0;for(;n<this.diffLines.length;){const e=this.diffLines[n];if(e.type==="unchanged")i.push({old:e,new:e}),n++;else if(e.type==="removed"){const d=this.diffLines[n+1];d&&d.type==="added"?(i.push({old:e,new:d}),n+=2):(i.push({old:e}),n++)}else e.type==="added"&&i.push({new:e}),n++}return r("div",{class:"erx-diff__split",part:"split"},r("div",{class:"erx-diff__pane erx-diff__pane--old",part:"pane-old"},this.showHeaders&&r("div",{class:"erx-diff__pane-header",part:"pane-header"},this.oldTitle),r("div",{class:"erx-diff__lines"},i.map(e=>r("div",{class:`erx-diff__line erx-diff__line--${e.old?.type||"empty"}`},this.showLineNumbers&&r("span",{class:"erx-diff__ln"},e.old?.oldLineNumber||""),r("span",{class:"erx-diff__content"},e.old?.content||""))))),r("div",{class:"erx-diff__pane erx-diff__pane--new",part:"pane-new"},this.showHeaders&&r("div",{class:"erx-diff__pane-header",part:"pane-header"},this.newTitle),r("div",{class:"erx-diff__lines"},i.map(e=>r("div",{class:`erx-diff__line erx-diff__line--${e.new?.type||"empty"}`},this.showLineNumbers&&r("span",{class:"erx-diff__ln"},e.new?.newLineNumber||""),r("span",{class:"erx-diff__content"},e.new?.content||""))))))}renderUnifiedView(){return r("div",{class:"erx-diff__unified",part:"unified"},this.showHeaders&&r("div",{class:"erx-diff__unified-header",part:"unified-header"},r("span",{class:"erx-diff__file erx-diff__file--old"},"--- ",this.oldTitle),r("span",{class:"erx-diff__file erx-diff__file--new"},"+++ ",this.newTitle)),r("div",{class:"erx-diff__lines"},this.diffLines.map(i=>r("div",{class:`erx-diff__line erx-diff__line--${i.type}`},this.showLineNumbers&&r("span",{class:"erx-diff__ln erx-diff__ln--old"},i.oldLineNumber||""),this.showLineNumbers&&r("span",{class:"erx-diff__ln erx-diff__ln--new"},i.newLineNumber||""),r("span",{class:"erx-diff__prefix"},i.type==="added"?"+":i.type==="removed"?"-":" "),r("span",{class:"erx-diff__content"},i.content)))))}render(){return r("div",{key:"c30c0cef98f2a102607c763108c1a5ca7f82df7c",class:{"erx-diff":!0,"erx-diff--wrap":this.wordWrap},part:"container"},this.mode==="split"?this.renderSplitView():this.renderUnifiedView())}};c.style=x();export{c as erx_diff_viewer};

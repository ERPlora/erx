import{r as L,g as B,h as r}from"./index-DLMfuaWg.js";const D=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-chart{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);padding:16px}.erx-chart__canvas{position:relative;width:100%}.erx-chart__svg{width:100%;height:100%;overflow:visible}.erx-chart__svg--pie{max-width:300px;margin:0 auto;display:block}.erx-chart__bar{transition:opacity 200ms ease}.erx-chart__bar:hover{opacity:0.8}.erx-chart__line{transition:stroke-width 200ms ease}.erx-chart__point{transition:r 200ms ease}.erx-chart__point:hover{r:2}.erx-chart__slice{transition:transform 200ms ease;transform-origin:center}.erx-chart__slice:hover{transform:scale(1.02)}.erx-chart__labels{display:flex;justify-content:space-between;margin-top:8px;padding:0 4px}.erx-chart__label{font-size:11px;color:var(--erx-text-secondary, #6b7280)}.erx-chart__legend{display:flex;flex-wrap:wrap;gap:16px;margin-top:16px;padding-top:16px;border-top:1px solid var(--erx-border-color, #e5e7eb);justify-content:center}.erx-chart__legend-item{display:flex;align-items:center;gap:6px}.erx-chart__legend-color{width:12px;height:12px;border-radius:3px}.erx-chart__legend-label{font-size:12px;color:var(--erx-text-secondary, #6b7280)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-chart,:host(.dark) .erx-chart{background:var(--erx-surface);border-color:var(--erx-border-color)}",R=class{constructor(t){L(this,t)}get el(){return B(this)}data;config={type:"bar"};height=300;tooltip=null;getDefaultColors(){return["#667eea","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#84cc16","#f97316","#6366f1"]}renderBarChart(){const{data:t,config:o}=this,s=this.getDefaultColors(),c=Math.max(...t.datasets.flatMap(a=>a.data)),e=100/(t.labels.length*t.datasets.length+t.labels.length);return r("svg",{class:"erx-chart__svg",viewBox:"0 0 100 100",preserveAspectRatio:"none"},o.showGrid!==!1&&r("g",{class:"erx-chart__grid"},[0,25,50,75,100].map(a=>r("line",{key:a,x1:"0",y1:100-a,x2:"100",y2:100-a,stroke:"var(--erx-border-color, #e5e7eb)","stroke-width":"0.2"}))),t.datasets.map((a,i)=>r("g",{key:a.label},a.data.map((l,n)=>{const h=l/c*90,d=n/t.labels.length*100+e*i+e/2,x=a.color||s[i%s.length];return r("rect",{key:n,x:d,y:100-h-5,width:e*.8,height:h,fill:x,rx:"0.5",class:"erx-chart__bar"})}))))}renderLineChart(){const{data:t,config:o}=this,s=this.getDefaultColors(),c=Math.max(...t.datasets.flatMap(e=>e.data));return r("svg",{class:"erx-chart__svg",viewBox:"0 0 100 100",preserveAspectRatio:"none"},o.showGrid!==!1&&r("g",{class:"erx-chart__grid"},[0,25,50,75,100].map(e=>r("line",{key:e,x1:"0",y1:100-e,x2:"100",y2:100-e,stroke:"var(--erx-border-color, #e5e7eb)","stroke-width":"0.2"}))),t.datasets.map((e,a)=>{const i=e.data.map((n,h)=>{const d=h/(e.data.length-1)*100,x=100-n/c*90-5;return`${d},${x}`}).join(" "),l=e.color||s[a%s.length];return r("g",{key:e.label},(o.type==="area"||e.fill)&&r("polygon",{points:`0,95 ${i} 100,95`,fill:l,"fill-opacity":"0.1"}),r("polyline",{points:i,fill:"none",stroke:l,"stroke-width":"0.5","stroke-linecap":"round","stroke-linejoin":"round",class:"erx-chart__line"}),e.data.map((n,h)=>{const d=h/(e.data.length-1)*100,x=100-n/c*90-5;return r("circle",{key:h,cx:d,cy:x,r:"1",fill:l,class:"erx-chart__point"})}))}))}renderPieChart(){const{data:t,config:o}=this,s=this.getDefaultColors(),c=t.datasets[0];if(!c)return null;const e=c.data.reduce((l,n)=>l+n,0);let a=-90;const i=o.type==="doughnut";return r("svg",{class:"erx-chart__svg erx-chart__svg--pie",viewBox:"-50 -50 100 100"},c.data.map((l,n)=>{const d=l/e*360,x=a,u=a+d;a=u;const _=x*Math.PI/180,f=u*Math.PI/180,p=40,g=i?25:0,m=Math.cos(_)*p,v=Math.sin(_)*p,k=Math.cos(f)*p,$=Math.sin(f)*p,b=d>180?1:0;let y;if(i){const w=Math.cos(_)*g,M=Math.sin(_)*g,C=Math.cos(f)*g,A=Math.sin(f)*g;y=`M ${w} ${M} L ${m} ${v} A ${p} ${p} 0 ${b} 1 ${k} ${$} L ${C} ${A} A ${g} ${g} 0 ${b} 0 ${w} ${M}`}else y=`M 0 0 L ${m} ${v} A ${p} ${p} 0 ${b} 1 ${k} ${$} Z`;return r("path",{key:n,d:y,fill:s[n%s.length],class:"erx-chart__slice"})}))}renderLegend(){const{data:t,config:o}=this;if(o.showLegend===!1)return null;const s=this.getDefaultColors(),c=o.type==="pie"||o.type==="doughnut"?t.labels.map((e,a)=>({label:e,color:s[a%s.length]})):t.datasets.map((e,a)=>({label:e.label,color:e.color||s[a%s.length]}));return r("div",{class:"erx-chart__legend",part:"legend"},c.map(e=>r("div",{class:"erx-chart__legend-item",key:e.label},r("span",{class:"erx-chart__legend-color",style:{background:e.color}}),r("span",{class:"erx-chart__legend-label"},e.label))))}render(){const{config:t,height:o}=this;return r("div",{key:"4a644a57f8db12b0381d7af3818e0f1247704209",class:"erx-chart",part:"container"},r("div",{key:"47e7da1175de175c4a25ab3046ce93b78d3eace9",class:"erx-chart__canvas",style:{height:`${o}px`},part:"canvas"},t.type==="bar"&&this.renderBarChart(),(t.type==="line"||t.type==="area")&&this.renderLineChart(),(t.type==="pie"||t.type==="doughnut")&&this.renderPieChart()),t.type!=="pie"&&t.type!=="doughnut"&&r("div",{key:"cbef6d2a0f409161741fa359582f32a4b5aa9a56",class:"erx-chart__labels",part:"labels"},this.data.labels.map(s=>r("span",{class:"erx-chart__label",key:s},s))),this.renderLegend())}};R.style=D();export{R as erx_chart};

import{r as l,c as o,g as s,h as a}from"./index-DLMfuaWg.js";const c=()=>`:host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif}.erx-variant{display:flex;flex-direction:column;gap:var(--erx-space-md, 16px)}.erx-variant--disabled{opacity:0.6;pointer-events:none}.erx-variant__group{display:flex;flex-direction:column;gap:8px}.erx-variant__label{font-size:14px;font-weight:600;color:var(--erx-text, #111827)}.erx-variant__required{color:var(--erx-color-danger, #ef4444);margin-left:2px}.erx-variant__options{display:flex;flex-wrap:wrap;gap:8px}.erx-variant__options--dropdown{display:block}.erx-variant__option--button{display:inline-flex;flex-direction:column;align-items:center;gap:2px;padding:10px 16px;border:2px solid var(--erx-border-color, #e5e7eb);border-radius:var(--erx-border-radius, 8px);background:var(--erx-surface, #ffffff);cursor:pointer;transition:all 150ms ease}.erx-variant__option--button:hover:not(:disabled){border-color:var(--erx-color-primary, #667eea)}.erx-variant__option--button.erx-variant__option--selected{border-color:var(--erx-color-primary, #667eea);background:var(--erx-color-primary, #667eea);color:white}.erx-variant__option--button.erx-variant__option--unavailable{opacity:0.4;text-decoration:line-through;cursor:not-allowed}.erx-variant__option-label{font-size:14px;font-weight:500}.erx-variant__option-price{font-size:11px;color:var(--erx-text-secondary, #6b7280)}.erx-variant__option--selected .erx-variant__option-price{color:rgba(255, 255, 255, 0.8)}.erx-variant__option-stock{font-size:10px;color:var(--erx-color-warning, #f59e0b)}.erx-variant__option--selected .erx-variant__option-stock{color:rgba(255, 255, 255, 0.8)}.erx-variant__option--color{position:relative;width:36px;height:36px;padding:0;border:2px solid var(--erx-border-color, #e5e7eb);border-radius:50%;background:var(--erx-surface, #ffffff);cursor:pointer;transition:all 150ms ease;overflow:hidden}.erx-variant__option--color:hover:not(:disabled){border-color:var(--erx-text-secondary, #6b7280);transform:scale(1.1)}.erx-variant__option--color.erx-variant__option--selected{border-color:var(--erx-text, #111827);box-shadow:0 0 0 2px var(--erx-surface, #ffffff), 0 0 0 4px var(--erx-text, #111827)}.erx-variant__color-swatch{display:block;width:100%;height:100%;background:var(--variant-color, #cccccc);border-radius:50%}.erx-variant__option--color.erx-variant__option--unavailable{opacity:0.5}.erx-variant__color-slash{position:absolute;top:50%;left:-10%;width:120%;height:2px;background:var(--erx-color-danger, #ef4444);transform:rotate(-45deg)}.erx-variant__option--image{width:60px;height:60px;padding:0;border:2px solid var(--erx-border-color, #e5e7eb);border-radius:var(--erx-border-radius, 8px);background:var(--erx-surface, #ffffff);cursor:pointer;transition:all 150ms ease;overflow:hidden}.erx-variant__option--image:hover:not(:disabled){border-color:var(--erx-color-primary, #667eea)}.erx-variant__option--image.erx-variant__option--selected{border-color:var(--erx-color-primary, #667eea);box-shadow:0 0 0 2px rgba(102, 126, 234, 0.3)}.erx-variant__option--image.erx-variant__option--unavailable{opacity:0.4}.erx-variant__image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-variant__image-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:10px;color:var(--erx-text-tertiary, #9ca3af);background:var(--erx-surface-secondary, #f9fafb)}.erx-variant__select{width:100%;height:var(--erx-touch-target, 44px);padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:var(--erx-border-radius, 8px);background:var(--erx-surface, #ffffff);color:var(--erx-text, #111827);font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236b7280'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;background-size:24px}.erx-variant__select:focus{outline:none;border-color:var(--erx-color-primary, #667eea)}.erx-variant--sm .erx-variant__option--button{padding:6px 12px;font-size:13px}.erx-variant--sm .erx-variant__option--color{width:28px;height:28px}.erx-variant--sm .erx-variant__option--image{width:48px;height:48px}.erx-variant--lg .erx-variant__option--button{padding:14px 20px;font-size:16px}.erx-variant--lg .erx-variant__option--color{width:44px;height:44px}.erx-variant--lg .erx-variant__option--image{width:80px;height:80px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-variant__label,:host(.dark) .erx-variant__label{color:var(--erx-text)}:host-context(.dark) .erx-variant__option--button,:host(.dark) .erx-variant__option--button,:host-context(.dark) .erx-variant__option--color,:host(.dark) .erx-variant__option--color,:host-context(.dark) .erx-variant__option--image,:host(.dark) .erx-variant__option--image{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-variant__select,:host(.dark) .erx-variant__select{background-color:var(--erx-surface);border-color:var(--erx-border-color);color:var(--erx-text)}`,d=class{constructor(r){l(this,r),this.erxSelect=o(this,"erxSelect"),this.erxComplete=o(this,"erxComplete")}get el(){return s(this)}groups=[];value={};showPrices=!0;showStock=!0;currency="$";locale="en-US";size="md";disabled=!1;internalValue={};erxSelect;erxComplete;handleValueChange(r){this.internalValue={...r}}componentWillLoad(){this.internalValue={...this.value}}async reset(){this.internalValue={},this.value={}}async isComplete(){return this.checkComplete()}async getSelection(){return this.internalValue}selectOption=(r,e)=>{if(this.disabled||e.available===!1)return;const t={...this.internalValue,[r.id]:e.value};this.internalValue=t,this.value=t;const i=this.checkComplete();this.erxSelect.emit({groupId:r.id,option:e,selection:t,complete:i}),i&&this.erxComplete.emit({selection:t})};checkComplete(){return this.groups.filter(r=>r.required!==!1).every(r=>this.internalValue[r.id]!==void 0)}formatPrice(r){return(r>=0?"+":"")+new Intl.NumberFormat(this.locale,{style:"currency",currency:this.getCurrencyCode()}).format(r)}getCurrencyCode(){return{$:"USD","€":"EUR","£":"GBP"}[this.currency]||"USD"}isSelected(r,e){return this.internalValue[r]===e}renderButtonOption(r,e){const t=this.isSelected(r.id,e.value),i=e.available===!1;return a("button",{class:{"erx-variant__option":!0,"erx-variant__option--button":!0,"erx-variant__option--selected":t,"erx-variant__option--unavailable":i},onClick:()=>this.selectOption(r,e),disabled:this.disabled||i,type:"button","aria-pressed":t},a("span",{class:"erx-variant__option-label"},e.label),this.showPrices&&e.priceModifier&&e.priceModifier!==0&&a("span",{class:"erx-variant__option-price"},this.formatPrice(e.priceModifier)),this.showStock&&e.stock!==void 0&&e.stock<=5&&e.stock>0&&a("span",{class:"erx-variant__option-stock"},"Only ",e.stock," left"))}renderColorOption(r,e){const t=this.isSelected(r.id,e.value),i=e.available===!1;return a("button",{class:{"erx-variant__option":!0,"erx-variant__option--color":!0,"erx-variant__option--selected":t,"erx-variant__option--unavailable":i},style:{"--variant-color":e.color},onClick:()=>this.selectOption(r,e),disabled:this.disabled||i,type:"button","aria-label":e.label,"aria-pressed":t,title:e.label},a("span",{class:"erx-variant__color-swatch"}),i&&a("span",{class:"erx-variant__color-slash"}))}renderImageOption(r,e){const t=this.isSelected(r.id,e.value),i=e.available===!1;return a("button",{class:{"erx-variant__option":!0,"erx-variant__option--image":!0,"erx-variant__option--selected":t,"erx-variant__option--unavailable":i},onClick:()=>this.selectOption(r,e),disabled:this.disabled||i,type:"button","aria-label":e.label,"aria-pressed":t},e.image?a("img",{src:e.image,alt:e.label,class:"erx-variant__image"}):a("span",{class:"erx-variant__image-placeholder"},e.label))}renderDropdownOption(r){return a("select",{class:"erx-variant__select",onChange:e=>{const t=e.target.value,i=r.options.find(n=>n.value===t);i&&this.selectOption(r,i)},disabled:this.disabled},a("option",{value:""},"Select ",r.name),r.options.map(e=>a("option",{value:e.value,disabled:e.available===!1,selected:this.isSelected(r.id,e.value)},e.label,this.showPrices&&e.priceModifier?` (${this.formatPrice(e.priceModifier)})`:"",e.available===!1?" - Out of stock":"")))}render(){return a("div",{key:"366c113e576b0aba8ae6839ded63f18b1216e9c4",class:{"erx-variant":!0,[`erx-variant--${this.size}`]:!0,"erx-variant--disabled":this.disabled},part:"container"},this.groups.map(r=>a("div",{class:"erx-variant__group",part:"group",key:r.id},a("label",{class:"erx-variant__label"},r.name,r.required!==!1&&a("span",{class:"erx-variant__required"},"*")),a("div",{class:`erx-variant__options erx-variant__options--${r.type}`},r.type==="dropdown"?this.renderDropdownOption(r):r.options.map(e=>{switch(r.type){case"color":return this.renderColorOption(r,e);case"image":return this.renderImageOption(r,e);default:return this.renderButtonOption(r,e)}})))))}static get watchers(){return{value:[{handleValueChange:0}]}}};d.style=c();export{d as erx_variant_selector};

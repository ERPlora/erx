import{r as l,c,h as e}from"./index-DLMfuaWg.js";const h=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-sched{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-sched--disabled{opacity:0.6;pointer-events:none}.erx-sched__toolbar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-sched__nav{display:flex;align-items:center;gap:8px}.erx-sched__nav-btn{width:32px;height:32px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text, #111827);font-size:14px;cursor:pointer}.erx-sched__today-btn{height:32px;padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:13px;font-weight:500;cursor:pointer}.erx-sched__title{font-size:16px;font-weight:600;color:var(--erx-text, #111827)}.erx-sched__view-switcher{display:flex;gap:4px}.erx-sched__view-btn{height:32px;padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:12px;font-weight:500;cursor:pointer}.erx-sched__view-btn--active{background:var(--erx-color-primary, #667eea);border-color:var(--erx-color-primary, #667eea);color:white}.erx-sched__timeline{display:flex;flex-direction:column;overflow:hidden}.erx-sched__header{display:flex;border-bottom:1px solid var(--erx-border-color, #e5e7eb);position:sticky;top:0;background:var(--erx-surface, #fff);z-index:10}.erx-sched__resource-header{width:180px;min-width:180px;padding:12px;font-size:12px;font-weight:600;text-transform:uppercase;color:var(--erx-text-secondary, #6b7280);border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-sched__days-header{display:flex;flex:1}.erx-sched__day-header{flex:1;padding:12px 8px;text-align:center;font-size:13px;font-weight:500;color:var(--erx-text, #111827);border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-sched__day-header:last-child{border-right:none}.erx-sched__day-header--today{background:rgba(102,126,234,0.05);color:var(--erx-color-primary, #667eea);font-weight:600}.erx-sched__body{overflow-y:auto;max-height:500px}.erx-sched__row{display:flex;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-sched__row:last-child{border-bottom:none}.erx-sched__resource-cell{width:180px;min-width:180px;padding:8px 12px;border-right:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-sched__resource{display:flex;align-items:center;gap:10px}.erx-sched__resource-avatar{width:36px;height:36px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;color:white;flex-shrink:0}.erx-sched__resource-avatar img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-sched__resource-info{flex:1;min-width:0}.erx-sched__resource-name{display:block;font-size:13px;font-weight:500;color:var(--erx-text, #111827);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-sched__resource-title{display:block;font-size:11px;color:var(--erx-text-tertiary, #9ca3af)}.erx-sched__days-cells{display:flex;flex:1}.erx-sched__day-cell{flex:1;position:relative;border-right:1px solid var(--erx-border-color, #e5e7eb);min-height:60px}.erx-sched__day-cell:last-child{border-right:none}.erx-sched__day-cell--today{background:rgba(102,126,234,0.02)}.erx-sched__time-grid{position:absolute;top:0;left:0;right:0;bottom:0}.erx-sched__time-slot{border-bottom:1px solid var(--erx-border-color, #e5e7eb);cursor:pointer}.erx-sched__time-slot:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-sched__time-slot:last-child{border-bottom:none}.erx-sched__events{position:absolute;top:0;left:4px;right:4px;pointer-events:none}.erx-sched__event{position:absolute;left:0;right:0;padding:4px 6px;border-radius:4px;color:white;font-size:11px;overflow:hidden;cursor:pointer;pointer-events:auto;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.erx-sched__event:hover{filter:brightness(1.1)}.erx-sched__event--tentative{opacity:0.7;border:2px dashed white}.erx-sched__event--cancelled{opacity:0.4;text-decoration:line-through}.erx-sched__event-time{display:block;font-size:10px;opacity:0.9}.erx-sched__event-title{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-sched__current-time{position:absolute;left:0;right:0;height:2px;background:var(--erx-color-danger, #ef4444);z-index:5;pointer-events:none}.erx-sched__current-time::before{content:'';position:absolute;left:-4px;top:-3px;width:8px;height:8px;border-radius:50%;background:var(--erx-color-danger, #ef4444)}.erx-sched__time-labels{display:flex;position:absolute;top:0;left:0;right:0;pointer-events:none}.erx-sched__time-labels-grid{display:flex;flex-direction:column;position:absolute;left:180px}.erx-sched__time-label{font-size:10px;color:var(--erx-text-tertiary, #9ca3af);padding-left:4px}.erx-sched__empty{padding:48px;text-align:center;color:var(--erx-text-tertiary, #9ca3af);font-size:14px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-sched,:host(.dark) .erx-sched{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-sched__toolbar,:host(.dark) .erx-sched__toolbar,:host-context(.dark) .erx-sched__resource-cell,:host(.dark) .erx-sched__resource-cell{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-sched__title,:host(.dark) .erx-sched__title,:host-context(.dark) .erx-sched__resource-name,:host(.dark) .erx-sched__resource-name{color:var(--erx-text)}",x=class{constructor(r){l(this,r),this.erxSelect=c(this,"erxSelect"),this.erxEventSelect=c(this,"erxEventSelect"),this.erxEventUpdate=c(this,"erxEventUpdate")}resources=[];events=[];config={view:"week",date:new Date,resources:[],events:[]};disabled=!1;currentDate=new Date;view="week";erxSelect;erxEventSelect;erxEventUpdate;startHour=8;endHour=20;hourHeight=50;componentWillLoad(){this.view=this.config.view||"week",this.currentDate=this.config.date||new Date,this.startHour=this.config.startHour??8,this.endHour=this.config.endHour??20}getTimeSlots(){const r=[];for(let s=this.startHour;s<=this.endHour;s++)r.push({hour:s,label:`${s.toString().padStart(2,"0")}:00`});return r}getWeekDays(){const r=[],s=new Date(this.currentDate),t=s.getDay();s.setDate(s.getDate()-t);for(let o=0;o<7;o++){const i=new Date(s);i.setDate(s.getDate()+o),r.push(i)}return r}getEventsForResourceAndDate(r,s){return this.events.filter(t=>t.resourceId!==r?!1:new Date(t.start).toDateString()===s.toDateString())}getEventPosition(r){const s=new Date(r.start),t=new Date(r.end),o=(s.getHours()-this.startHour)*60+s.getMinutes(),i=(t.getHours()-this.startHour)*60+t.getMinutes(),a=o/60*this.hourHeight,d=Math.max((i-o)/60*this.hourHeight,20);return{top:a,height:d}}isToday(r){return r.toDateString()===new Date().toDateString()}navigate(r){const s=new Date(this.currentDate);this.view==="day"?s.setDate(s.getDate()+(r==="next"?1:-1)):this.view==="week"?s.setDate(s.getDate()+(r==="next"?7:-7)):this.view==="month"&&s.setMonth(s.getMonth()+(r==="next"?1:-1)),this.currentDate=s}handleSlotClick(r,s,t){this.erxSelect.emit({resource:r,date:s,time:{hour:t,minute:0}})}handleEventClick(r,s){s.stopPropagation();const t=this.resources.find(o=>o.id===r.resourceId);t&&this.erxEventSelect.emit({event:r,resource:t})}renderTimelineView(){const r=this.view==="day"?[this.currentDate]:this.getWeekDays(),s=this.getTimeSlots();return e("div",{class:"erx-sched__timeline",part:"timeline"},e("div",{class:"erx-sched__header"},e("div",{class:"erx-sched__resource-header"},"Resource"),e("div",{class:"erx-sched__days-header"},r.map(t=>e("div",{class:{"erx-sched__day-header":!0,"erx-sched__day-header--today":this.isToday(t)},key:t.toISOString()},t.toLocaleDateString("en-US",{weekday:"short",day:"numeric"}))))),e("div",{class:"erx-sched__body"},this.resources.map(t=>e("div",{class:"erx-sched__row",key:t.id},e("div",{class:"erx-sched__resource-cell"},e("div",{class:"erx-sched__resource"},t.avatar?e("img",{src:t.avatar,alt:"",class:"erx-sched__resource-avatar"}):e("span",{class:"erx-sched__resource-avatar",style:{background:t.color||"var(--erx-color-primary, #667eea)"}},t.name.charAt(0).toUpperCase()),e("div",{class:"erx-sched__resource-info"},e("span",{class:"erx-sched__resource-name"},t.name),t.title&&e("span",{class:"erx-sched__resource-title"},t.title)))),e("div",{class:"erx-sched__days-cells"},r.map(o=>{const i=this.getEventsForResourceAndDate(t.id,o);return e("div",{class:{"erx-sched__day-cell":!0,"erx-sched__day-cell--today":this.isToday(o)},key:o.toISOString()},e("div",{class:"erx-sched__time-grid"},s.map(a=>e("div",{class:"erx-sched__time-slot",style:{height:`${this.hourHeight}px`},key:a.hour,onClick:()=>this.handleSlotClick(t,o,a.hour)}))),e("div",{class:"erx-sched__events"},i.map(a=>{const d=this.getEventPosition(a);return e("div",{class:{"erx-sched__event":!0,[`erx-sched__event--${a.status||"confirmed"}`]:!0},style:{top:`${d.top}px`,height:`${d.height}px`,background:a.color||t.color||"var(--erx-color-primary, #667eea)"},key:a.id,onClick:n=>this.handleEventClick(a,n)},e("span",{class:"erx-sched__event-time"},new Date(a.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),e("span",{class:"erx-sched__event-title"},a.title))})),this.isToday(o)&&this.config.showCurrentTime!==!1&&e("div",{class:"erx-sched__current-time",style:{top:`${((new Date().getHours()-this.startHour)*60+new Date().getMinutes())/60*this.hourHeight}px`}}))}))))),e("div",{class:"erx-sched__time-labels"},e("div",{class:"erx-sched__resource-header"}),e("div",{class:"erx-sched__time-labels-grid"},s.map(t=>e("div",{class:"erx-sched__time-label",style:{height:`${this.hourHeight}px`},key:t.hour},t.label)))))}render(){return e("div",{key:"5b2739fbd74d83eba648ee926481116f519b6c9a",class:{"erx-sched":!0,"erx-sched--disabled":this.disabled},part:"container"},e("div",{key:"251229461ffe25dd4f7c4427433a36db6911481f",class:"erx-sched__toolbar",part:"toolbar"},e("div",{key:"86004884c3937c46d87b96ca749ab69e7af473c7",class:"erx-sched__nav"},e("button",{key:"2696adb7b8cd6ddeecd720f1ce08dcfe1f1f5586",class:"erx-sched__nav-btn",onClick:()=>this.navigate("prev")},"←"),e("button",{key:"f61424b9d14b5dd690700222f14fe5640fea58ce",class:"erx-sched__nav-btn",onClick:()=>this.navigate("next")},"→"),e("button",{key:"2222a1f5fa10d1b1f52ff35095b0d9f8dcc16a29",class:"erx-sched__today-btn",onClick:()=>{this.currentDate=new Date}},"Today")),e("div",{key:"92d542f24073cdb572f4c008b82f11b07e0125a3",class:"erx-sched__title"},this.currentDate.toLocaleDateString("en-US",{month:"long",year:"numeric"})),e("div",{key:"fe4b7848e81088b8edff92568f005abdf59b9d06",class:"erx-sched__view-switcher"},["day","week"].map(r=>e("button",{class:{"erx-sched__view-btn":!0,"erx-sched__view-btn--active":this.view===r},key:r,onClick:()=>{this.view=r}},r.charAt(0).toUpperCase()+r.slice(1))))),this.resources.length===0?e("div",{class:"erx-sched__empty"},"No resources configured"):this.renderTimelineView())}};x.style=h();export{x as erx_scheduler};

import{r as d,c as x,h as o}from"./index-DLMfuaWg.js";const l=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-bom{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-bom__header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-bom__product{display:flex;align-items:center;gap:12px}.erx-bom__product-img{width:48px;height:48px;border-radius:8px;-o-object-fit:cover;object-fit:cover;background:var(--erx-surface-tertiary, #f3f4f6)}.erx-bom__product-info{flex:1}.erx-bom__product-name{display:block;font-size:16px;font-weight:600;color:var(--erx-text, #111827)}.erx-bom__product-sku{display:block;font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-bom__version{font-size:12px;color:var(--erx-text-secondary, #6b7280);padding:4px 8px;background:var(--erx-surface-secondary, #f9fafb);border-radius:4px;margin-right:8px}.erx-bom__status{font-size:11px;font-weight:600;padding:4px 10px;border-radius:12px;text-transform:uppercase}.erx-bom__status--draft{background:rgba(156,163,175,0.15);color:var(--erx-text-secondary, #6b7280)}.erx-bom__status--active{background:rgba(16,185,129,0.15);color:var(--erx-color-success, #10b981)}.erx-bom__status--obsolete{background:rgba(239,68,68,0.15);color:var(--erx-color-danger, #ef4444)}.erx-bom__columns{display:flex;padding:8px 16px;background:var(--erx-surface-secondary, #f9fafb);font-size:11px;font-weight:600;text-transform:uppercase;color:var(--erx-text-secondary, #6b7280);border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-bom__col--name{flex:3}.erx-bom__col--qty{width:80px;text-align:right}.erx-bom__col--cost{width:100px;text-align:right}.erx-bom__col--total{width:100px;text-align:right}.erx-bom__col--stock{width:80px;text-align:right}.erx-bom__tree{max-height:500px;overflow-y:auto}.erx-bom__item-wrapper{border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-bom__item-wrapper:last-child{border-bottom:none}.erx-bom__item{display:flex;align-items:center;padding:10px 12px;cursor:pointer;transition:background 150ms ease}.erx-bom__item:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-bom__toggle{width:20px;height:20px;border:none;background:transparent;color:var(--erx-text-secondary, #6b7280);cursor:pointer;font-size:10px;padding:0;display:flex;align-items:center;justify-content:center}.erx-bom__toggle-placeholder{width:20px}.erx-bom__type-icon{font-size:16px;margin-right:8px}.erx-bom__item-info{flex:3;min-width:0;display:flex;flex-direction:column}.erx-bom__item-name{font-size:13px;font-weight:500;color:var(--erx-text, #111827);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-bom__item-sku{font-size:11px;color:var(--erx-text-tertiary, #9ca3af)}.erx-bom__item-qty{width:80px;text-align:right;font-size:13px;color:var(--erx-text, #111827)}.erx-bom__item-cost{width:100px;text-align:right;font-size:13px;color:var(--erx-text-secondary, #6b7280)}.erx-bom__item-total{width:100px;text-align:right;font-size:13px;font-weight:500;color:var(--erx-text, #111827)}.erx-bom__item-stock{width:80px;text-align:right;font-size:12px;padding:2px 6px;border-radius:4px}.erx-bom__item-stock--low{background:rgba(239,68,68,0.1);color:var(--erx-color-danger, #ef4444)}.erx-bom__item-stock--ok{background:rgba(16,185,129,0.1);color:var(--erx-color-success, #10b981)}.erx-bom__item--product{background:rgba(102,126,234,0.03)}.erx-bom__item--consumable{opacity:0.8}.erx-bom__footer{display:flex;justify-content:flex-end;align-items:center;gap:12px;padding:16px;border-top:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-bom__total-label{font-size:14px;font-weight:500;color:var(--erx-text-secondary, #6b7280)}.erx-bom__total-value{font-size:18px;font-weight:700;color:var(--erx-text, #111827)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-bom,:host(.dark) .erx-bom{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-bom__product-name,:host(.dark) .erx-bom__product-name,:host-context(.dark) .erx-bom__item-name,:host(.dark) .erx-bom__item-name{color:var(--erx-text)}:host-context(.dark) .erx-bom__columns,:host(.dark) .erx-bom__columns,:host-context(.dark) .erx-bom__footer,:host(.dark) .erx-bom__footer{background:var(--erx-surface-secondary)}",b=class{constructor(e){d(this,e),this.erxSelect=x(this,"erxSelect")}bom;showCosts=!0;showStock=!1;expandAll=!1;currency="USD";locale="en-US";expandedItems=new Set;erxSelect;componentWillLoad(){this.expandAll&&this.expandAllItems(this.bom.items)}expandAllItems(e){e.forEach(r=>{r.children&&r.children.length>0&&(this.expandedItems.add(r.id),this.expandAllItems(r.children))})}getTypeIcon(e){return{product:"ðŸ“¦",component:"ðŸ”©","raw-material":"ðŸª¨",consumable:"ðŸ§´"}[e]||"ðŸ“‹"}formatCurrency(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).format(e)}toggleItem(e,r){r.stopPropagation();const t=new Set(this.expandedItems);t.has(e)?t.delete(e):t.add(e),this.expandedItems=t}handleSelect(e,r,t){this.erxSelect.emit({item:e,path:r,level:t})}renderItem(e,r,t){const c=e.children&&e.children.length>0,a=this.expandedItems.has(e.id),n=[...r,e];return o("div",{class:"erx-bom__item-wrapper",key:e.id},o("div",{class:{"erx-bom__item":!0,[`erx-bom__item--${e.type}`]:!0,"erx-bom__item--expanded":a},style:{paddingLeft:`${t*24+12}px`},onClick:()=>this.handleSelect(e,n,t)},c?o("button",{class:"erx-bom__toggle",onClick:s=>this.toggleItem(e.id,s)},a?"â–¼":"â–¶"):o("span",{class:"erx-bom__toggle-placeholder"}),o("span",{class:"erx-bom__type-icon"},this.getTypeIcon(e.type)),o("div",{class:"erx-bom__item-info"},o("span",{class:"erx-bom__item-name"},e.name),e.sku&&o("span",{class:"erx-bom__item-sku"},e.sku)),o("span",{class:"erx-bom__item-qty"},e.quantity," ",e.unit),this.showCosts&&e.unitCost!==void 0&&o("span",{class:"erx-bom__item-cost"},this.formatCurrency(e.unitCost)),this.showCosts&&e.totalCost!==void 0&&o("span",{class:"erx-bom__item-total"},this.formatCurrency(e.totalCost)),this.showStock&&e.available!==void 0&&o("span",{class:{"erx-bom__item-stock":!0,"erx-bom__item-stock--low":e.available<e.quantity,"erx-bom__item-stock--ok":e.available>=e.quantity}},e.available," avail.")),c&&a&&o("div",{class:"erx-bom__children"},e.children.map(s=>this.renderItem(s,n,t+1))))}render(){const{bom:e,showCosts:r}=this;return o("div",{key:"c11958331c500c7190ca5640cca997bb5146a273",class:"erx-bom",part:"container"},o("div",{key:"4613d7ddcdb2cf57979da04cfb4d113ae01bc158",class:"erx-bom__header",part:"header"},o("div",{key:"3105d4c6ee7ba1bef990b0735f2f22457407ff03",class:"erx-bom__product"},e.product.image&&o("img",{key:"81a0d3c12cc9c7d4fec1c801b86f75310e71d790",src:e.product.image,alt:"",class:"erx-bom__product-img"}),o("div",{key:"712757e787fa29661205fb273d23368d0e29c400",class:"erx-bom__product-info"},o("span",{key:"9f0e089bb221c9bd9d427e168de077eff1a92311",class:"erx-bom__product-name"},e.product.name),e.product.sku&&o("span",{key:"f99a658ddb55e29d1bb9a0af3cf2fac227fc097f",class:"erx-bom__product-sku"},e.product.sku))),e.version&&o("span",{key:"f753721f314b20cbf5c5906e263127301250ad1f",class:"erx-bom__version"},"v",e.version),e.status&&o("span",{key:"e1fcd3e0d07a248c9370a002e4fa4cba73c9ca0f",class:`erx-bom__status erx-bom__status--${e.status}`},e.status)),o("div",{key:"598b1113f98694d986da27054c0aee8298e41edb",class:"erx-bom__columns",part:"columns"},o("span",{key:"e144925ba0ddaeb7cc91397c199c91e1443433e5",class:"erx-bom__col erx-bom__col--name"},"Component"),o("span",{key:"89091317b9e1091ad60be07668988fb1b0902913",class:"erx-bom__col erx-bom__col--qty"},"Qty"),r&&o("span",{key:"969344864fd7a28210fe6c88ee483f75ad853734",class:"erx-bom__col erx-bom__col--cost"},"Unit Cost"),r&&o("span",{key:"b4b122d054bb35cadab84ec1b4e5ca25ecfc4c93",class:"erx-bom__col erx-bom__col--total"},"Total"),this.showStock&&o("span",{key:"6a6218e22278fff09b8cab753bcd0045941067e9",class:"erx-bom__col erx-bom__col--stock"},"Stock")),o("div",{key:"db3e781ba461dbd6809fb34bc88e01a08ad9d042",class:"erx-bom__tree",part:"tree"},e.items.map(t=>this.renderItem(t,[],0))),r&&e.totalCost!==void 0&&o("div",{key:"cffc0cf2df86aa7f40ed1c59e6ea525fb5ff10ae",class:"erx-bom__footer",part:"footer"},o("span",{key:"795916e30eb58ca5fc46a2506f4bd5f08eabb97f",class:"erx-bom__total-label"},"Total BOM Cost:"),o("span",{key:"7699e3789097231cb4b250594987ce8e48ad69a9",class:"erx-bom__total-value"},this.formatCurrency(e.totalCost))))}};b.style=l();export{b as erx_bom_tree};

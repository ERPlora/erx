import{r as i,c as t,h as a}from"./index-DLMfuaWg.js";const l=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-upload__dropzone{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:32px;border:2px dashed var(--erx-border-color, #e5e7eb);border-radius:12px;background:var(--erx-surface, #fff);cursor:pointer;transition:all 200ms ease}.erx-upload__dropzone:hover{border-color:var(--erx-color-primary, #667eea);background:rgba(102,126,234,0.05)}.erx-upload__dropzone--active{border-color:var(--erx-color-primary, #667eea);background:rgba(102,126,234,0.1)}.erx-upload__dropzone--disabled{opacity:0.6;cursor:not-allowed;pointer-events:none}.erx-upload__icon{font-size:40px}.erx-upload__text{text-align:center}.erx-upload__primary{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827);margin-bottom:4px}.erx-upload__secondary{display:block;font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-upload__list{margin-top:16px;display:flex;flex-direction:column;gap:8px}.erx-upload__file{display:flex;align-items:center;gap:12px;padding:12px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px}.erx-upload__file--error{border-color:var(--erx-color-danger, #ef4444);background:rgba(239,68,68,0.05)}.erx-upload__file--success{border-color:var(--erx-color-success, #22c55e)}.erx-upload__file-preview{width:48px;height:48px;border-radius:6px;overflow:hidden;background:var(--erx-surface-secondary, #f9fafb);display:flex;align-items:center;justify-content:center;flex-shrink:0}.erx-upload__file-preview img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-upload__file-icon{font-size:24px}.erx-upload__file-info{flex:1;min-width:0}.erx-upload__file-name{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-upload__file-size{display:block;font-size:12px;color:var(--erx-text-tertiary, #9ca3af);margin-top:2px}.erx-upload__progress{flex:1;max-width:100px;height:4px;background:var(--erx-border-color, #e5e7eb);border-radius:2px;overflow:hidden}.erx-upload__progress-bar{height:100%;background:var(--erx-color-primary, #667eea);transition:width 200ms ease}.erx-upload__status{width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:12px;font-weight:600}.erx-upload__status--success{background:var(--erx-color-success, #22c55e);color:white}.erx-upload__status--error{background:var(--erx-color-danger, #ef4444);color:white}.erx-upload__remove{width:24px;height:24px;padding:0;border:none;background:transparent;color:var(--erx-text-tertiary, #9ca3af);font-size:14px;cursor:pointer;border-radius:4px;transition:all 150ms ease}.erx-upload__remove:hover{background:var(--erx-surface-secondary, #f9fafb);color:var(--erx-color-danger, #ef4444)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-upload__dropzone,:host(.dark) .erx-upload__dropzone{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-upload__file,:host(.dark) .erx-upload__file{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-upload__file-name,:host(.dark) .erx-upload__file-name{color:var(--erx-text)}",d=class{constructor(e){i(this,e),this.erxSelect=t(this,"erxSelect"),this.erxProgress=t(this,"erxProgress"),this.erxComplete=t(this,"erxComplete"),this.erxError=t(this,"erxError"),this.erxRemove=t(this,"erxRemove")}accept="*/*";multiple=!0;maxSize=10*1024*1024;maxFiles=10;showList=!0;showPreview=!0;disabled=!1;erxSelect;erxProgress;erxComplete;erxError;erxRemove;files=[];isDragOver=!1;inputEl;fileIdCounter=0;async getFiles(){return this.files}async clearFiles(){this.files.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),this.files=[]}async removeFile(e){const s=this.files.find(r=>r.id===e);s&&(s.preview&&URL.revokeObjectURL(s.preview),this.files=this.files.filter(r=>r.id!==e),this.erxRemove.emit({file:s}))}handleClick=()=>{this.disabled||this.inputEl?.click()};handleInputChange=e=>{const s=e.target;s.files&&this.addFiles(Array.from(s.files)),s.value=""};handleDragOver=e=>{e.preventDefault(),this.disabled||(this.isDragOver=!0)};handleDragLeave=e=>{e.preventDefault(),this.isDragOver=!1};handleDrop=e=>{e.preventDefault(),this.isDragOver=!1,!(this.disabled||!e.dataTransfer?.files)&&this.addFiles(Array.from(e.dataTransfer.files))};addFiles(e){const s=[];for(const r of e){if(this.files.length+s.length>=this.maxFiles)break;if(r.size>this.maxSize){console.warn(`File ${r.name} exceeds max size`);continue}if(this.accept!=="*/*"&&!this.isAcceptedType(r)){console.warn(`File ${r.name} type not accepted`);continue}const o={id:`file-${++this.fileIdCounter}`,file:r,name:r.name,size:r.size,type:r.type,progress:0,status:"pending"};this.showPreview&&r.type.startsWith("image/")&&(o.preview=URL.createObjectURL(r)),s.push(o)}s.length>0&&(this.files=[...this.files,...s],this.erxSelect.emit({files:s}))}isAcceptedType(e){return this.accept.split(",").map(r=>r.trim()).some(r=>r.startsWith(".")?e.name.toLowerCase().endsWith(r.toLowerCase()):r.endsWith("/*")?e.type.startsWith(r.replace("/*","/")):e.type===r)}formatSize(e){if(e===0)return"0 B";const s=1024,r=["B","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,o)).toFixed(1))+" "+r[o]}getFileIcon(e){return e.startsWith("image/")?"ðŸ–¼ï¸":e.startsWith("video/")?"ðŸŽ¬":e.startsWith("audio/")?"ðŸŽµ":e.includes("pdf")?"ðŸ“„":e.includes("zip")||e.includes("rar")?"ðŸ“¦":e.includes("word")||e.includes("document")?"ðŸ“":e.includes("sheet")||e.includes("excel")?"ðŸ“Š":"ðŸ“Ž"}render(){return a("div",{key:"417970ace5b71d00e466eff2befcfdee4ed97894",class:"erx-upload",part:"container"},a("div",{key:"7f9d17cb540333fb125199e36be1a117fb929f8b",class:{"erx-upload__dropzone":!0,"erx-upload__dropzone--active":this.isDragOver,"erx-upload__dropzone--disabled":this.disabled},onClick:this.handleClick,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,part:"dropzone"},a("input",{key:"1dfed9becea7a5cf7c478db12ae7c22dac1c6c19",ref:e=>this.inputEl=e,type:"file",accept:this.accept,multiple:this.multiple,onChange:this.handleInputChange,hidden:!0}),a("div",{key:"b2bcfa15afa454717658bf6f1a7dfa8a29ade1ed",class:"erx-upload__icon"},"ðŸ“"),a("div",{key:"28cc255f95bd924501a57c9666f880145d9977b9",class:"erx-upload__text"},a("span",{key:"5ed8ff88bc481e8df2c3b508e0c5d769b54bee93",class:"erx-upload__primary"},"Drop files here or click to upload"),a("span",{key:"c70c3e532aeea0c98215d00da3e831dc087ecc09",class:"erx-upload__secondary"},"Max ",this.formatSize(this.maxSize)," per file",this.maxFiles>1&&` â€¢ Up to ${this.maxFiles} files`))),this.showList&&this.files.length>0&&a("div",{key:"d019a68df823804ff00d79d8a5980a3189a1465c",class:"erx-upload__list",part:"list"},this.files.map(e=>a("div",{class:{"erx-upload__file":!0,[`erx-upload__file--${e.status}`]:!0},part:"file"},a("div",{class:"erx-upload__file-preview"},e.preview?a("img",{src:e.preview,alt:e.name}):a("span",{class:"erx-upload__file-icon"},this.getFileIcon(e.type))),a("div",{class:"erx-upload__file-info"},a("span",{class:"erx-upload__file-name"},e.name),a("span",{class:"erx-upload__file-size"},this.formatSize(e.size))),e.status==="uploading"&&a("div",{class:"erx-upload__progress"},a("div",{class:"erx-upload__progress-bar",style:{width:`${e.progress}%`}})),e.status==="success"&&a("span",{class:"erx-upload__status erx-upload__status--success"},"âœ“"),e.status==="error"&&a("span",{class:"erx-upload__status erx-upload__status--error"},"âœ•"),a("button",{class:"erx-upload__remove",onClick:()=>this.removeFile(e.id),title:"Remove"},"âœ•")))))}};d.style=l();export{d as erx_upload};

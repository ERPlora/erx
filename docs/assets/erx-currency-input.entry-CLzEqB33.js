import{r as n,c as s,h as a}from"./index-DLMfuaWg.js";const c=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-curr{position:relative}.erx-curr--disabled{opacity:0.6;pointer-events:none}.erx-curr__label{display:block;font-size:13px;font-weight:500;color:var(--erx-text-secondary, #6b7280);margin-bottom:6px}.erx-curr__input-wrapper{position:relative;display:flex;align-items:center;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;background:var(--erx-surface, #fff);transition:all 150ms ease;overflow:hidden}.erx-curr--focused .erx-curr__input-wrapper{border-color:var(--erx-color-primary, #667eea);box-shadow:0 0 0 3px rgba(102,126,234,0.1)}.erx-curr__symbol{padding:0 12px;font-size:14px;font-weight:500;color:var(--erx-text-secondary, #6b7280);background:var(--erx-surface-secondary, #f9fafb);height:44px;display:flex;align-items:center}.erx-curr__symbol--prefix{border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-curr__symbol--suffix{border-left:1px solid var(--erx-border-color, #e5e7eb)}.erx-curr__input{flex:1;height:44px;padding:0 12px;border:none;background:transparent;font-size:16px;font-weight:500;color:var(--erx-text, #111827);outline:none;text-align:right;font-variant-numeric:tabular-nums}.erx-curr__input::-moz-placeholder{color:var(--erx-text-tertiary, #9ca3af);font-weight:400}.erx-curr__input::placeholder{color:var(--erx-text-tertiary, #9ca3af);font-weight:400}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-curr__input-wrapper,:host(.dark) .erx-curr__input-wrapper{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-curr__input,:host(.dark) .erx-curr__input{color:var(--erx-text)}:host-context(.dark) .erx-curr__symbol,:host(.dark) .erx-curr__symbol{background:var(--erx-surface-secondary)}",l=class{constructor(e){n(this,e),this.erxChange=s(this,"erxChange"),this.erxBlur=s(this,"erxBlur")}value;config={currency:"USD"};placeholder="0.00";disabled=!1;readonly=!1;label;displayValue="";isFocused=!1;inputRef;erxChange;erxBlur;componentWillLoad(){this.value!==void 0&&(this.displayValue=this.formatForDisplay(this.value))}async setValue(e){this.displayValue=this.formatForDisplay(e),this.emitChange()}async clear(){this.displayValue="",this.erxChange.emit({value:0,formatted:this.formatCurrency(0),currency:this.config.currency})}async setFocus(){this.inputRef?.focus()}get locale(){return this.config.locale||"en-US"}get precision(){return this.config.precision??2}get currencySymbol(){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.config.currency}).formatToParts(0).find(i=>i.type==="currency")?.value||"$"}formatCurrency(e){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.config.currency,minimumFractionDigits:this.precision,maximumFractionDigits:this.precision}).format(e)}formatForDisplay(e){return e.toFixed(this.precision)}parseValue(e){const t=e.replace(/[^\d.-]/g,""),r=parseFloat(t);return isNaN(r)?0:r}clampValue(e){let t=e;return this.config.min!==void 0&&(t=Math.max(t,this.config.min)),this.config.max!==void 0&&(t=Math.min(t,this.config.max)),!this.config.allowNegative&&t<0&&(t=0),t}handleInput=e=>{let r=e.target.value;r=r.replace(/[^\d.-]/g,"");const i=r.split(".");if(i.length>2&&(r=i[0]+"."+i.slice(1).join("")),!this.config.allowNegative)r=r.replace(/-/g,"");else{const o=r.startsWith("-");r=r.replace(/-/g,""),o&&(r="-"+r)}this.displayValue=r};handleFocus=()=>{this.isFocused=!0};handleBlur=()=>{this.isFocused=!1;let e=this.parseValue(this.displayValue);e=this.clampValue(e),e=parseFloat(e.toFixed(this.precision)),this.displayValue=this.formatForDisplay(e),this.emitChange(),this.erxBlur.emit({value:e,formatted:this.formatCurrency(e),currency:this.config.currency})};handleKeyDown=e=>{if(e.key==="ArrowUp"||e.key==="ArrowDown"){e.preventDefault();const t=this.config.step??1;let r=this.parseValue(this.displayValue);r=e.key==="ArrowUp"?r+t:r-t,r=this.clampValue(r),this.displayValue=this.formatForDisplay(r),this.emitChange()}};emitChange(){const e=this.clampValue(this.parseValue(this.displayValue));this.erxChange.emit({value:e,formatted:this.formatCurrency(e),currency:this.config.currency})}render(){const e=this.config.showSymbol!==!1,t=this.config.symbolPosition||"prefix";return a("div",{key:"4b46159877de74256a7d9e3176aaca3c1ff9b386",class:{"erx-curr":!0,"erx-curr--disabled":this.disabled,"erx-curr--focused":this.isFocused},part:"container"},this.label&&a("label",{key:"c084855cbb25d6e3c1ba0feb9b8885a266b10699",class:"erx-curr__label"},this.label),a("div",{key:"dd040a2bb779cc75292b86daf8ebc558a6bb1e68",class:"erx-curr__input-wrapper"},e&&t==="prefix"&&a("span",{key:"b501454db3431df898fd79f2c18eb56437c59ddb",class:"erx-curr__symbol erx-curr__symbol--prefix"},this.currencySymbol),a("input",{key:"c8ac56e4e324b77fe61459998d52693a59b5a007",ref:r=>this.inputRef=r,type:"text",inputMode:"decimal",class:"erx-curr__input",placeholder:this.placeholder,value:this.displayValue,disabled:this.disabled,readOnly:this.readonly,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,part:"input"}),e&&t==="suffix"&&a("span",{key:"ae054764fc3799c4f2e5e1d28f89f9013150b4eb",class:"erx-curr__symbol erx-curr__symbol--suffix"},this.currencySymbol)))}};l.style=c();export{l as erx_currency_input};

import{r as s,c as r,g as l,h as t}from"./index-DLMfuaWg.js";const n=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif}.erx-pin{display:flex;flex-direction:column;align-items:center;padding:var(--erx-space-md, 16px);background:var(--erx-surface, #ffffff);border-radius:var(--erx-border-radius-lg, 16px);-webkit-user-select:none;-moz-user-select:none;user-select:none}.erx-pin:focus{outline:none}.erx-pin:focus-visible{box-shadow:0 0 0 2px var(--erx-color-primary, #667eea)}.erx-pin--disabled{opacity:0.6;pointer-events:none}.erx-pin__display{display:flex;flex-direction:column;align-items:center;width:100%;margin-bottom:var(--erx-space-lg, 24px)}.erx-pin__label{font-size:14px;color:var(--erx-text-secondary, #6b7280);margin-bottom:var(--erx-space-sm, 8px)}.erx-pin__value{font-size:32px;font-weight:600;letter-spacing:8px;color:var(--erx-text, #111827);min-height:44px;display:flex;align-items:center}.erx-pin__value--empty{color:var(--erx-text-tertiary, #9ca3af)}.erx-pin__value--masked{font-size:40px;letter-spacing:12px}.erx-pin__dots{display:flex;gap:var(--erx-space-sm, 8px);margin-top:var(--erx-space-md, 16px)}.erx-pin__dot{width:12px;height:12px;border-radius:50%;background:var(--erx-border-color, #e5e7eb);transition:all 200ms ease}.erx-pin__dot--filled{background:var(--erx-color-primary, #667eea);transform:scale(1.1)}.erx-pin__keypad{display:grid;grid-template-columns:repeat(3, 1fr);gap:var(--erx-space-sm, 8px);width:100%;max-width:280px}.erx-pin__btn{display:flex;align-items:center;justify-content:center;height:var(--erx-touch-target-lg, 52px);border:none;border-radius:var(--erx-border-radius, 8px);background:var(--erx-surface-secondary, #f9fafb);color:var(--erx-text, #111827);font-size:24px;font-weight:500;cursor:pointer;transition:all 100ms ease;-webkit-tap-highlight-color:transparent}.erx-pin__btn:hover:not(:disabled){background:var(--erx-surface-tertiary, #f3f4f6)}.erx-pin__btn:active:not(:disabled),.erx-pin__btn--pressed{background:var(--erx-color-primary, #667eea);color:white;transform:scale(0.95)}.erx-pin__btn:disabled{opacity:0;cursor:default}.erx-pin__btn:focus{outline:none}.erx-pin__btn:focus-visible{box-shadow:0 0 0 2px var(--erx-color-primary, #667eea)}.erx-pin__btn--action{font-size:18px;color:var(--erx-text-secondary, #6b7280)}.erx-pin__btn--action:active:not(:disabled),.erx-pin__btn--action.erx-pin__btn--pressed{background:var(--erx-color-danger, #ef4444);color:white}.erx-pin__btn--primary{background:var(--erx-color-primary, #667eea);color:white}.erx-pin__btn--primary:hover:not(:disabled){background:var(--erx-color-primary-dark, #5a6fce)}.erx-pin__btn--primary:active:not(:disabled),.erx-pin__btn--primary.erx-pin__btn--pressed{background:var(--erx-color-primary-dark, #5a6fce)}.erx-pin__submit{width:100%;max-width:280px;height:var(--erx-touch-target, 44px);margin-top:var(--erx-space-md, 16px);border:none;border-radius:var(--erx-border-radius, 8px);background:var(--erx-color-primary, #667eea);color:white;font-size:16px;font-weight:600;cursor:pointer;transition:all 150ms ease}.erx-pin__submit:hover:not(:disabled){background:var(--erx-color-primary-dark, #5a6fce)}.erx-pin__submit:active:not(:disabled){transform:scale(0.98)}.erx-pin__submit:disabled{opacity:0.5;cursor:not-allowed}.erx-pin__submit:focus{outline:none}.erx-pin__submit:focus-visible{box-shadow:0 0 0 2px white, 0 0 0 4px var(--erx-color-primary, #667eea)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-pin,:host(.dark) .erx-pin{background:var(--erx-surface)}:host-context(.dark) .erx-pin__btn,:host(.dark) .erx-pin__btn{background:var(--erx-surface-secondary);color:var(--erx-text)}:host-context(.dark) .erx-pin__btn:hover:not(:disabled),:host(.dark) .erx-pin__btn:hover:not(:disabled){background:var(--erx-surface-tertiary)}:host-context(.dark) .erx-pin__value,:host(.dark) .erx-pin__value{color:var(--erx-text)}:host-context(.dark) .erx-pin__dot,:host(.dark) .erx-pin__dot{background:var(--erx-border-color)}@media (hover: none) and (pointer: coarse){.erx-pin__btn{height:60px;font-size:28px}.erx-pin__keypad{gap:var(--erx-space-md, 16px);max-width:320px}.erx-pin__submit{height:52px;max-width:320px}}",o=class{constructor(e){s(this,e),this.erxChange=r(this,"erxChange"),this.erxSubmit=r(this,"erxSubmit"),this.erxClear=r(this,"erxClear"),this.erxKeyPress=r(this,"erxKeyPress")}get el(){return l(this)}value="";maxLength=4;masked=!0;showDisplay=!0;label;placeholder="";allowDecimal=!1;allowNegative=!1;autoSubmit=!1;disabled=!1;showClear=!0;showBackspace=!0;showSubmit=!0;customButtons;hapticFeedback=!0;soundEnabled=!1;isNegative=!1;lastPressed=null;erxChange;erxSubmit;erxClear;erxKeyPress;handleValueChange(e){this.autoSubmit&&e.length>=this.maxLength&&this.erxSubmit.emit({value:e})}async clear(){this.value="",this.isNegative=!1,this.emitChange(),this.erxClear.emit()}async setValue(e){this.value=e.slice(0,this.maxLength),this.emitChange()}async submit(){const e=this.isNegative?`-${this.value}`:this.value;this.erxSubmit.emit({value:e})}async setFocus(){this.el.focus()}handleKeyPress(e){if(!this.disabled)switch(this.hapticFeedback&&"vibrate"in navigator&&navigator.vibrate(10),this.lastPressed=e,setTimeout(()=>{this.lastPressed=null},100),this.erxKeyPress.emit({key:e}),e){case"backspace":this.handleBackspace();break;case"clear":this.clear();break;case"enter":this.submit();break;case"toggle-sign":this.isNegative=!this.isNegative,this.emitChange();break;case".":this.handleDecimal();break;default:this.handleDigit(e)}}handleDigit(e){this.value.length>=this.maxLength||(this.value+=e,this.emitChange())}handleBackspace(){this.value.length!==0&&(this.value=this.value.slice(0,-1),this.emitChange())}handleDecimal(){this.allowDecimal&&(this.value.includes(".")||this.value.length>=this.maxLength||(this.value+=this.value.length===0?"0.":".",this.emitChange()))}emitChange(){const e=this.isNegative&&this.value?`-${this.value}`:this.value;this.erxChange.emit({value:e,length:this.value.length,complete:this.value.length>=this.maxLength})}handleKeyDown=e=>{this.disabled||(e.key>="0"&&e.key<="9"?(e.preventDefault(),this.handleKeyPress(e.key)):e.key==="Backspace"?(e.preventDefault(),this.handleKeyPress("backspace")):e.key==="Enter"?(e.preventDefault(),this.handleKeyPress("enter")):e.key==="Escape"?(e.preventDefault(),this.handleKeyPress("clear")):e.key==="."&&this.allowDecimal?(e.preventDefault(),this.handleKeyPress(".")):e.key==="-"&&this.allowNegative&&(e.preventDefault(),this.handleKeyPress("toggle-sign")))};getDisplayValue(){if(!this.value)return this.placeholder;const e=this.isNegative?"-":"";return this.masked?e+"•".repeat(this.value.length):e+this.value}getDefaultButtons(){const e=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}];return this.allowNegative?e.push({value:"toggle-sign",label:"+/-",class:"erx-pin__btn--action"}):this.allowDecimal?e.push({value:".",label:".",class:"erx-pin__btn--action"}):this.showClear?e.push({value:"clear",label:"C",class:"erx-pin__btn--action"}):e.push({value:"",label:"",disabled:!0}),e.push({value:"0",label:"0"}),this.showBackspace?e.push({value:"backspace",label:"⌫",class:"erx-pin__btn--action"}):this.showSubmit?e.push({value:"enter",label:"↵",class:"erx-pin__btn--primary"}):e.push({value:"",label:"",disabled:!0}),e}render(){const e=this.customButtons||this.getDefaultButtons();return t("div",{key:"5aff77f31479a8057b4e0c93b20eb22be6c5e1f3",class:{"erx-pin":!0,"erx-pin--disabled":this.disabled},part:"container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown,role:"application","aria-label":"PIN Pad"},this.showDisplay&&t("div",{key:"4b117dfe7aeabeeda8964ef91897486c9f703355",class:"erx-pin__display",part:"display"},this.label&&t("div",{key:"0b2154cdd854ee442ce4912e5e1acb8c95e319a0",class:"erx-pin__label"},this.label),t("div",{key:"add965f94d4ac77fcc51570587e3611088fa59ae",class:{"erx-pin__value":!0,"erx-pin__value--empty":!this.value,"erx-pin__value--masked":this.masked},"aria-live":"polite"},this.getDisplayValue()),this.maxLength>0&&t("div",{key:"9aec2f91779a320be29c3beb774d058da679fec8",class:"erx-pin__dots"},Array.from({length:this.maxLength}).map((a,i)=>t("div",{class:{"erx-pin__dot":!0,"erx-pin__dot--filled":i<this.value.length}})))),t("div",{key:"514f4c860fafc718c3ded70d1b840d7757eea5e2",class:"erx-pin__keypad",part:"keypad"},e.map(a=>t("button",{class:{"erx-pin__btn":!0,"erx-pin__btn--pressed":this.lastPressed===a.value,[a.class||""]:!!a.class},disabled:this.disabled||a.disabled||!a.value&&!a.label,onClick:()=>a.value&&this.handleKeyPress(a.value),part:"button",type:"button","aria-label":a.label||a.value},a.label||a.value))),this.showSubmit&&this.showBackspace&&t("button",{key:"22552fbb905175b3a02681d0b009fae649d98ca5",class:"erx-pin__submit",disabled:this.disabled||!this.value,onClick:()=>this.handleKeyPress("enter"),part:"submit",type:"button"},t("slot",{key:"a54d3b11e613a2e2e4f60ad27d063aa2d9f054e0",name:"submit-label"},"Enter")))}static get watchers(){return{value:[{handleValueChange:0}]}}};o.style=n();export{o as erx_pin_pad};

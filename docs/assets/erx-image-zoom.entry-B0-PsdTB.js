import{r,c as a,g as n,h as i}from"./index-DLMfuaWg.js";const h=()=>":host{display:inline-block}.erx-iz{position:relative;display:inline-block;overflow:hidden;cursor:zoom-in}.erx-iz--zoomed{cursor:zoom-out}.erx-iz__img{display:block;max-width:100%;height:auto}.erx-iz--smooth .erx-iz__img{transition:opacity 150ms ease}.erx-iz--overlay .erx-iz__overlay{position:absolute;inset:0;background-repeat:no-repeat;opacity:0;pointer-events:none;transition:opacity 150ms ease}.erx-iz--overlay.erx-iz--zoomed .erx-iz__overlay{opacity:1}.erx-iz--overlay.erx-iz--zoomed .erx-iz__img{opacity:0}.erx-iz--lens .erx-iz__lens{position:absolute;border-radius:50%;border:2px solid var(--erx-color-primary, #667eea);box-shadow:0 4px 12px rgba(0,0,0,0.2);background-repeat:no-repeat;pointer-events:none;transform:translate(-50%, -50%);z-index:10}.erx-iz--side{display:flex;gap:16px}.erx-iz--side .erx-iz__side{width:300px;height:300px;flex-shrink:0;background-repeat:no-repeat;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;display:none}.erx-iz--side.erx-iz--zoomed .erx-iz__side{display:block}@media (hover: none){.erx-iz{cursor:pointer}}",l=class{constructor(e){r(this,e),this.erxZoom=a(this,"erxZoom")}get el(){return n(this)}src;zoomSrc;alt="";trigger="hover";zoomLevel=2;position="overlay";lensSize=150;smooth=!0;isZoomed=!1;mouseX=0;mouseY=0;imgWidth=0;imgHeight=0;erxZoom;containerEl;get effectiveZoomSrc(){return this.zoomSrc||this.src}handleMouseEnter=()=>{(this.trigger==="hover"||this.trigger==="both")&&this.activateZoom()};handleMouseLeave=()=>{(this.trigger==="hover"||this.trigger==="both")&&this.deactivateZoom()};handleClick=()=>{(this.trigger==="click"||this.trigger==="both")&&(this.isZoomed?this.deactivateZoom():this.activateZoom())};handleMouseMove=e=>{if(!this.containerEl||!this.isZoomed)return;const o=this.containerEl.getBoundingClientRect();this.mouseX=(e.clientX-o.left)/o.width*100,this.mouseY=(e.clientY-o.top)/o.height*100};handleImageLoad=e=>{const o=e.target;this.imgWidth=o.naturalWidth,this.imgHeight=o.naturalHeight};activateZoom(){this.isZoomed=!0,this.erxZoom.emit({zoomed:!0,level:this.zoomLevel})}deactivateZoom(){this.isZoomed=!1,this.erxZoom.emit({zoomed:!1,level:1})}renderOverlayZoom(){if(!this.isZoomed)return null;const e=`${this.mouseX}% ${this.mouseY}%`,o=`${this.zoomLevel*100}%`;return i("div",{class:"erx-iz__overlay",part:"overlay",style:{backgroundImage:`url(${this.effectiveZoomSrc})`,backgroundPosition:e,backgroundSize:o}})}renderLensZoom(){if(!this.isZoomed)return null;const e=`calc(${this.mouseX}% - ${this.lensSize/2}px)`,o=`calc(${this.mouseY}% - ${this.lensSize/2}px)`,t=`${this.mouseX}% ${this.mouseY}%`,s=`${this.zoomLevel*100}%`;return i("div",{class:"erx-iz__lens",part:"lens",style:{width:`${this.lensSize}px`,height:`${this.lensSize}px`,left:e,top:o,backgroundImage:`url(${this.effectiveZoomSrc})`,backgroundPosition:t,backgroundSize:s}})}renderSideZoom(){if(!this.isZoomed)return null;const e=`${this.mouseX}% ${this.mouseY}%`,o=`${this.zoomLevel*100}%`;return i("div",{class:"erx-iz__side",part:"side",style:{backgroundImage:`url(${this.effectiveZoomSrc})`,backgroundPosition:e,backgroundSize:o}})}render(){return i("div",{key:"df153da3f0551b2baa3ff7aafd901ecf4c65cdd2",class:{"erx-iz":!0,"erx-iz--zoomed":this.isZoomed,"erx-iz--smooth":this.smooth,[`erx-iz--${this.position}`]:!0},part:"container",ref:e=>this.containerEl=e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove,onClick:this.handleClick},i("img",{key:"87a5b095a960fd6d9a32ec42baa1b157691ecb92",class:"erx-iz__img",part:"image",src:this.src,alt:this.alt,onLoad:this.handleImageLoad}),this.position==="overlay"&&this.renderOverlayZoom(),this.position==="lens"&&this.renderLensZoom(),this.position==="side"&&this.renderSideZoom())}};l.style=h();export{l as erx_image_zoom};

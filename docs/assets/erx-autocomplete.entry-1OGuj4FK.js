import{r as a,c as o,g as s,h as t}from"./index-DLMfuaWg.js";const n=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-auto{position:relative}.erx-auto--disabled{opacity:0.6;pointer-events:none}.erx-auto__label{display:block;font-size:13px;font-weight:500;color:var(--erx-text-secondary, #6b7280);margin-bottom:6px}.erx-auto__input-wrapper{position:relative;display:flex;align-items:center}.erx-auto__input{width:100%;height:44px;padding:0 40px 0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;background:var(--erx-surface, #fff);font-size:14px;color:var(--erx-text, #111827);outline:none;transition:all 150ms ease}.erx-auto__input:focus{border-color:var(--erx-color-primary, #667eea);box-shadow:0 0 0 3px rgba(102,126,234,0.1)}.erx-auto__input::-moz-placeholder{color:var(--erx-text-tertiary, #9ca3af)}.erx-auto__input::placeholder{color:var(--erx-text-tertiary, #9ca3af)}.erx-auto__spinner{position:absolute;right:12px;width:16px;height:16px;border:2px solid var(--erx-border-color, #e5e7eb);border-top-color:var(--erx-color-primary, #667eea);border-radius:50%;animation:spin 0.6s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.erx-auto__clear{position:absolute;right:12px;width:20px;height:20px;border:none;background:var(--erx-surface-tertiary, #f3f4f6);border-radius:50%;color:var(--erx-text-secondary, #6b7280);font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center}.erx-auto__clear:hover{background:var(--erx-border-color, #e5e7eb)}.erx-auto__dropdown{position:absolute;top:100%;left:0;right:0;margin-top:4px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);z-index:100;max-height:300px;overflow-y:auto}.erx-auto__list{list-style:none;margin:0;padding:4px}.erx-auto__option{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:6px;cursor:pointer;transition:background 150ms ease}.erx-auto__option:hover,.erx-auto__option--highlighted{background:var(--erx-surface-secondary, #f9fafb)}.erx-auto__option--disabled{opacity:0.5;cursor:not-allowed}.erx-auto__option-img{width:32px;height:32px;border-radius:6px;-o-object-fit:cover;object-fit:cover}.erx-auto__option-icon{font-size:18px}.erx-auto__option-content{flex:1;min-width:0}.erx-auto__option-label{display:block;font-size:14px;color:var(--erx-text, #111827)}.erx-auto__option-label mark{background:rgba(102,126,234,0.2);color:inherit;padding:0 2px;border-radius:2px}.erx-auto__option-desc{display:block;font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-auto__empty{padding:16px;text-align:center;color:var(--erx-text-tertiary, #9ca3af);font-size:13px}.erx-auto__custom{padding:10px 12px;border-top:1px solid var(--erx-border-color, #e5e7eb);cursor:pointer}.erx-auto__custom:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-auto__custom-label{font-size:13px;color:var(--erx-color-primary, #667eea);font-weight:500}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-auto__input,:host(.dark) .erx-auto__input{background:var(--erx-surface);border-color:var(--erx-border-color);color:var(--erx-text)}:host-context(.dark) .erx-auto__dropdown,:host(.dark) .erx-auto__dropdown{background:var(--erx-surface);border-color:var(--erx-border-color)}",l=class{constructor(e){a(this,e),this.erxSelect=o(this,"erxSelect"),this.erxSearch=o(this,"erxSearch"),this.erxClear=o(this,"erxClear")}get el(){return s(this)}options=[];value;placeholder="Search...";config={};disabled=!1;loading=!1;label;query="";isOpen=!1;highlightedIndex=-1;filteredOptions=[];inputRef;debounceTimer;erxSelect;erxSearch;erxClear;componentWillLoad(){if(this.value){const e=this.options.find(r=>r.value===this.value);e&&(this.query=e.label)}}async clear(){this.query="",this.filteredOptions=[],this.isOpen=!1,this.erxClear.emit()}async setFocus(){this.inputRef?.focus()}get minChars(){return this.config.minChars??1}get debounce(){return this.config.debounce??300}get maxResults(){return this.config.maxResults??10}handleInput=e=>{const r=e.target.value;if(this.query=r,this.highlightedIndex=-1,this.debounceTimer&&clearTimeout(this.debounceTimer),r.length<this.minChars){this.filteredOptions=[],this.isOpen=!1;return}this.debounceTimer=setTimeout(()=>{this.config.async?this.erxSearch.emit({query:r}):this.filterOptions(r),this.isOpen=!0},this.debounce)};filterOptions(e){const r=e.toLowerCase();this.filteredOptions=this.options.filter(i=>i.label.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r)).slice(0,this.maxResults)}handleFocus=()=>{this.query.length>=this.minChars&&(this.isOpen=!0)};handleBlur=()=>{setTimeout(()=>{this.isOpen=!1},200)};handleKeyDown=e=>{if(!this.isOpen){(e.key==="ArrowDown"||e.key==="Enter")&&(this.isOpen=!0,e.preventDefault());return}switch(e.key){case"ArrowDown":e.preventDefault(),this.highlightedIndex=Math.min(this.highlightedIndex+1,this.filteredOptions.length-1);break;case"ArrowUp":e.preventDefault(),this.highlightedIndex=Math.max(this.highlightedIndex-1,0);break;case"Enter":e.preventDefault(),this.highlightedIndex>=0&&this.filteredOptions[this.highlightedIndex]?this.selectOption(this.filteredOptions[this.highlightedIndex]):this.config.allowCustom&&this.query&&this.selectCustom();break;case"Escape":this.isOpen=!1;break}};selectOption(e){this.query=e.label,this.isOpen=!1,this.erxSelect.emit({option:e,isCustom:!1})}selectCustom(){const e={value:this.query,label:this.query};this.isOpen=!1,this.erxSelect.emit({option:e,isCustom:!0})}highlightMatch(e){if(!this.config.highlightMatch||!this.query)return e;const r=new RegExp(`(${this.query})`,"gi");return e.replace(r,"<mark>$1</mark>")}render(){return t("div",{key:"51a955e0a02c7ffb14cad5100ce4fa44440405ff",class:{"erx-auto":!0,"erx-auto--disabled":this.disabled,"erx-auto--open":this.isOpen},part:"container"},this.label&&t("label",{key:"06386371ce1fd85070e3d7ba77a954a999ee3094",class:"erx-auto__label"},this.label),t("div",{key:"a7bf8f43a42c99f7582e2cae57fe730ef2c64acb",class:"erx-auto__input-wrapper"},t("input",{key:"c15e247b9f52eab08561752d700d78eecc082e72",ref:e=>this.inputRef=e,type:"text",class:"erx-auto__input",placeholder:this.placeholder,value:this.query,disabled:this.disabled,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,autocomplete:"off",part:"input"}),this.loading&&t("span",{key:"ce48c0a770e7b17682eea071ae931b350e498c80",class:"erx-auto__spinner"}),this.query&&!this.loading&&t("button",{key:"b7c7d2097b832e85eb31dbedc8defc105df5f32f",class:"erx-auto__clear",onClick:()=>this.clear(),type:"button"},"Ã—")),this.isOpen&&t("div",{key:"5899e6f33915dee45a2fa69925657df8ba682b89",class:"erx-auto__dropdown",part:"dropdown"},this.filteredOptions.length>0?t("ul",{class:"erx-auto__list"},this.filteredOptions.map((e,r)=>t("li",{class:{"erx-auto__option":!0,"erx-auto__option--highlighted":r===this.highlightedIndex,"erx-auto__option--disabled":!!e.disabled},key:e.value,onClick:()=>!e.disabled&&this.selectOption(e)},e.image&&t("img",{src:e.image,alt:"",class:"erx-auto__option-img"}),e.icon&&t("span",{class:"erx-auto__option-icon"},e.icon),t("div",{class:"erx-auto__option-content"},t("span",{class:"erx-auto__option-label",innerHTML:this.highlightMatch(e.label)}),e.description&&t("span",{class:"erx-auto__option-desc"},e.description))))):t("div",{class:"erx-auto__empty"},this.loading?"Loading...":"No results found"),this.config.allowCustom&&this.query&&!this.filteredOptions.some(e=>e.label.toLowerCase()===this.query.toLowerCase())&&t("div",{key:"fcc1cc116a5176e5615ae7f2ac38aed25d7005e2",class:"erx-auto__custom",onClick:()=>this.selectCustom()},t("span",{key:"721c0c6915758eb84bc14961f15f8386cc934f5b",class:"erx-auto__custom-label"},'Create "',this.query,'"'))))}};l.style=n();export{l as erx_autocomplete};

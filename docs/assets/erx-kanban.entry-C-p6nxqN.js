import{r as c,c as l,h as n}from"./index-DLMfuaWg.js";const x=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-kanban{display:flex;gap:16px;padding:16px;overflow-x:auto;min-height:400px}.erx-kanban__column{flex:0 0 280px;display:flex;flex-direction:column;background:var(--erx-surface-secondary, #f9fafb);border-radius:12px;max-height:calc(100vh - 200px)}.erx-kanban__column--collapsed{flex:0 0 48px}.erx-kanban__column--drag-over{background:rgba(102,126,234,0.1)}.erx-kanban__column--over-limit .erx-kanban__column-header{background:rgba(239,68,68,0.1)}.erx-kanban__column-header{display:flex;align-items:center;gap:8px;padding:12px;border-bottom:3px solid var(--erx-color-primary, #667eea);cursor:pointer}.erx-kanban__column-title{flex:1;font-size:14px;font-weight:600;color:var(--erx-text, #111827)}.erx-kanban__column-count{font-size:12px;font-weight:500;padding:2px 8px;border-radius:10px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280)}.erx-kanban__column-count--over{background:rgba(239,68,68,0.15);color:var(--erx-color-danger, #ef4444)}.erx-kanban__column-toggle{font-size:10px;color:var(--erx-text-tertiary, #9ca3af)}.erx-kanban__cards{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:8px}.erx-kanban__card{background:var(--erx-surface, #fff);border-radius:8px;border:1px solid var(--erx-border-color, #e5e7eb);padding:12px;cursor:pointer;transition:all 150ms ease;position:relative}.erx-kanban__card:hover{box-shadow:0 4px 12px rgba(0,0,0,0.1)}.erx-kanban__card--dragging{opacity:0.5}.erx-kanban__card-priority{position:absolute;top:0;left:0;right:0;height:3px;border-radius:8px 8px 0 0}.erx-kanban__card-labels{display:flex;gap:4px;margin-bottom:8px}.erx-kanban__label{width:32px;height:6px;border-radius:3px}.erx-kanban__card-title{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827);margin-bottom:4px}.erx-kanban__card-desc{font-size:12px;color:var(--erx-text-secondary, #6b7280);margin:0 0 8px 0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.erx-kanban__card-footer{display:flex;align-items:center;justify-content:space-between;gap:8px}.erx-kanban__avatar{width:24px;height:24px;border-radius:50%;overflow:hidden;background:rgba(102,126,234,0.1);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:var(--erx-color-primary, #667eea)}.erx-kanban__avatar img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-kanban__card-meta{display:flex;gap:8px;font-size:11px;color:var(--erx-text-tertiary, #9ca3af)}.erx-kanban__card-due,.erx-kanban__card-comments,.erx-kanban__card-attachments{white-space:nowrap}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-kanban__column,:host(.dark) .erx-kanban__column{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-kanban__card,:host(.dark) .erx-kanban__card{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-kanban__column-title,:host(.dark) .erx-kanban__column-title,:host-context(.dark) .erx-kanban__card-title,:host(.dark) .erx-kanban__card-title{color:var(--erx-text)}",g=class{constructor(a){c(this,a),this.erxCardMove=l(this,"erxCardMove"),this.erxCardSelect=l(this,"erxCardSelect"),this.erxColumnCollapse=l(this,"erxColumnCollapse")}cards=[];config;draggedCard=null;dragOverColumn=null;collapsedColumns=new Set;erxCardMove;erxCardSelect;erxColumnCollapse;getCardsForColumn(a){return this.cards.filter(e=>e.columnId===a).sort((e,t)=>e.order-t.order)}getColumnCardCount(a){return this.cards.filter(e=>e.columnId===a).length}isOverLimit(a){return a.limit?this.getColumnCardCount(a.id)>=a.limit:!1}handleDragStart(a,e){this.config.draggable&&(this.draggedCard=a.id,e.dataTransfer?.setData("text/plain",a.id),e.dataTransfer.effectAllowed="move")}handleDragOver(a,e){e.preventDefault(),this.dragOverColumn=a}handleDragLeave(){this.dragOverColumn=null}handleDrop(a,e){if(e.preventDefault(),this.dragOverColumn=null,!this.draggedCard)return;const t=this.cards.find(o=>o.id===this.draggedCard);if(t){if(t.columnId!==a){const o=this.getCardsForColumn(a);this.erxCardMove.emit({card:t,fromColumn:t.columnId,toColumn:a,newOrder:o.length})}this.draggedCard=null}}handleDragEnd(){this.draggedCard=null,this.dragOverColumn=null}handleCardClick(a){this.erxCardSelect.emit({card:a})}toggleColumn(a){if(!this.config.collapsible)return;const e=new Set(this.collapsedColumns),t=e.has(a.id);t?e.delete(a.id):e.add(a.id),this.collapsedColumns=e,this.erxColumnCollapse.emit({column:a,collapsed:!t})}getPriorityColor(a){const e={urgent:"var(--erx-color-danger, #ef4444)",high:"var(--erx-color-warning, #f59e0b)",medium:"var(--erx-color-primary, #667eea)",low:"var(--erx-text-tertiary, #9ca3af)"};return e[a||"low"]||e.low}render(){const{config:a}=this;return n("div",{key:"e460de0e425e22d6ba5f2693a336e1de375dbe72",class:"erx-kanban",part:"container"},a.columns.map(e=>{const t=this.collapsedColumns.has(e.id),o=this.getCardsForColumn(e.id),d=o.length,i=this.isOverLimit(e);return n("div",{class:{"erx-kanban__column":!0,"erx-kanban__column--collapsed":t,"erx-kanban__column--drag-over":this.dragOverColumn===e.id,"erx-kanban__column--over-limit":i},key:e.id,onDragOver:r=>this.handleDragOver(e.id,r),onDragLeave:()=>this.handleDragLeave(),onDrop:r=>this.handleDrop(e.id,r),part:"column"},n("div",{class:"erx-kanban__column-header",style:{borderColor:e.color},onClick:()=>a.collapsible&&this.toggleColumn(e)},n("span",{class:"erx-kanban__column-title"},e.title),a.showCardCount&&n("span",{class:{"erx-kanban__column-count":!0,"erx-kanban__column-count--over":i}},d,e.limit&&a.showWipLimit?`/${e.limit}`:""),a.collapsible&&n("span",{class:"erx-kanban__column-toggle"},t?"â–¶":"â–¼")),!t&&n("div",{class:"erx-kanban__cards",part:"cards"},o.map(r=>n("div",{class:{"erx-kanban__card":!0,"erx-kanban__card--dragging":this.draggedCard===r.id},key:r.id,draggable:a.draggable,onDragStart:s=>this.handleDragStart(r,s),onDragEnd:()=>this.handleDragEnd(),onClick:()=>this.handleCardClick(r),part:"card"},r.priority&&n("div",{class:"erx-kanban__card-priority",style:{background:this.getPriorityColor(r.priority)}}),r.labels&&r.labels.length>0&&n("div",{class:"erx-kanban__card-labels"},r.labels.map(s=>n("span",{class:"erx-kanban__label",style:{background:s.color},key:s.id}))),n("span",{class:"erx-kanban__card-title"},r.title),r.description&&n("p",{class:"erx-kanban__card-desc"},r.description),n("div",{class:"erx-kanban__card-footer"},r.assignee&&n("div",{class:"erx-kanban__card-assignee"},r.assignee.avatar?n("img",{src:r.assignee.avatar,alt:"",class:"erx-kanban__avatar"}):n("span",{class:"erx-kanban__avatar"},r.assignee.name.charAt(0))),n("div",{class:"erx-kanban__card-meta"},r.dueDate&&n("span",{class:"erx-kanban__card-due"},"ğŸ“… ",new Date(r.dueDate).toLocaleDateString()),r.comments!==void 0&&r.comments>0&&n("span",{class:"erx-kanban__card-comments"},"ğŸ’¬ ",r.comments),r.attachments!==void 0&&r.attachments>0&&n("span",{class:"erx-kanban__card-attachments"},"ğŸ“ ",r.attachments)))))))}))}};g.style=x();export{g as erx_kanban};

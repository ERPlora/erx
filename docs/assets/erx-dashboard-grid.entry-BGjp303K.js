import{r as s,c as d,g,h as a}from"./index-DLMfuaWg.js";const o=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-dash{padding:var(--margin)}.erx-dash--dragging{cursor:grabbing}.erx-dash__grid{display:grid;grid-template-columns:repeat(var(--columns), 1fr);grid-auto-rows:var(--row-height);gap:var(--gap)}.erx-dash__widget{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);display:flex;flex-direction:column;overflow:hidden;transition:box-shadow 200ms ease}.erx-dash__widget:hover{box-shadow:0 4px 12px rgba(0,0,0,0.1)}.erx-dash__widget--dragging{opacity:0.5;cursor:grabbing}.erx-dash__widget--locked{opacity:0.8}.erx-dash__widget-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-dash__widget-title{font-size:14px;font-weight:600;color:var(--erx-text, #111827)}.erx-dash__widget-drag{cursor:grab;color:var(--erx-text-tertiary, #9ca3af);font-size:12px;letter-spacing:2px}.erx-dash__widget-content{flex:1;padding:16px;overflow:auto}.erx-dash__widget-resize{position:absolute;bottom:0;right:0;width:16px;height:16px;cursor:se-resize;color:var(--erx-text-tertiary, #9ca3af);font-size:10px;display:flex;align-items:center;justify-content:center}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-dash__widget,:host(.dark) .erx-dash__widget{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-dash__widget-header,:host(.dark) .erx-dash__widget-header{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-dash__widget-title,:host(.dark) .erx-dash__widget-title{color:var(--erx-text)}",n=class{constructor(e){s(this,e),this.erxLayoutChange=d(this,"erxLayoutChange"),this.erxWidgetSelect=d(this,"erxWidgetSelect")}get el(){return g(this)}widgets=[];config={columns:12,rowHeight:80};draggingWidget=null;resizingWidget=null;erxLayoutChange;erxWidgetSelect;get gap(){return this.config.gap??12}get margin(){return this.config.margin??12}getWidgetStyle(e){return{gridColumn:`${e.x+1} / span ${e.width}`,gridRow:`${e.y+1} / span ${e.height}`,minHeight:`${e.height*this.config.rowHeight+(e.height-1)*this.gap}px`}}handleWidgetClick(e){this.erxWidgetSelect.emit({widget:e})}handleDragStart(e,t){!this.config.draggable||e.locked||(this.draggingWidget=e.id,t.dataTransfer?.setData("text/plain",e.id))}handleDragEnd(){this.draggingWidget=null}render(){const{widgets:e,config:t}=this;return a("div",{key:"2646dfc2719ee844935e7e0a17439d8a7d1c673a",class:{"erx-dash":!0,"erx-dash--dragging":!!this.draggingWidget},style:{"--columns":t.columns.toString(),"--row-height":`${t.rowHeight}px`,"--gap":`${this.gap}px`,"--margin":`${this.margin}px`},part:"container"},a("div",{key:"a25334cd308101a5b0b15b955365c27ef02cb4d2",class:"erx-dash__grid",part:"grid"},e.map(r=>a("div",{class:{"erx-dash__widget":!0,"erx-dash__widget--dragging":this.draggingWidget===r.id,"erx-dash__widget--locked":!!r.locked},style:this.getWidgetStyle(r),key:r.id,draggable:t.draggable&&!r.locked,onDragStart:i=>this.handleDragStart(r,i),onDragEnd:()=>this.handleDragEnd(),onClick:()=>this.handleWidgetClick(r),part:"widget"},r.title&&a("div",{class:"erx-dash__widget-header",part:"widget-header"},a("span",{class:"erx-dash__widget-title"},r.title),t.draggable&&!r.locked&&a("span",{class:"erx-dash__widget-drag"},"⋮⋮")),a("div",{class:"erx-dash__widget-content",part:"widget-content"},a("slot",{name:r.id})),t.resizable&&!r.locked&&a("div",{class:"erx-dash__widget-resize"},"⌟")))))}};n.style=o();export{n as erx_dashboard_grid};

import{r as l,c as s,g as c,h as t}from"./index-DLMfuaWg.js";const f=()=>":host{display:inline-block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-notif{position:relative}.erx-notif__trigger{cursor:pointer}.erx-notif__bell{position:relative;width:40px;height:40px;border:none;background:transparent;font-size:20px;cursor:pointer;border-radius:8px;transition:background 150ms ease}.erx-notif__bell:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-notif__badge{position:absolute;top:2px;right:2px;min-width:18px;height:18px;padding:0 5px;background:var(--erx-color-danger, #ef4444);color:white;font-size:11px;font-weight:600;border-radius:9px;display:flex;align-items:center;justify-content:center}.erx-notif__panel{position:absolute;top:100%;right:0;margin-top:8px;width:380px;max-height:520px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.12);display:flex;flex-direction:column;z-index:1000}.erx-notif__panel-header{padding:16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-notif__panel-title{margin:0 0 12px 0;font-size:16px;font-weight:600;color:var(--erx-text, #111827)}.erx-notif__filters{display:flex;gap:8px}.erx-notif__filter{padding:6px 12px;border:none;background:transparent;font-size:13px;color:var(--erx-text-secondary, #6b7280);cursor:pointer;border-radius:6px;transition:all 150ms ease}.erx-notif__filter:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-notif__filter--active{background:var(--erx-color-primary, #667eea);color:white}.erx-notif__list{flex:1;overflow-y:auto}.erx-notif__group-title{padding:8px 16px;font-size:11px;font-weight:600;color:var(--erx-text-tertiary, #9ca3af);text-transform:uppercase;letter-spacing:0.5px;background:var(--erx-surface-secondary, #f9fafb)}.erx-notif__item{display:flex;gap:12px;padding:12px 16px;cursor:pointer;transition:background 150ms ease;position:relative;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-notif__item:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-notif__item--unread{background:rgba(102,126,234,0.05)}.erx-notif__icon{flex-shrink:0}.erx-notif__avatar{width:40px;height:40px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.erx-notif__type-icon{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px}.erx-notif__type-icon--info{background:rgba(59,130,246,0.1);color:#3b82f6}.erx-notif__type-icon--success{background:rgba(34,197,94,0.1);color:#22c55e}.erx-notif__type-icon--warning{background:rgba(245,158,11,0.1);color:#f59e0b}.erx-notif__type-icon--error{background:rgba(239,68,68,0.1);color:#ef4444}.erx-notif__content{flex:1;min-width:0}.erx-notif__header{display:flex;align-items:flex-start;justify-content:space-between;gap:8px}.erx-notif__title{font-size:14px;font-weight:500;color:var(--erx-text, #111827)}.erx-notif__time{font-size:12px;color:var(--erx-text-tertiary, #9ca3af);flex-shrink:0}.erx-notif__message{margin:4px 0 0 0;font-size:13px;color:var(--erx-text-secondary, #6b7280);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.erx-notif__actions{display:flex;gap:8px;margin-top:8px}.erx-notif__action{padding:4px 12px;border:1px solid var(--erx-border-color, #e5e7eb);background:transparent;font-size:12px;color:var(--erx-text-secondary, #6b7280);cursor:pointer;border-radius:4px;transition:all 150ms ease}.erx-notif__action:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-notif__action--primary{background:var(--erx-color-primary, #667eea);border-color:var(--erx-color-primary, #667eea);color:white}.erx-notif__action--primary:hover{background:var(--erx-color-primary-dark, #5a6fd6)}.erx-notif__dismiss{position:absolute;top:8px;right:8px;width:24px;height:24px;border:none;background:transparent;color:var(--erx-text-tertiary, #9ca3af);font-size:12px;cursor:pointer;border-radius:4px;opacity:0;transition:all 150ms ease}.erx-notif__item:hover .erx-notif__dismiss{opacity:1}.erx-notif__dismiss:hover{background:var(--erx-surface-secondary, #f9fafb);color:var(--erx-text, #111827)}.erx-notif__unread-dot{position:absolute;left:4px;top:50%;transform:translateY(-50%);width:8px;height:8px;background:var(--erx-color-primary, #667eea);border-radius:50%}.erx-notif__empty{padding:48px 16px;text-align:center;color:var(--erx-text-tertiary, #9ca3af);font-size:14px}.erx-notif__panel-footer{display:flex;justify-content:center;gap:16px;padding:12px 16px;border-top:1px solid var(--erx-border-color, #e5e7eb)}.erx-notif__footer-btn{padding:0;border:none;background:transparent;font-size:13px;color:var(--erx-color-primary, #667eea);cursor:pointer}.erx-notif__footer-btn:hover{text-decoration:underline}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-notif__panel,:host(.dark) .erx-notif__panel{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-notif__panel-title,:host(.dark) .erx-notif__panel-title{color:var(--erx-text)}:host-context(.dark) .erx-notif__title,:host(.dark) .erx-notif__title{color:var(--erx-text)}",d=class{constructor(e){l(this,e),this.erxNotificationClick=s(this,"erxNotificationClick"),this.erxNotificationAction=s(this,"erxNotificationAction"),this.erxNotificationDismiss=s(this,"erxNotificationDismiss"),this.erxOpenChange=s(this,"erxOpenChange"),this.erxMarkAllRead=s(this,"erxMarkAllRead"),this.erxClearAll=s(this,"erxClearAll")}get el(){return c(this)}notifications=[];showBadge=!0;maxVisible=50;groupByDate=!0;showMarkAllRead=!0;showClearAll=!0;emptyMessage="No notifications";panelTitle="Notifications";open=!1;erxNotificationClick;erxNotificationAction;erxNotificationDismiss;erxOpenChange;erxMarkAllRead;erxClearAll;filter="all";handleOpenChange(e){this.erxOpenChange.emit({open:e})}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}handleOutsideClick=e=>{this.open&&!this.el.contains(e.target)&&(this.open=!1)};async toggle(){this.open=!this.open}async addNotification(e){this.notifications=[e,...this.notifications].slice(0,this.maxVisible)}async removeNotification(e){this.notifications=this.notifications.filter(r=>r.id!==e)}async markAsRead(e){this.notifications=this.notifications.map(r=>r.id===e?{...r,read:!0}:r)}async markAllAsRead(){this.notifications=this.notifications.map(e=>({...e,read:!0})),this.erxMarkAllRead.emit()}async clearAll(){this.notifications=[],this.erxClearAll.emit()}get unreadCount(){return this.notifications.filter(e=>!e.read).length}get filteredNotifications(){return this.filter==="unread"?this.notifications.filter(e=>!e.read):this.notifications}get groupedNotifications(){const e=new Map;if(!this.groupByDate)return e.set("All",this.filteredNotifications),e;const r=new Date;r.setHours(0,0,0,0);const i=new Date(r);return i.setDate(i.getDate()-1),this.filteredNotifications.forEach(a=>{const n=a.timestamp?new Date(a.timestamp):new Date;n.setHours(0,0,0,0);let o;n.getTime()===r.getTime()?o="Today":n.getTime()===i.getTime()?o="Yesterday":o=n.toLocaleDateString(),e.has(o)||e.set(o,[]),e.get(o).push(a)}),e}handleNotificationClick(e){this.markAsRead(e.id),this.erxNotificationClick.emit({notification:e})}handleAction(e,r,i){i.stopPropagation(),this.erxNotificationAction.emit({notification:e,action:r})}handleDismiss(e,r){r.stopPropagation(),this.removeNotification(e.id),this.erxNotificationDismiss.emit({notification:e})}getTypeIcon(e){return e?{info:"‚ÑπÔ∏è",success:"‚úì",warning:"‚ö†",error:"‚úï"}[e]:"üîî"}formatTime(e){if(!e)return"";const r=new Date(e),a=new Date().getTime()-r.getTime(),n=Math.floor(a/6e4),o=Math.floor(a/36e5);return n<1?"Just now":n<60?`${n}m ago`:o<24?`${o}h ago`:r.toLocaleDateString()}renderNotification(e){return t("div",{class:{"erx-notif__item":!0,"erx-notif__item--unread":!e.read,[`erx-notif__item--${e.type}`]:!!e.type,[`erx-notif__item--${e.priority}`]:!!e.priority},onClick:()=>this.handleNotificationClick(e),part:"item"},t("div",{class:"erx-notif__icon"},e.avatar?t("img",{src:e.avatar,alt:"",class:"erx-notif__avatar"}):t("span",{class:`erx-notif__type-icon erx-notif__type-icon--${e.type||"info"}`},e.icon||this.getTypeIcon(e.type))),t("div",{class:"erx-notif__content"},t("div",{class:"erx-notif__header"},t("span",{class:"erx-notif__title"},e.title),e.timestamp&&t("span",{class:"erx-notif__time"},this.formatTime(e.timestamp))),e.message&&t("p",{class:"erx-notif__message"},e.message),e.actions&&e.actions.length>0&&t("div",{class:"erx-notif__actions"},e.actions.map(r=>t("button",{class:{"erx-notif__action":!0,"erx-notif__action--primary":!!r.primary},onClick:i=>this.handleAction(e,r,i)},r.label)))),t("button",{class:"erx-notif__dismiss",onClick:r=>this.handleDismiss(e,r),"aria-label":"Dismiss"},"‚úï"),!e.read&&t("div",{class:"erx-notif__unread-dot"}))}render(){const e=this.groupedNotifications;return t("div",{key:"85d93a05aecf046c7111408ae3793bb4c61daf55",class:"erx-notif",part:"container"},t("div",{key:"76218872df40518f034f0133f37f86ab5393c7b5",class:"erx-notif__trigger",onClick:()=>this.open=!this.open,part:"trigger"},t("slot",{key:"4b9f41cd0f356bd170df047d9464143a7351e844",name:"trigger"},t("button",{key:"0e0fbdae7e44abf442ae2f75ffe578198bc8fc38",class:"erx-notif__bell"},"üîî",this.showBadge&&this.unreadCount>0&&t("span",{key:"83c1790de3827aefb5fa061dffa5821a50cf22ca",class:"erx-notif__badge"},this.unreadCount>99?"99+":this.unreadCount)))),this.open&&t("div",{key:"782d4fffc1ba6118bc3e6ce933fd3082eec9ba35",class:"erx-notif__panel",part:"panel"},t("header",{key:"ad82d1f9c991ca926d3182be47a6d47af2097cf1",class:"erx-notif__panel-header"},t("h3",{key:"20036c53fe598d062ff027616973205555c5daf0",class:"erx-notif__panel-title"},this.panelTitle),t("div",{key:"5c841775184903ddc14990149ca791742a89f4d3",class:"erx-notif__filters"},t("button",{key:"0469bab203a6e479ae139dd492205e2d7d1fa6ed",class:{"erx-notif__filter":!0,"erx-notif__filter--active":this.filter==="all"},onClick:()=>this.filter="all"},"All"),t("button",{key:"5392d9f6f0da6866ee38956b1a602389892dcae1",class:{"erx-notif__filter":!0,"erx-notif__filter--active":this.filter==="unread"},onClick:()=>this.filter="unread"},"Unread (",this.unreadCount,")"))),t("div",{key:"e0f806805824f6fca9b4ee1ad1d01200fba516c3",class:"erx-notif__list",part:"list"},this.filteredNotifications.length>0?Array.from(e.entries()).map(([r,i])=>t("div",{class:"erx-notif__group"},this.groupByDate&&t("div",{class:"erx-notif__group-title"},r),i.map(a=>this.renderNotification(a)))):t("div",{class:"erx-notif__empty",part:"empty"},this.emptyMessage)),(this.showMarkAllRead||this.showClearAll)&&this.notifications.length>0&&t("footer",{key:"6f372aaadfbe90bff532aefc7ac3d191157c67b8",class:"erx-notif__panel-footer"},this.showMarkAllRead&&this.unreadCount>0&&t("button",{key:"11d134f622cff9ea543e4209b52c1c627cf98946",class:"erx-notif__footer-btn",onClick:()=>this.markAllAsRead()},"Mark all as read"),this.showClearAll&&t("button",{key:"6f74dd594ea166d18b782f5be4bd961795b90306",class:"erx-notif__footer-btn",onClick:()=>this.clearAll()},"Clear all"))))}static get watchers(){return{open:[{handleOpenChange:0}]}}};d.style=f();export{d as erx_notifications};

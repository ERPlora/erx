import{r as i,c as o,h as e}from"./index-DLMfuaWg.js";const l=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-batch{padding:16px;background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);cursor:pointer;transition:all 200ms ease}.erx-batch:hover{border-color:var(--erx-color-primary, #667eea);box-shadow:0 4px 12px rgba(0,0,0,0.1)}.erx-batch--created{border-left:4px solid var(--erx-text-tertiary, #9ca3af)}.erx-batch--in-production{border-left:4px solid var(--erx-color-primary, #667eea)}.erx-batch--quality-check{border-left:4px solid var(--erx-color-warning, #f59e0b)}.erx-batch--completed{border-left:4px solid var(--erx-color-success, #10b981)}.erx-batch--rejected{border-left:4px solid var(--erx-color-danger, #ef4444)}.erx-batch--shipped{border-left:4px solid #8b5cf6}.erx-batch__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.erx-batch__number{display:flex;align-items:center;gap:8px}.erx-batch__status-icon{font-size:16px}.erx-batch__number-text{font-size:16px;font-weight:600;color:var(--erx-text, #111827)}.erx-batch__status{font-size:11px;font-weight:600;padding:4px 10px;border-radius:12px;text-transform:uppercase}.erx-batch__status--created{background:rgba(156,163,175,0.15);color:var(--erx-text-secondary, #6b7280)}.erx-batch__status--in-production{background:rgba(102,126,234,0.15);color:var(--erx-color-primary, #667eea)}.erx-batch__status--quality-check{background:rgba(245,158,11,0.15);color:var(--erx-color-warning, #f59e0b)}.erx-batch__status--completed{background:rgba(16,185,129,0.15);color:var(--erx-color-success, #10b981)}.erx-batch__status--rejected{background:rgba(239,68,68,0.15);color:var(--erx-color-danger, #ef4444)}.erx-batch__status--shipped{background:rgba(139,92,246,0.15);color:#8b5cf6}.erx-batch__product{display:flex;align-items:center;gap:12px;margin-bottom:16px}.erx-batch__product-img{width:48px;height:48px;border-radius:8px;-o-object-fit:cover;object-fit:cover;background:var(--erx-surface-tertiary, #f3f4f6)}.erx-batch__product-info{flex:1}.erx-batch__product-name{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827)}.erx-batch__product-sku{display:block;font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-batch__quantities{display:flex;align-items:center;gap:12px;padding:12px;background:var(--erx-surface-secondary, #f9fafb);border-radius:8px;margin-bottom:16px}.erx-batch__qty{text-align:center;flex:1}.erx-batch__qty-value{display:block;font-size:18px;font-weight:700;color:var(--erx-text, #111827)}.erx-batch__qty--good .erx-batch__qty-value{color:var(--erx-color-success, #10b981)}.erx-batch__qty--defect .erx-batch__qty-value{color:var(--erx-color-danger, #ef4444)}.erx-batch__qty-label{font-size:10px;color:var(--erx-text-secondary, #6b7280);text-transform:uppercase}.erx-batch__yield{width:48px;height:48px;position:relative}.erx-batch__yield-ring{width:100%;height:100%;transform:rotate(-90deg)}.erx-batch__yield-bg{fill:none;stroke:var(--erx-surface-tertiary, #e5e7eb);stroke-width:3}.erx-batch__yield-fill{fill:none;stroke:var(--erx-color-success, #10b981);stroke-width:3;stroke-linecap:round;transition:stroke-dasharray 500ms ease}.erx-batch__yield-text{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);font-size:10px;font-weight:600;color:var(--erx-text, #111827)}.erx-batch__stages{margin-bottom:16px}.erx-batch__stage{display:flex;gap:12px;padding:8px 0;cursor:pointer}.erx-batch__stage-indicator{display:flex;flex-direction:column;align-items:center;width:20px}.erx-batch__stage-dot{width:12px;height:12px;border-radius:50%;border:2px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface, #fff)}.erx-batch__stage--completed .erx-batch__stage-dot{background:var(--erx-color-success, #10b981);border-color:var(--erx-color-success, #10b981)}.erx-batch__stage--current .erx-batch__stage-dot{background:var(--erx-color-primary, #667eea);border-color:var(--erx-color-primary, #667eea);animation:pulse 2s infinite}@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(102,126,234,0.4)}50%{box-shadow:0 0 0 6px rgba(102,126,234,0)}}.erx-batch__stage-line{flex:1;width:2px;background:var(--erx-border-color, #e5e7eb);margin-top:4px}.erx-batch__stage--completed .erx-batch__stage-line{background:var(--erx-color-success, #10b981)}.erx-batch__stage-content{flex:1;padding-bottom:8px}.erx-batch__stage-name{display:block;font-size:13px;font-weight:500;color:var(--erx-text, #111827)}.erx-batch__stage--pending .erx-batch__stage-name{color:var(--erx-text-tertiary, #9ca3af)}.erx-batch__stage-time{font-size:11px;color:var(--erx-text-tertiary, #9ca3af)}.erx-batch__timeline{padding-top:12px;border-top:1px solid var(--erx-border-color, #e5e7eb);margin-bottom:12px}.erx-batch__timeline-title{font-size:11px;font-weight:600;text-transform:uppercase;color:var(--erx-text-secondary, #6b7280);margin-bottom:8px}.erx-batch__event{display:flex;gap:8px;padding:6px 0;font-size:12px}.erx-batch__event-time{width:100px;color:var(--erx-text-tertiary, #9ca3af);flex-shrink:0}.erx-batch__event-desc{flex:1;color:var(--erx-text, #111827)}.erx-batch__event-user{color:var(--erx-text-secondary, #6b7280)}.erx-batch__dates{display:flex;gap:16px;padding-top:12px;border-top:1px solid var(--erx-border-color, #e5e7eb)}.erx-batch__date{flex:1}.erx-batch__date-label{display:block;font-size:10px;text-transform:uppercase;color:var(--erx-text-tertiary, #9ca3af);margin-bottom:2px}.erx-batch__date-value{font-size:13px;color:var(--erx-text, #111827)}.erx-batch__qr{display:flex;justify-content:center;padding-top:12px;margin-top:12px;border-top:1px solid var(--erx-border-color, #e5e7eb)}.erx-batch__qr-img{width:80px;height:80px}.erx-batch--compact{padding:12px}.erx-batch--compact .erx-batch__product-img{width:36px;height:36px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-batch,:host(.dark) .erx-batch{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-batch__number-text,:host(.dark) .erx-batch__number-text,:host-context(.dark) .erx-batch__product-name,:host(.dark) .erx-batch__product-name{color:var(--erx-text)}:host-context(.dark) .erx-batch__quantities,:host(.dark) .erx-batch__quantities{background:var(--erx-surface-secondary)}",n=class{constructor(a){i(this,a),this.erxSelect=o(this,"erxSelect"),this.erxStageSelect=o(this,"erxStageSelect")}batch;showTimeline=!0;showQR=!1;compact=!1;erxSelect;erxStageSelect;getStatusIcon(){return{created:"ðŸ“","in-production":"ðŸ”„","quality-check":"ðŸ”",completed:"âœ…",rejected:"âŒ",shipped:"ðŸ“¦"}[this.batch.status]||"ðŸ“‹"}formatDate(a){return a?new Date(a).toLocaleDateString():"-"}formatDateTime(a){if(!a)return"-";const r=new Date(a);return`${r.toLocaleDateString()} ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}getYieldPercentage(){return this.batch.quantity===0?0:Math.round(this.batch.quantityGood/this.batch.quantity*100)}handleSelect=()=>{this.erxSelect.emit({batch:this.batch})};handleStageSelect(a,r){r.stopPropagation(),this.erxStageSelect.emit(a)}render(){const{batch:a,showTimeline:r,showQR:b,compact:c}=this,s=this.getYieldPercentage();return e("div",{key:"ef4d6fecc34652e05c80aad6826ee68b37bb3247",class:{"erx-batch":!0,[`erx-batch--${a.status}`]:!0,"erx-batch--compact":c},onClick:this.handleSelect,part:"container"},e("div",{key:"ceb263f369364df4211b3c4ba29110e533ce6bed",class:"erx-batch__header",part:"header"},e("div",{key:"39c045668237868c6147be0cfb02a39f726d96fe",class:"erx-batch__number"},e("span",{key:"2694bab56754ecfdd798264ed68b0125a69c6586",class:"erx-batch__status-icon"},this.getStatusIcon()),e("span",{key:"f8ba0ef56df812c64443da2fd2a094058c6327f2",class:"erx-batch__number-text"},a.number)),e("span",{key:"6c7055d76871fa34714143a81381dd398606aaab",class:`erx-batch__status erx-batch__status--${a.status}`},a.status.replace("-"," "))),e("div",{key:"3ecaf1cc2cddef6cfed1da4e4e7581127c98e03d",class:"erx-batch__product",part:"product"},a.product.image&&e("img",{key:"bed8f3869f193f8036f837b72f2aba8a74121385",src:a.product.image,alt:"",class:"erx-batch__product-img"}),e("div",{key:"658ba7800b63fcb21a22a86d506971cd0d6fe8ed",class:"erx-batch__product-info"},e("span",{key:"e62370db14258607746a4724472cfa460f0c1bde",class:"erx-batch__product-name"},a.product.name),a.product.sku&&e("span",{key:"46c4a0e2a2a11ad625745311b3c7e358ed066f4c",class:"erx-batch__product-sku"},a.product.sku))),e("div",{key:"fac6d278bab43f38f6a1a925350546c32906c39b",class:"erx-batch__quantities",part:"quantities"},e("div",{key:"fa75ddf789445599f2431fc441d3dedf4837eae0",class:"erx-batch__qty"},e("span",{key:"667af7f3f8b5c71c056c903bb1a3e0f09e7c53b1",class:"erx-batch__qty-value"},a.quantity),e("span",{key:"ed2f245f87ed88e5fbcfefce558eb35435af94a3",class:"erx-batch__qty-label"},"Total")),e("div",{key:"2f5cd817d7ab81e1505518d03c2df1b26be06e32",class:"erx-batch__qty erx-batch__qty--good"},e("span",{key:"832ade62e9ff3a1a2491913210dd451f05e47a7a",class:"erx-batch__qty-value"},a.quantityGood),e("span",{key:"0037a7c20c7024743c09913b2fc910c73723de09",class:"erx-batch__qty-label"},"Good")),e("div",{key:"07c5c5dbbd394f21d80bf3a85fa212cb02438089",class:"erx-batch__qty erx-batch__qty--defect"},e("span",{key:"e0fe9e864c6f7f666714f708970526e8879c47bd",class:"erx-batch__qty-value"},a.quantityDefect),e("span",{key:"5e0b741761720930eeafd1f0a548d1971ca262a3",class:"erx-batch__qty-label"},"Defect")),e("div",{key:"d3051b599dc74733244b3c5c7bd6c55e56d3dc31",class:"erx-batch__yield"},e("svg",{key:"aec86d5ba5782020cfcb9f83ad2f88d567fc1e3f",viewBox:"0 0 36 36",class:"erx-batch__yield-ring"},e("path",{key:"c85ed23665e196463e0c35687fcf4ea521e32eb5",class:"erx-batch__yield-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),e("path",{key:"ed4fa7e1590bfd09934b520b0780af35b17c7d11",class:"erx-batch__yield-fill","stroke-dasharray":`${s}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})),e("span",{key:"d246528e777a6e2aeab93e6a268ab794086b6901",class:"erx-batch__yield-text"},s,"%"))),!c&&a.stages&&a.stages.length>0&&e("div",{key:"241ce3adaea561eb10e6a94547a202759c31707d",class:"erx-batch__stages",part:"stages"},a.stages.map((t,d)=>e("div",{class:{"erx-batch__stage":!0,[`erx-batch__stage--${t.status}`]:!0},key:t.id,onClick:x=>this.handleStageSelect(t,x)},e("div",{class:"erx-batch__stage-indicator"},e("span",{class:"erx-batch__stage-dot"}),d<a.stages.length-1&&e("span",{class:"erx-batch__stage-line"})),e("div",{class:"erx-batch__stage-content"},e("span",{class:"erx-batch__stage-name"},t.name),t.completedAt&&e("span",{class:"erx-batch__stage-time"},this.formatDateTime(t.completedAt)))))),!c&&r&&a.events&&a.events.length>0&&e("div",{key:"4c36bebd4ed6a50fd4aea40eabffd64326ffb860",class:"erx-batch__timeline",part:"timeline"},e("div",{key:"7cb58c708886b613c0d6eeee00c668eb137d3bd3",class:"erx-batch__timeline-title"},"History"),a.events.slice(0,5).map(t=>e("div",{class:"erx-batch__event",key:t.id},e("span",{class:"erx-batch__event-time"},this.formatDateTime(t.timestamp)),e("span",{class:"erx-batch__event-desc"},t.description),t.user&&e("span",{class:"erx-batch__event-user"},t.user.name)))),!c&&e("div",{key:"9ae55a2365f5670dbb7f4a84c192e5a1d9abc4bf",class:"erx-batch__dates",part:"dates"},a.manufactureDate&&e("div",{key:"a44470716778621436ba0e5c47e9ef6a60b92757",class:"erx-batch__date"},e("span",{key:"f0c00020e64702df39c7e7ff10aac1b482b12084",class:"erx-batch__date-label"},"Manufactured"),e("span",{key:"8be2f3a00dd6fcd543ee1654bd3bb11f97678cc2",class:"erx-batch__date-value"},this.formatDate(a.manufactureDate))),a.expiryDate&&e("div",{key:"02c1f514affecda029249d83b0a709460a4ec599",class:"erx-batch__date"},e("span",{key:"25a843552f9c0bc250ad683d9f1b0cce41e77178",class:"erx-batch__date-label"},"Expires"),e("span",{key:"c717010972b5c196ea60e3036a1aec12d90050aa",class:"erx-batch__date-value"},this.formatDate(a.expiryDate))),a.location&&e("div",{key:"b23c0056f6f559c21d234f85767ac5f7bc2dc443",class:"erx-batch__date"},e("span",{key:"2f7b33b007f4c670d1b6cd62544e65e3040c3e5a",class:"erx-batch__date-label"},"Location"),e("span",{key:"1d1f62de6654068b1fd97b0daffce33be539405b",class:"erx-batch__date-value"},a.location))),b&&a.qrCode&&e("div",{key:"195f49027d290ab9f0e1af450c9e10ff50b3c4de",class:"erx-batch__qr",part:"qr"},e("img",{key:"1c81db7df4e5f4103c1006d93ebb93024bb674fb",src:a.qrCode,alt:"Batch QR Code",class:"erx-batch__qr-img"})))}};n.style=l();export{n as erx_batch_tracker};

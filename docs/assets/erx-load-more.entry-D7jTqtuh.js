import{r as t,c as s,g as o,h as e}from"./index-DLMfuaWg.js";const a=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-lm{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px;gap:12px}.erx-lm--disabled{opacity:0.5;pointer-events:none}.erx-lm__button{display:inline-flex;align-items:center;justify-content:center;padding:10px 24px;background:var(--erx-color-primary, #667eea);color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all 150ms ease;min-width:120px}.erx-lm__button:hover{background:var(--erx-color-primary-dark, #5a67d8)}.erx-lm__button:active{transform:scale(0.98)}.erx-lm__button:disabled{background:var(--erx-text-tertiary, #9ca3af);cursor:not-allowed}.erx-lm__loading{display:flex;align-items:center;gap:10px;color:var(--erx-text-secondary, #6b7280)}.erx-lm__spinner{width:20px;height:20px;border:2px solid var(--erx-border-color, #e5e7eb);border-top-color:var(--erx-color-primary, #667eea);border-radius:50%;animation:erx-lm-spin 0.8s linear infinite}@keyframes erx-lm-spin{to{transform:rotate(360deg)}}.erx-lm__text{font-size:14px}.erx-lm__error{display:flex;flex-direction:column;align-items:center;gap:8px}.erx-lm__error-text{font-size:14px;color:var(--erx-color-danger, #ef4444)}.erx-lm__retry{padding:8px 16px;background:transparent;border:1px solid var(--erx-color-danger, #ef4444);color:var(--erx-color-danger, #ef4444);border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all 150ms ease}.erx-lm__retry:hover{background:var(--erx-color-danger, #ef4444);color:#fff}.erx-lm__complete{display:flex;align-items:center;gap:8px}.erx-lm__complete-text{font-size:13px;color:var(--erx-text-tertiary, #9ca3af)}.erx-lm__sentinel{height:1px;width:100%}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-lm__button,:host(.dark) .erx-lm__button{background:var(--erx-color-primary)}:host-context(.dark) .erx-lm__loading,:host(.dark) .erx-lm__loading{color:var(--erx-text-secondary)}",i=class{constructor(r){t(this,r),this.erxLoadMore=s(this,"erxLoadMore")}get el(){return o(this)}mode="button";loadText="Load More";loadingText="Loading...";completeText="All items loaded";errorText="Failed to load";retryText="Retry";threshold=200;disabled=!1;status="idle";page=1;errorMessage="";erxLoadMore;observer;sentinelEl;componentDidLoad(){(this.mode==="infinite"||this.mode==="auto")&&this.setupIntersectionObserver()}disconnectedCallback(){this.cleanupObserver()}onModeChange(){this.cleanupObserver(),(this.mode==="infinite"||this.mode==="auto")&&this.setupIntersectionObserver()}setupIntersectionObserver(){this.sentinelEl&&(this.observer=new IntersectionObserver(r=>{r[0].isIntersecting&&this.status==="idle"&&!this.disabled&&this.triggerLoad()},{rootMargin:`${this.threshold}px`,threshold:0}),this.observer.observe(this.sentinelEl))}cleanupObserver(){this.observer&&(this.observer.disconnect(),this.observer=void 0)}triggerLoad(){this.status==="loading"||this.status==="complete"||this.disabled||(this.status="loading",this.errorMessage="",this.erxLoadMore.emit({page:this.page,done:r=>{r?(this.page++,this.status="idle"):this.status="complete"},error:r=>{this.status="error",this.errorMessage=r||this.errorText}}))}handleClick=()=>{this.triggerLoad()};handleRetry=()=>{this.triggerLoad()};async reset(){this.page=1,this.status="idle",this.errorMessage=""}async complete(){this.status="complete"}render(){return e("div",{key:"41c0ab08ede7d16d8eac68ec6b0923ed8cf815f4",class:{"erx-lm":!0,"erx-lm--disabled":this.disabled,[`erx-lm--${this.status}`]:!0},part:"container"},this.status==="idle"&&this.mode==="button"&&e("button",{key:"ea2063aad61c8ca492657dfad5dc415517a172ce",type:"button",class:"erx-lm__button",part:"button",onClick:this.handleClick,disabled:this.disabled},this.loadText),this.status==="loading"&&e("div",{key:"bfaba706b74ac47fa0fff62e14d76c4be147422a",class:"erx-lm__loading",part:"loading"},e("div",{key:"8c0ee92edb01248d3a60fe5a37d4be8aec341855",class:"erx-lm__spinner",part:"spinner"}),e("span",{key:"5ffa6d54cee6247d1b37dfb24d0f1cca9d922718",class:"erx-lm__text"},this.loadingText)),this.status==="error"&&e("div",{key:"777076e756b136dff83b1ed5f3954d19f68ab939",class:"erx-lm__error",part:"error"},e("span",{key:"db5fc02b57f71f45528eca9f9f54e0cf7e5337a9",class:"erx-lm__error-text"},this.errorMessage||this.errorText),e("button",{key:"dcd42afb1e959a035f91cc7a0f2a555481e98c91",type:"button",class:"erx-lm__retry",part:"retry",onClick:this.handleRetry},this.retryText)),this.status==="complete"&&e("div",{key:"cabc6920f69883e4b803fe0c1e3ec3c0d1bc2022",class:"erx-lm__complete",part:"complete"},e("span",{key:"81e90b4c9048b8c3302fdfd2173fc323d2ed0415",class:"erx-lm__complete-text"},this.completeText)),(this.mode==="infinite"||this.mode==="auto")&&this.status!=="complete"&&e("div",{key:"70a8303be2729968cbbc01d446182ff94dd265a3",class:"erx-lm__sentinel",ref:r=>this.sentinelEl=r}))}static get watchers(){return{mode:[{onModeChange:0}]}}};i.style=a();export{i as erx_load_more};

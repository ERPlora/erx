import{r as l,c as n,g as m,h as e}from"./index-DLMfuaWg.js";const h=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif}.erx-cart{display:flex;flex-direction:column;height:100%;background:var(--erx-surface, #ffffff);border-radius:var(--erx-border-radius-lg, 12px);border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-cart--disabled{opacity:0.6;pointer-events:none}.erx-cart__header{display:flex;align-items:center;justify-content:space-between;padding:var(--erx-space-md, 16px);border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-cart__title{font-size:18px;font-weight:600;color:var(--erx-text, #111827)}.erx-cart__count{font-weight:400;color:var(--erx-text-secondary, #6b7280);margin-left:4px}.erx-cart__clear-btn{padding:6px 12px;border:none;border-radius:var(--erx-border-radius, 8px);background:transparent;color:var(--erx-color-danger, #ef4444);font-size:14px;font-weight:500;cursor:pointer;transition:all 150ms ease}.erx-cart__clear-btn:hover{background:rgba(239, 68, 68, 0.1)}.erx-cart__items{flex:1;overflow-y:auto;padding:var(--erx-space-sm, 8px)}.erx-cart__empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--erx-space-xl, 32px);text-align:center;color:var(--erx-text-tertiary, #9ca3af)}.erx-cart__empty-icon{width:64px;height:64px;margin-bottom:var(--erx-space-md, 16px);opacity:0.5}.erx-cart__empty p{margin:0;font-size:14px}.erx-cart__item{display:flex;gap:var(--erx-space-sm, 12px);padding:var(--erx-space-sm, 12px);border-radius:var(--erx-border-radius, 8px);background:var(--erx-surface-secondary, #f9fafb);margin-bottom:var(--erx-space-xs, 8px)}.erx-cart__item:last-child{margin-bottom:0}.erx-cart__item-image{width:60px;height:60px;flex-shrink:0;border-radius:var(--erx-border-radius-sm, 6px);overflow:hidden;background:var(--erx-surface, #ffffff)}.erx-cart__item-image img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-cart__item-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--erx-text-tertiary, #9ca3af)}.erx-cart__item-placeholder svg{width:24px;height:24px}.erx-cart__item-content{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.erx-cart__item-header{display:flex;align-items:flex-start;justify-content:space-between;gap:8px}.erx-cart__item-name{font-size:14px;font-weight:600;color:var(--erx-text, #111827);line-height:1.3}.erx-cart__item-remove{flex-shrink:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border:none;border-radius:50%;background:transparent;color:var(--erx-text-tertiary, #9ca3af);cursor:pointer;transition:all 150ms ease}.erx-cart__item-remove:hover{background:rgba(239, 68, 68, 0.1);color:var(--erx-color-danger, #ef4444)}.erx-cart__item-remove svg{width:16px;height:16px}.erx-cart__item-meta{display:flex;flex-wrap:wrap;gap:8px;font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-cart__item-notes{font-size:12px;color:var(--erx-text-secondary, #6b7280);font-style:italic}.erx-cart__item-footer{display:flex;align-items:center;justify-content:space-between;margin-top:4px}.erx-cart__item-price{font-size:14px;font-weight:500;color:var(--erx-text, #111827)}.erx-cart__item-discount{margin-left:6px;font-size:12px;color:var(--erx-color-success, #10b981)}.erx-cart__item-qty-label{font-size:14px;color:var(--erx-text-secondary, #6b7280)}.erx-cart__item-qty{display:flex;align-items:center;gap:4px}.erx-cart__qty-btn{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:var(--erx-border-radius-sm, 6px);background:var(--erx-surface, #ffffff);color:var(--erx-text, #111827);font-size:16px;font-weight:500;cursor:pointer;transition:all 150ms ease}.erx-cart__qty-btn:hover:not(:disabled){border-color:var(--erx-color-primary, #667eea);color:var(--erx-color-primary, #667eea)}.erx-cart__qty-btn:disabled{opacity:0.4;cursor:not-allowed}.erx-cart__qty-value{min-width:28px;text-align:center;font-size:14px;font-weight:600;color:var(--erx-text, #111827)}.erx-cart__item-total{font-size:15px;font-weight:700;color:var(--erx-text, #111827);text-align:right;margin-top:4px}.erx-cart__summary{padding:var(--erx-space-md, 16px);border-top:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-cart__summary-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;font-size:14px;color:var(--erx-text-secondary, #6b7280)}.erx-cart__summary-row--discount{color:var(--erx-color-success, #10b981)}.erx-cart__summary-row--total{padding-top:12px;margin-top:8px;border-top:1px solid var(--erx-border-color, #e5e7eb);font-size:18px;font-weight:700;color:var(--erx-text, #111827)}.erx-cart__actions{padding:var(--erx-space-md, 16px);padding-top:0;background:var(--erx-surface-secondary, #f9fafb)}.erx-cart__checkout-btn{width:100%;height:var(--erx-touch-target-lg, 52px);border:none;border-radius:var(--erx-border-radius, 8px);background:var(--erx-color-primary, #667eea);color:white;font-size:16px;font-weight:600;cursor:pointer;transition:all 150ms ease}.erx-cart__checkout-btn:hover:not(:disabled){background:var(--erx-color-primary-dark, #5a6fce)}.erx-cart__checkout-btn:active:not(:disabled){transform:scale(0.98)}.erx-cart__checkout-btn:disabled{opacity:0.5;cursor:not-allowed}.erx-cart--compact .erx-cart__header{padding:var(--erx-space-sm, 12px)}.erx-cart--compact .erx-cart__title{font-size:16px}.erx-cart--compact .erx-cart__item{padding:var(--erx-space-xs, 8px)}.erx-cart--compact .erx-cart__item-image{width:48px;height:48px}.erx-cart--compact .erx-cart__item-name{font-size:13px}.erx-cart--compact .erx-cart__summary{padding:var(--erx-space-sm, 12px)}.erx-cart--compact .erx-cart__actions{padding:var(--erx-space-sm, 12px);padding-top:0}.erx-cart--compact .erx-cart__checkout-btn{height:var(--erx-touch-target, 44px)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-cart,:host(.dark) .erx-cart{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-cart__header,:host(.dark) .erx-cart__header{border-color:var(--erx-border-color)}:host-context(.dark) .erx-cart__title,:host(.dark) .erx-cart__title{color:var(--erx-text)}:host-context(.dark) .erx-cart__item,:host(.dark) .erx-cart__item{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-cart__item-name,:host(.dark) .erx-cart__item-name,:host-context(.dark) .erx-cart__item-price,:host(.dark) .erx-cart__item-price,:host-context(.dark) .erx-cart__item-total,:host(.dark) .erx-cart__item-total{color:var(--erx-text)}:host-context(.dark) .erx-cart__summary,:host(.dark) .erx-cart__summary,:host-context(.dark) .erx-cart__actions,:host(.dark) .erx-cart__actions{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-cart__summary-row--total,:host(.dark) .erx-cart__summary-row--total{color:var(--erx-text);border-color:var(--erx-border-color)}:host-context(.dark) .erx-cart__qty-btn,:host(.dark) .erx-cart__qty-btn{background:var(--erx-surface);border-color:var(--erx-border-color);color:var(--erx-text)}@media (hover: none) and (pointer: coarse){.erx-cart__item-remove{width:32px;height:32px}.erx-cart__qty-btn{width:36px;height:36px}.erx-cart__checkout-btn{height:56px}}",p=class{constructor(r){l(this,r),this.erxItemChange=n(this,"erxItemChange"),this.erxItemRemove=n(this,"erxItemRemove"),this.erxClear=n(this,"erxClear"),this.erxCheckout=n(this,"erxCheckout")}get el(){return m(this)}items=[];taxRate=0;taxLabel="Tax";taxIncluded=!1;currency="$";locale="en-US";showImages=!0;showQuantityControls=!0;showRemoveButton=!0;showClearButton=!0;showSummary=!0;editableNotes=!1;compact=!1;emptyMessage="Your cart is empty";disabled=!1;summary={subtotal:0,discount:0,tax:0,total:0,itemCount:0,lineCount:0};erxItemChange;erxItemRemove;erxClear;erxCheckout;handleItemsChange(){this.calculateSummary()}componentWillLoad(){this.calculateSummary()}async addItem(r){const t=this.items.findIndex(a=>a.productId===r.productId&&a.variant===r.variant);if(t>=0){const c=this.items[t].quantity+r.quantity;this.updateItemQuantity(t,c)}else this.items=[...this.items,r]}async removeItem(r){const t=this.items.find(a=>a.id===r);t&&(this.items=this.items.filter(a=>a.id!==r),this.erxItemRemove.emit({item:t}))}async updateQuantity(r,t){const a=this.items.findIndex(c=>c.id===r);a>=0&&this.updateItemQuantity(a,t)}async clear(){const r=[...this.items];this.items=[],this.erxClear.emit({items:r})}async getSummary(){return this.summary}updateItemQuantity(r,t){const a=this.items[r],c=a.quantity,o=a.maxQuantity??1/0,i=Math.max(1,Math.min(t,o));if(i!==c){const s=[...this.items];s[r]={...a,quantity:i},this.items=s,this.erxItemChange.emit({item:s[r],quantity:i,previousQuantity:c})}}calculateSummary(){let r=0,t=0,a=0;for(const s of this.items){const x=s.price*s.quantity;let d=0;s.discount&&(s.discountType==="percent"?d=x*(s.discount/100):d=s.discount*s.quantity),r+=x,t+=d,a+=s.quantity}const c=r-t;let o=0;this.taxRate>0&&(this.taxIncluded?o=c-c/(1+this.taxRate):o=c*this.taxRate);const i=this.taxIncluded?c:c+o;this.summary={subtotal:r,discount:t,tax:o,total:i,itemCount:a,lineCount:this.items.length}}formatPrice(r){return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.getCurrencyCode()}).format(r)}getCurrencyCode(){return{$:"USD","€":"EUR","£":"GBP","¥":"JPY","₹":"INR"}[this.currency]||"USD"}handleQuantityChange=(r,t)=>{const a=this.items.findIndex(c=>c.id===r.id);a>=0&&this.updateItemQuantity(a,r.quantity+t)};handleRemove=r=>{this.removeItem(r.id)};handleCheckout=()=>{this.erxCheckout.emit({summary:this.summary,items:this.items})};render(){const r=this.items.length===0;return e("div",{key:"e82a3d77a35aa464ab62c8820caba22c10de7465",class:{"erx-cart":!0,"erx-cart--compact":this.compact,"erx-cart--disabled":this.disabled,"erx-cart--empty":r},part:"container"},e("div",{key:"b8a1d8371b31e1e63cabf8bf8c775fa5a6451822",class:"erx-cart__header",part:"header"},e("span",{key:"c0e10e6ecae7288b6b4c39ce6f29df2269dd717d",class:"erx-cart__title"},e("slot",{key:"656ebcd369c53bdc8f60aa874dd4df0c18d8a9f3",name:"title"},"Cart"),!r&&e("span",{key:"8ad26bbbcfaecebce1f7c8d3512c7f908cb23ba7",class:"erx-cart__count"},"(",this.summary.itemCount,")")),this.showClearButton&&!r&&e("button",{key:"51b640db6bf683c5e89fd06c5d6a01e0d5956019",class:"erx-cart__clear-btn",onClick:()=>this.clear(),disabled:this.disabled,type:"button"},"Clear")),e("div",{key:"3d6d51645cd5cffe7ce9d05ef6017d185b041189",class:"erx-cart__items",part:"items"},r?e("div",{class:"erx-cart__empty",part:"empty"},e("slot",{name:"empty"},e("svg",{class:"erx-cart__empty-icon",viewBox:"0 0 24 24",fill:"currentColor"},e("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})),e("p",null,this.emptyMessage))):this.items.map(t=>e("div",{class:"erx-cart__item",part:"item",key:t.id},this.showImages&&e("div",{class:"erx-cart__item-image",part:"item-image"},t.image?e("img",{src:t.image,alt:t.name}):e("div",{class:"erx-cart__item-placeholder"},e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},e("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})))),e("div",{class:"erx-cart__item-content",part:"item-content"},e("div",{class:"erx-cart__item-header"},e("span",{class:"erx-cart__item-name"},t.name),this.showRemoveButton&&e("button",{class:"erx-cart__item-remove",onClick:()=>this.handleRemove(t),disabled:this.disabled,type:"button","aria-label":"Remove item"},e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})))),(t.variant||t.sku)&&e("div",{class:"erx-cart__item-meta"},t.variant&&e("span",null,t.variant),t.sku&&e("span",null,"SKU: ",t.sku)),t.notes&&e("div",{class:"erx-cart__item-notes"},t.notes),e("div",{class:"erx-cart__item-footer"},e("span",{class:"erx-cart__item-price"},this.formatPrice(t.price),t.discount&&e("span",{class:"erx-cart__item-discount"},"-",t.discountType==="percent"?`${t.discount}%`:this.formatPrice(t.discount))),this.showQuantityControls?e("div",{class:"erx-cart__item-qty"},e("button",{class:"erx-cart__qty-btn",onClick:()=>this.handleQuantityChange(t,-1),disabled:this.disabled||t.quantity<=1,type:"button","aria-label":"Decrease quantity"},"−"),e("span",{class:"erx-cart__qty-value"},t.quantity),e("button",{class:"erx-cart__qty-btn",onClick:()=>this.handleQuantityChange(t,1),disabled:this.disabled||t.maxQuantity!==void 0&&t.quantity>=t.maxQuantity,type:"button","aria-label":"Increase quantity"},"+")):e("span",{class:"erx-cart__item-qty-label"},"×",t.quantity)),e("div",{class:"erx-cart__item-total"},this.formatPrice(t.price*t.quantity-(t.discount||0)*(t.discountType==="percent"?t.price*t.quantity/100:t.quantity))))))),this.showSummary&&!r&&e("div",{key:"73d02abd41d92bec9088e1fe0e2ec905a51fe667",class:"erx-cart__summary",part:"summary"},e("div",{key:"47fa5457416f26ef8929fc7eb42ac88a63e1cd36",class:"erx-cart__summary-row"},e("span",{key:"f56c2ef7219c52170b915d79b0382862e1d608ba"},"Subtotal"),e("span",{key:"7ca2996abcdaa133ab739a295ba3c209b8d68cd2"},this.formatPrice(this.summary.subtotal))),this.summary.discount>0&&e("div",{key:"0488139768ef0a692b928e8b29ab309575b01cb6",class:"erx-cart__summary-row erx-cart__summary-row--discount"},e("span",{key:"259aa2a57f37b3525d60fe3109f254340fb686d6"},"Discount"),e("span",{key:"07420e520a3a8370a1dc317d3bb277ec4f80b785"},"-",this.formatPrice(this.summary.discount))),this.taxRate>0&&e("div",{key:"4cfa75b260ecab683f795bdf480fadcea9d88a4e",class:"erx-cart__summary-row"},e("span",{key:"b2659448cec25d775911538d8aea48606cdccddb"},this.taxLabel," (",(this.taxRate*100).toFixed(0),"%)"),e("span",{key:"1d2a02f91e766a9a516095e93491e136180d9a28"},this.formatPrice(this.summary.tax))),e("div",{key:"6bb6a24e7a1886109256b7926af6a2e99e075d5c",class:"erx-cart__summary-row erx-cart__summary-row--total"},e("span",{key:"90bd3a3b1c8c8b60892f42074eab87e64e32cd66"},"Total"),e("span",{key:"627bd152a41230d8f6a007185fa12a8237886ab9"},this.formatPrice(this.summary.total)))),!r&&e("div",{key:"88474ff2011864c841589db7561e2c9c88ecbab8",class:"erx-cart__actions",part:"actions"},e("slot",{key:"9ab888c0ba5589dbe2c8a63da1c378792195b04d",name:"actions"},e("button",{key:"10f4e0b37e7b4f51d04246614b515a0f89e34296",class:"erx-cart__checkout-btn",onClick:this.handleCheckout,disabled:this.disabled,type:"button"},"Checkout"))))}static get watchers(){return{items:[{handleItemsChange:0}],taxRate:[{handleItemsChange:0}],taxIncluded:[{handleItemsChange:0}]}}};p.style=h();export{p as erx_cart};

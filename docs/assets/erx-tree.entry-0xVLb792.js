import{r as c,c as o,h as s}from"./index-DLMfuaWg.js";const l=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-tree{background:var(--erx-surface, #fff);border-radius:8px;border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-tree__node{display:flex;align-items:center;gap:8px;padding:8px;cursor:pointer;transition:background 150ms ease;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-tree__node:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-tree__node--selected{background:rgba(102,126,234,0.1)}.erx-tree__node--disabled{opacity:0.5;cursor:not-allowed}.erx-tree__toggle{width:20px;height:20px;border:none;background:transparent;color:var(--erx-text-secondary, #6b7280);cursor:pointer;font-size:10px;padding:0;display:flex;align-items:center;justify-content:center;flex-shrink:0}.erx-tree__toggle:hover{color:var(--erx-text, #111827)}.erx-tree__toggle-placeholder{width:20px;flex-shrink:0}.erx-tree__checkbox{width:16px;height:16px;margin:0;cursor:pointer;flex-shrink:0}.erx-tree__icon{font-size:16px;flex-shrink:0}.erx-tree__label{font-size:14px;color:var(--erx-text, #111827);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-tree__empty{padding:24px;text-align:center;color:var(--erx-text-tertiary, #9ca3af);font-size:14px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-tree,:host(.dark) .erx-tree{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-tree__label,:host(.dark) .erx-tree__label{color:var(--erx-text)}",n=class{constructor(e){c(this,e),this.erxSelect=o(this,"erxSelect"),this.erxExpand=o(this,"erxExpand")}nodes=[];config={};expandedNodes=new Set;selectedNodes=new Set;erxSelect;erxExpand;componentWillLoad(){this.initializeState(this.nodes)}initializeState(e){e.forEach(t=>{t.expanded&&this.expandedNodes.add(t.id),t.selected&&this.selectedNodes.add(t.id),t.children&&this.initializeState(t.children)})}async expandAll(){const e=t=>t.flatMap(r=>[r.id,...r.children?e(r.children):[]]);this.expandedNodes=new Set(e(this.nodes))}async collapseAll(){this.expandedNodes=new Set}async selectNode(e){if(!this.config.multiSelect)this.selectedNodes=new Set([e]);else{const t=new Set(this.selectedNodes);t.add(e),this.selectedNodes=t}}toggleExpand(e,t){t.stopPropagation();const r=new Set(this.expandedNodes),i=r.has(e.id);i?r.delete(e.id):r.add(e.id),this.expandedNodes=r,this.erxExpand.emit({node:e,expanded:!i})}handleNodeClick(e){if(!e.disabled){if(this.config.expandOnClick&&e.children?.length){const t=document.createEvent("Event");t.initEvent("click",!0,!0),this.toggleExpand(e,t)}if(this.config.selectable!==!1){const t=new Set(this.config.multiSelect?this.selectedNodes:[]);this.selectedNodes.has(e.id)?t.delete(e.id):t.add(e.id),this.selectedNodes=t;const r=this.getSelectedNodes(this.nodes);this.erxSelect.emit({node:e,selected:r})}}}getSelectedNodes(e){const t=[];return e.forEach(r=>{this.selectedNodes.has(r.id)&&t.push(r),r.children&&t.push(...this.getSelectedNodes(r.children))}),t}renderNode(e,t=0){const r=e.children&&e.children.length>0,i=this.expandedNodes.has(e.id),a=this.selectedNodes.has(e.id);return s("div",{class:"erx-tree__node-wrapper",key:e.id},s("div",{class:{"erx-tree__node":!0,"erx-tree__node--selected":a,"erx-tree__node--disabled":!!e.disabled,"erx-tree__node--expandable":!!r},style:{paddingLeft:`${t*20+8}px`},onClick:()=>this.handleNodeClick(e)},r?s("button",{class:"erx-tree__toggle",onClick:d=>this.toggleExpand(e,d)},i?"▼":"▶"):s("span",{class:"erx-tree__toggle-placeholder"}),this.config.showCheckboxes&&s("input",{type:"checkbox",class:"erx-tree__checkbox",checked:a,disabled:e.disabled,onClick:d=>d.stopPropagation(),onChange:()=>this.handleNodeClick(e)}),this.config.showIcons!==!1&&e.icon&&s("span",{class:"erx-tree__icon"},e.icon),s("span",{class:"erx-tree__label"},e.label)),r&&i&&s("div",{class:"erx-tree__children"},e.children.map(d=>this.renderNode(d,t+1))))}render(){return s("div",{key:"0f95934dd3aad7c0c40bca95d3d6a25706a8b1fa",class:"erx-tree",part:"container"},this.nodes.length===0?s("div",{class:"erx-tree__empty"},"No items"):this.nodes.map(e=>this.renderNode(e)))}};n.style=l();export{n as erx_tree};

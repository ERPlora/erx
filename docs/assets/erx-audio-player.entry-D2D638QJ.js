import{r as s,c as i,h as e}from"./index-DLMfuaWg.js";const o=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-ap{display:flex;align-items:center;gap:16px;padding:16px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:12px}.erx-ap--compact{padding:12px;gap:12px}.erx-ap__cover{width:64px;height:64px;flex-shrink:0;border-radius:8px;overflow:hidden}.erx-ap__cover img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.erx-ap--compact .erx-ap__cover{width:48px;height:48px}.erx-ap__main{flex:1;min-width:0;display:flex;flex-direction:column;gap:8px}.erx-ap__info{display:flex;flex-direction:column;gap:2px}.erx-ap__title{font-size:14px;font-weight:600;color:var(--erx-text, #111827);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-ap__artist{font-size:12px;color:var(--erx-text-secondary, #6b7280);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-ap__controls{display:flex;align-items:center;gap:12px}.erx-ap__play{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--erx-color-primary, #667eea);color:#fff;border:none;border-radius:50%;cursor:pointer;transition:all 150ms ease;flex-shrink:0}.erx-ap__play:hover{background:var(--erx-color-primary-dark, #5a67d8);transform:scale(1.05)}.erx-ap__play svg{width:18px;height:18px}.erx-ap--compact .erx-ap__play{width:32px;height:32px}.erx-ap--compact .erx-ap__play svg{width:14px;height:14px}.erx-ap__progress-wrap{flex:1;display:flex;align-items:center;gap:8px;min-width:0}.erx-ap__time{font-size:11px;color:var(--erx-text-tertiary, #9ca3af);min-width:32px}.erx-ap__progress{flex:1;position:relative;height:6px;background:var(--erx-border-color, #e5e7eb);border-radius:3px}.erx-ap__progress-fill{position:absolute;top:0;left:0;height:100%;background:var(--erx-color-primary, #667eea);border-radius:3px}.erx-ap__seek{position:absolute;top:-4px;left:0;width:100%;height:14px;margin:0;background:transparent;cursor:pointer;-webkit-appearance:none}.erx-ap__seek::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;background:var(--erx-color-primary, #667eea);border-radius:50%;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,0.2)}.erx-ap__volume-wrap{display:flex;align-items:center;gap:4px}.erx-ap__btn{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:var(--erx-text-secondary, #6b7280);font-size:14px;cursor:pointer;border-radius:4px}.erx-ap__btn:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-ap__volume{width:60px;height:4px;margin:0;background:var(--erx-border-color, #e5e7eb);border-radius:2px;-webkit-appearance:none;cursor:pointer}.erx-ap__volume::-webkit-slider-thumb{-webkit-appearance:none;width:10px;height:10px;background:var(--erx-color-primary, #667eea);border-radius:50%;cursor:pointer}.erx-ap__speed{padding:4px 8px;background:var(--erx-surface-secondary, #f9fafb);border:none;border-radius:4px;font-size:11px;font-weight:600;color:var(--erx-text-secondary, #6b7280);cursor:pointer;transition:background 150ms}.erx-ap__speed:hover{background:var(--erx-border-color, #e5e7eb)}@media (max-width: 480px){.erx-ap__volume-wrap{display:none}.erx-ap__time{display:none}}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-ap,:host(.dark) .erx-ap{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-ap__title,:host(.dark) .erx-ap__title{color:var(--erx-text)}:host-context(.dark) .erx-ap__artist,:host(.dark) .erx-ap__artist{color:var(--erx-text-secondary)}",d=class{constructor(a){s(this,a),this.erxPlay=i(this,"erxPlay"),this.erxPause=i(this,"erxPause"),this.erxTimeUpdate=i(this,"erxTimeUpdate"),this.erxEnded=i(this,"erxEnded")}src;trackTitle;artist;cover;autoplay=!1;loop=!1;muted=!1;showTime=!0;showVolume=!0;showSpeed=!1;preload="metadata";compact=!1;isPlaying=!1;currentTime=0;duration=0;volume=1;isMuted=!1;playbackRate=1;erxPlay;erxPause;erxTimeUpdate;erxEnded;audioEl;componentDidLoad(){this.isMuted=this.muted}async play(){await this.audioEl?.play()}async pause(){this.audioEl?.pause()}async seek(a){this.audioEl&&(this.audioEl.currentTime=a)}handlePlay=()=>{this.isPlaying=!0,this.erxPlay.emit()};handlePause=()=>{this.isPlaying=!1,this.erxPause.emit()};handleTimeUpdate=()=>{this.audioEl&&(this.currentTime=this.audioEl.currentTime,this.erxTimeUpdate.emit({currentTime:this.currentTime,duration:this.duration}))};handleLoadedMetadata=()=>{this.audioEl&&(this.duration=this.audioEl.duration)};handleEnded=()=>{this.isPlaying=!1,this.erxEnded.emit()};handlePlayPause=()=>{this.isPlaying?this.pause():this.play()};handleSeek=a=>{const r=a.target;this.seek(parseFloat(r.value))};handleVolume=a=>{const r=a.target,t=parseFloat(r.value);this.audioEl&&(this.audioEl.volume=t,this.volume=t,this.isMuted=t===0)};handleMuteToggle=()=>{this.audioEl&&(this.audioEl.muted=!this.audioEl.muted,this.isMuted=this.audioEl.muted)};handleSpeedChange=()=>{const a=[.5,.75,1,1.25,1.5,2],t=(a.indexOf(this.playbackRate)+1)%a.length;this.playbackRate=a[t],this.audioEl&&(this.audioEl.playbackRate=this.playbackRate)};formatTime(a){if(isNaN(a))return"0:00";const r=Math.floor(a/60),t=Math.floor(a%60);return`${r}:${t.toString().padStart(2,"0")}`}render(){const a=this.duration>0?this.currentTime/this.duration*100:0;return e("div",{key:"661f3e45b32f329db6b9a1c6b17e87465b81515b",class:{"erx-ap":!0,"erx-ap--compact":this.compact,"erx-ap--playing":this.isPlaying},part:"container"},e("audio",{key:"5c1bce55cd9def33da6ac0ad0e67036bf58c2ae7",ref:r=>this.audioEl=r,src:this.src,autoplay:this.autoplay,loop:this.loop,muted:this.muted,preload:this.preload,onPlay:this.handlePlay,onPause:this.handlePause,onTimeUpdate:this.handleTimeUpdate,onLoadedMetaData:this.handleLoadedMetadata,onEnded:this.handleEnded}),this.cover&&!this.compact&&e("div",{key:"aa031c7dc152b8a86e6704a016bb991aeb6f4581",class:"erx-ap__cover",part:"cover"},e("img",{key:"c219391889c7181a0a4bf91619caeff3e0900145",src:this.cover,alt:this.trackTitle||"Cover"})),e("div",{key:"c9a4b759ebac13a0c8cec1b61fb341bc86839ee7",class:"erx-ap__main"},(this.trackTitle||this.artist)&&e("div",{key:"498d44b59146e6a0a49414e86d72bbcbfef4f295",class:"erx-ap__info",part:"info"},this.trackTitle&&e("span",{key:"60cd853a8815272dd603270540eae5af254d79c0",class:"erx-ap__title"},this.trackTitle),this.artist&&e("span",{key:"c6fdbeecee6e5feaac30ba80d5c4e332ea804af8",class:"erx-ap__artist"},this.artist)),e("div",{key:"f341b840300aa4d2de514eef632b3c2ef3adada2",class:"erx-ap__controls",part:"controls"},e("button",{key:"8b28010955571ff80ba372bccbd1deecca2bfd1d",type:"button",class:"erx-ap__play",part:"play",onClick:this.handlePlayPause},this.isPlaying?e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},e("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})):e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},e("path",{d:"M8 5v14l11-7z"}))),e("div",{key:"a8b0eafa300f8ea000f49bda937d3541fdf731ea",class:"erx-ap__progress-wrap"},this.showTime&&e("span",{key:"f7bec60a7ba7bd2d710d6570b4742b533dc304ca",class:"erx-ap__time"},this.formatTime(this.currentTime)),e("div",{key:"18b37aace4b885464ebea68830e6789b1e598926",class:"erx-ap__progress",part:"progress"},e("div",{key:"bd19682555ae652bff6391b003c5a18d18578c2f",class:"erx-ap__progress-fill",style:{width:`${a}%`}}),e("input",{key:"babf791b87a2ea22a5c57143009652813680b231",type:"range",class:"erx-ap__seek",min:"0",max:this.duration||0,step:"0.1",value:this.currentTime,onInput:this.handleSeek})),this.showTime&&e("span",{key:"8a4e34de9d0c81f3ce90b6139a306b6e55def5a8",class:"erx-ap__time"},this.formatTime(this.duration))),this.showVolume&&e("div",{key:"86d9dcb4120ae0eabb11a2caaf58cba6d53e7d06",class:"erx-ap__volume-wrap"},e("button",{key:"91c3c99b4a4ebbedc9e95e427bf141d0d8c1feff",type:"button",class:"erx-ap__btn",onClick:this.handleMuteToggle},this.isMuted?"ðŸ”‡":"ðŸ”Š"),e("input",{key:"ea7d433f6faabc59fcfdcb034585f37dc273f9a7",type:"range",class:"erx-ap__volume",min:"0",max:"1",step:"0.1",value:this.isMuted?0:this.volume,onInput:this.handleVolume})),this.showSpeed&&e("button",{key:"cf730cb6905460818f8dfb9ef4fbd32a55d72910",type:"button",class:"erx-ap__speed",part:"speed",onClick:this.handleSpeedChange},this.playbackRate,"x"))))}};d.style=o();export{d as erx_audio_player};

import{r as a,c as r,g as o,h as e}from"./index-DLMfuaWg.js";const n=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-vp{position:relative;background:#000;border-radius:8px;overflow:hidden}.erx-vp__video{display:block;width:100%;height:auto}.erx-vp--fullscreen{border-radius:0}.erx-vp--fullscreen .erx-vp__video{height:100vh;-o-object-fit:contain;object-fit:contain}.erx-vp__play-overlay{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:72px;height:72px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);color:#fff;border:none;border-radius:50%;cursor:pointer;transition:all 200ms ease}.erx-vp__play-overlay:hover{background:rgba(0,0,0,0.8);transform:translate(-50%, -50%) scale(1.1)}.erx-vp__play-overlay svg{width:32px;height:32px;margin-left:4px}.erx-vp__controls{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:center;gap:12px;padding:12px 16px;background:linear-gradient(transparent, rgba(0,0,0,0.8));opacity:0;transition:opacity 200ms ease}.erx-vp__controls--visible{opacity:1}.erx-vp__btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:#fff;font-size:16px;cursor:pointer;border-radius:4px;transition:background 150ms}.erx-vp__btn:hover{background:rgba(255,255,255,0.2)}.erx-vp__time{font-size:12px;color:#fff;min-width:40px}.erx-vp__progress{flex:1;position:relative;height:4px;background:rgba(255,255,255,0.3);border-radius:2px}.erx-vp__buffered{position:absolute;top:0;left:0;height:100%;background:rgba(255,255,255,0.5);border-radius:2px}.erx-vp__seek{position:absolute;top:-4px;left:0;width:100%;height:12px;margin:0;background:transparent;cursor:pointer;-webkit-appearance:none}.erx-vp__seek::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#fff;border-radius:50%;cursor:pointer}.erx-vp__seek::-webkit-slider-runnable-track{height:4px;background:var(--erx-color-primary, #667eea);border-radius:2px}.erx-vp__volume{width:60px;height:4px;margin:0;background:rgba(255,255,255,0.3);border-radius:2px;-webkit-appearance:none;cursor:pointer}.erx-vp__volume::-webkit-slider-thumb{-webkit-appearance:none;width:10px;height:10px;background:#fff;border-radius:50%;cursor:pointer}@media (max-width: 480px){.erx-vp__volume{display:none}.erx-vp__controls{gap:8px;padding:8px 12px}}",l=class{constructor(t){a(this,t),this.erxPlay=r(this,"erxPlay"),this.erxPause=r(this,"erxPause"),this.erxTimeUpdate=r(this,"erxTimeUpdate"),this.erxEnded=r(this,"erxEnded")}get el(){return o(this)}src;sources=[];poster;autoplay=!1;loop=!1;muted=!1;controls=!0;preload="metadata";pip=!0;fullscreen=!0;isPlaying=!1;currentTime=0;duration=0;volume=1;isMuted=!1;isFullscreen=!1;showControls=!0;buffered=0;erxPlay;erxPause;erxTimeUpdate;erxEnded;videoEl;controlsTimeout;componentDidLoad(){this.isMuted=this.muted,this.videoEl&&(this.volume=this.videoEl.volume)}async play(){await this.videoEl?.play()}async pause(){this.videoEl?.pause()}async seek(t){this.videoEl&&(this.videoEl.currentTime=t)}async toggleFullscreen(){this.isFullscreen?await document.exitFullscreen():await this.el.requestFullscreen(),this.isFullscreen=!this.isFullscreen}handlePlay=()=>{this.isPlaying=!0,this.erxPlay.emit()};handlePause=()=>{this.isPlaying=!1,this.erxPause.emit()};handleTimeUpdate=()=>{this.videoEl&&(this.currentTime=this.videoEl.currentTime,this.erxTimeUpdate.emit({currentTime:this.currentTime,duration:this.duration}))};handleLoadedMetadata=()=>{this.videoEl&&(this.duration=this.videoEl.duration)};handleProgress=()=>{this.videoEl&&this.videoEl.buffered.length>0&&(this.buffered=this.videoEl.buffered.end(this.videoEl.buffered.length-1))};handleEnded=()=>{this.isPlaying=!1,this.erxEnded.emit()};handlePlayPause=()=>{this.isPlaying?this.pause():this.play()};handleSeek=t=>{const i=t.target,s=parseFloat(i.value);this.seek(s)};handleVolume=t=>{const i=t.target,s=parseFloat(i.value);this.videoEl&&(this.videoEl.volume=s,this.volume=s,this.isMuted=s===0)};handleMuteToggle=()=>{this.videoEl&&(this.videoEl.muted=!this.videoEl.muted,this.isMuted=this.videoEl.muted)};handleMouseMove=()=>{this.showControls=!0,this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.controlsTimeout=window.setTimeout(()=>{this.isPlaying&&(this.showControls=!1)},3e3)};formatTime(t){const i=Math.floor(t/60),s=Math.floor(t%60);return`${i}:${s.toString().padStart(2,"0")}`}render(){const t=this.src||(this.sources.length>0?this.sources[0].src:"");return e("div",{key:"2acaccd1be69ea4fe91e8499ba02868cf435e2fb",class:{"erx-vp":!0,"erx-vp--playing":this.isPlaying,"erx-vp--fullscreen":this.isFullscreen},part:"container",onMouseMove:this.handleMouseMove,onMouseLeave:()=>this.isPlaying&&(this.showControls=!1)},e("video",{key:"292b793288e5bf8f96480884ee4fc6b69cf599cf",ref:i=>this.videoEl=i,class:"erx-vp__video",part:"video",src:t,poster:this.poster,autoplay:this.autoplay,loop:this.loop,muted:this.muted,preload:this.preload,onClick:this.handlePlayPause,onPlay:this.handlePlay,onPause:this.handlePause,onTimeUpdate:this.handleTimeUpdate,onLoadedMetaData:this.handleLoadedMetadata,onProgress:this.handleProgress,onEnded:this.handleEnded},this.sources.map(i=>e("source",{src:i.src,type:i.type}))),!this.isPlaying&&e("button",{key:"3a8f627e58e9ed7bbc5b44386db89dd2a442a685",type:"button",class:"erx-vp__play-overlay",part:"play-overlay",onClick:this.handlePlayPause},e("svg",{key:"e67f727cb64a3e4c7ad22749c70f21798a9867ac",viewBox:"0 0 24 24",fill:"currentColor"},e("path",{key:"4c19b458cc3bd0a42824bae9de70222a19f5f456",d:"M8 5v14l11-7z"}))),this.controls&&e("div",{key:"44ee14510f801f72b48900d99db7eee69db2311a",class:{"erx-vp__controls":!0,"erx-vp__controls--visible":this.showControls||!this.isPlaying},part:"controls"},e("button",{key:"dba3510136b91589dbd6bf0fdedef11c0f4cae34",type:"button",class:"erx-vp__btn",onClick:this.handlePlayPause},this.isPlaying?"â¸":"â–¶"),e("span",{key:"aeff647ac2874f7261687a2da1b2034914bd0e9d",class:"erx-vp__time"},this.formatTime(this.currentTime)),e("div",{key:"f44dbe4d998d0152c3a4153e57f083d53d124df9",class:"erx-vp__progress"},e("div",{key:"637225303c1e7b7713a754dbd25ec0d9b6095784",class:"erx-vp__buffered",style:{width:`${this.buffered/this.duration*100}%`}}),e("input",{key:"f357637518b4bef71bde01a35d1217a18112572a",type:"range",class:"erx-vp__seek",min:"0",max:this.duration||0,step:"0.1",value:this.currentTime,onInput:this.handleSeek})),e("span",{key:"c1c41bb932c50a4aabebe885c298707bc43ff5b8",class:"erx-vp__time"},this.formatTime(this.duration)),e("button",{key:"d18fb4e5af835c52e649cb1b398de798191c0f1c",type:"button",class:"erx-vp__btn",onClick:this.handleMuteToggle},this.isMuted?"ðŸ”‡":"ðŸ”Š"),e("input",{key:"7f106ebfc1d7b816d239831825e1ea8be595f788",type:"range",class:"erx-vp__volume",min:"0",max:"1",step:"0.1",value:this.isMuted?0:this.volume,onInput:this.handleVolume}),this.fullscreen&&e("button",{key:"edf1457c824bcc93b41b072a75a9fc47ba03e7eb",type:"button",class:"erx-vp__btn",onClick:()=>this.toggleFullscreen()},this.isFullscreen?"âŠ™":"â›¶")))}};l.style=n();export{l as erx_video_player};

import{r as s,c as r,g as o,h as t}from"./index-DLMfuaWg.js";const n=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-vlist{height:100%;overflow-y:auto;overflow-x:hidden}.erx-vlist__spacer{position:relative}.erx-vlist__content{position:absolute;top:0;left:0;right:0}.erx-vlist__item{display:flex;align-items:center;box-sizing:border-box;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-vlist__item-default{padding:0 16px;font-size:14px;color:var(--erx-text, #111827)}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}",a=class{constructor(e){s(this,e),this.erxScroll=r(this,"erxScroll")}get el(){return o(this)}items=[];config={itemHeight:48};scrollTop=0;containerHeight=0;containerRef;erxScroll;componentDidLoad(){if(this.updateContainerHeight(),typeof ResizeObserver<"u"){const e=new ResizeObserver(()=>this.updateContainerHeight());this.containerRef&&e.observe(this.containerRef)}}async scrollToIndex(e){this.containerRef&&(this.containerRef.scrollTop=e*this.config.itemHeight)}async scrollToTop(){this.containerRef&&(this.containerRef.scrollTop=0)}updateContainerHeight(){this.containerRef&&(this.containerHeight=this.containerRef.clientHeight)}get overscan(){return this.config.overscan??3}get totalHeight(){return this.items.length*this.config.itemHeight}get startIndex(){return Math.max(0,Math.floor(this.scrollTop/this.config.itemHeight)-this.overscan)}get endIndex(){const e=Math.ceil(this.containerHeight/this.config.itemHeight);return Math.min(this.items.length,this.startIndex+e+this.overscan*2)}get visibleItems(){return this.items.slice(this.startIndex,this.endIndex).map((e,i)=>({item:e,index:this.startIndex+i}))}handleScroll=e=>{const i=e.target;this.scrollTop=i.scrollTop,this.erxScroll.emit({scrollTop:this.scrollTop,startIndex:this.startIndex,endIndex:this.endIndex})};render(){return t("div",{key:"2a4659a9803b9029d45ed7c34bfdeaa5f8f41bd9",class:"erx-vlist",ref:e=>this.containerRef=e,onScroll:this.handleScroll,part:"container"},t("div",{key:"076b1bcd6c52f397d4cebb850f0d87fb4b970ad0",class:"erx-vlist__spacer",style:{height:`${this.totalHeight}px`}},t("div",{key:"c6d99f4e1fa902f9421d3a3054ced98fefed79a0",class:"erx-vlist__content",style:{transform:`translateY(${this.startIndex*this.config.itemHeight}px)`}},this.visibleItems.map(({item:e,index:i})=>t("div",{class:"erx-vlist__item",key:e.id,style:{height:`${this.config.itemHeight}px`},"data-index":i,part:"item"},t("slot",{name:`item-${e.id}`},t("span",{class:"erx-vlist__item-default"},e.id)))))))}};a.style=n();export{a as erx_virtual_list};

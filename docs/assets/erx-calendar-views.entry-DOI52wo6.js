import{r as n,c,h as t}from"./index-DLMfuaWg.js";const d=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-calv{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-calv--disabled{opacity:0.6;pointer-events:none}.erx-calv__toolbar{display:flex;align-items:center;gap:8px;padding:12px 16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-calv__nav-btn{width:32px;height:32px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text, #111827);font-size:14px;cursor:pointer}.erx-calv__today-btn{height:32px;padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:13px;font-weight:500;cursor:pointer}.erx-calv__week,.erx-calv__day{display:flex;flex-direction:column}.erx-calv__header{display:flex;border-bottom:1px solid var(--erx-border-color, #e5e7eb);position:sticky;top:0;background:var(--erx-surface, #fff);z-index:10}.erx-calv__time-gutter{width:60px;min-width:60px;padding:8px;text-align:right;font-size:11px;color:var(--erx-text-secondary, #6b7280);border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__day-header{flex:1;padding:12px 8px;text-align:center;font-size:13px;font-weight:500;color:var(--erx-text, #111827);border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__day-header:last-child{border-right:none}.erx-calv__day-header--today{background:rgba(102,126,234,0.05);color:var(--erx-color-primary, #667eea);font-weight:600}.erx-calv__all-day{display:flex;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__all-day-label{font-size:10px;text-transform:uppercase}.erx-calv__all-day-cell{flex:1;padding:4px;border-right:1px solid var(--erx-border-color, #e5e7eb);min-height:40px;display:flex;flex-wrap:wrap;gap:4px;align-items:flex-start}.erx-calv__all-day-cell:last-child{border-right:none}.erx-calv__all-day-event{padding:2px 6px;border-radius:4px;font-size:11px;color:white;cursor:pointer}.erx-calv__body{display:flex;flex:1;overflow-y:auto;max-height:600px}.erx-calv__time-column{width:60px;min-width:60px;border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__time-slot{position:relative;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__time-label{position:absolute;top:-8px;right:8px;font-size:10px;color:var(--erx-text-tertiary, #9ca3af);background:var(--erx-surface, #fff);padding:0 4px}.erx-calv__days-grid{display:flex;flex:1}.erx-calv__day-column{flex:1;position:relative;border-right:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__day-column:last-child{border-right:none}.erx-calv__day-column--today{background:rgba(102,126,234,0.02)}.erx-calv__hour-cell{border-bottom:1px solid var(--erx-border-color, #e5e7eb);cursor:pointer}.erx-calv__hour-cell:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-calv__half-hour{height:50%;border-bottom:1px dashed var(--erx-border-color, #e5e7eb)}.erx-calv__events{position:absolute;top:0;left:4px;right:4px;pointer-events:none}.erx-calv__event{position:absolute;left:0;right:0;padding:4px 6px;border-radius:4px;color:white;font-size:11px;overflow:hidden;cursor:pointer;pointer-events:auto;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.erx-calv__event:hover{filter:brightness(1.1)}.erx-calv__event--day{left:0;right:0}.erx-calv__event-time{display:block;font-size:10px;opacity:0.9}.erx-calv__event-title{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-calv__event-location{display:block;font-size:10px;opacity:0.8;margin-top:2px}.erx-calv__current-time{position:absolute;left:0;right:0;z-index:5;pointer-events:none;display:flex;align-items:center}.erx-calv__current-time-dot{width:10px;height:10px;border-radius:50%;background:var(--erx-color-danger, #ef4444);margin-left:-5px}.erx-calv__current-time-line{flex:1;height:2px;background:var(--erx-color-danger, #ef4444)}.erx-calv__day-header-single{padding:16px;text-align:center;font-size:18px;font-weight:600;color:var(--erx-text, #111827);border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-calv__all-day-single{padding:8px 16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb);display:flex;flex-wrap:wrap;gap:8px}.erx-calv__day-body{display:flex;flex:1;overflow-y:auto;max-height:600px}.erx-calv__day-content{flex:1;position:relative}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-calv,:host(.dark) .erx-calv{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-calv__toolbar,:host(.dark) .erx-calv__toolbar{background:var(--erx-surface-secondary)}:host-context(.dark) .erx-calv__day-header,:host(.dark) .erx-calv__day-header{color:var(--erx-text)}",x=class{constructor(a){n(this,a),this.erxSelect=c(this,"erxSelect"),this.erxEventSelect=c(this,"erxEventSelect")}view="week";date=new Date;events=[];startHour=8;endHour=20;slotDuration=30;hourHeight=60;locale="en-US";disabled=!1;currentDate=new Date;erxSelect;erxEventSelect;componentWillLoad(){this.currentDate=new Date(this.date)}getTimeSlots(){const a=[];for(let r=this.startHour;r<=this.endHour;r++)for(let o=0;o<60;o+=this.slotDuration){const l=`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;a.push({hour:r,minute:o,label:l})}return a}getWeekDays(){const a=[],r=new Date(this.currentDate),o=r.getDay();r.setDate(r.getDate()-o);for(let l=0;l<7;l++){const e=new Date(r);e.setDate(r.getDate()+l);const i=this.getEventsForDate(e);a.push({date:e,isToday:this.isToday(e),events:i.filter(s=>!s.allDay),allDayEvents:i.filter(s=>s.allDay)})}return a}getEventsForDate(a){return this.events.filter(r=>new Date(r.start).toDateString()===a.toDateString())}isToday(a){return a.toDateString()===new Date().toDateString()}getEventPosition(a){const r=new Date(a.start),o=a.end?new Date(a.end):new Date(r.getTime()+3600*1e3),l=(r.getHours()-this.startHour)*60+r.getMinutes(),e=(o.getHours()-this.startHour)*60+o.getMinutes(),i=l/60*this.hourHeight,s=Math.max((e-l)/60*this.hourHeight,20);return{top:i,height:s}}handleSlotClick(a,r,o){this.erxSelect.emit({date:a,time:{hour:r,minute:o}})}handleEventClick(a,r){r.stopPropagation(),this.erxEventSelect.emit({event:a})}navigate(a){const r=new Date(this.currentDate);this.view==="week"?r.setDate(r.getDate()+(a==="next"?7:-7)):this.view==="day"&&r.setDate(r.getDate()+(a==="next"?1:-1)),this.currentDate=r}formatDayHeader(a){return a.toLocaleDateString(this.locale,{weekday:"short",day:"numeric"})}renderWeekView(){const a=this.getTimeSlots(),r=this.getWeekDays(),o=r.some(l=>l.allDayEvents.length>0);return t("div",{class:"erx-calv__week",part:"week"},t("div",{class:"erx-calv__header"},t("div",{class:"erx-calv__time-gutter"}),r.map(l=>t("div",{class:{"erx-calv__day-header":!0,"erx-calv__day-header--today":l.isToday},key:l.date.toISOString()},this.formatDayHeader(l.date)))),o&&t("div",{class:"erx-calv__all-day"},t("div",{class:"erx-calv__time-gutter"},t("span",{class:"erx-calv__all-day-label"},"All day")),r.map(l=>t("div",{class:"erx-calv__all-day-cell",key:l.date.toISOString()},l.allDayEvents.map(e=>t("div",{class:"erx-calv__all-day-event",style:{background:e.color||"var(--erx-color-primary, #667eea)"},key:e.id,onClick:i=>this.handleEventClick(e,i)},e.title))))),t("div",{class:"erx-calv__body"},t("div",{class:"erx-calv__time-column"},a.filter(l=>l.minute===0).map(l=>t("div",{class:"erx-calv__time-slot",style:{height:`${this.hourHeight}px`},key:l.label},t("span",{class:"erx-calv__time-label"},l.label)))),t("div",{class:"erx-calv__days-grid"},r.map(l=>t("div",{class:{"erx-calv__day-column":!0,"erx-calv__day-column--today":l.isToday},key:l.date.toISOString()},a.filter(e=>e.minute===0).map(e=>t("div",{class:"erx-calv__hour-cell",style:{height:`${this.hourHeight}px`},key:e.label,onClick:()=>this.handleSlotClick(l.date,e.hour,e.minute)},t("div",{class:"erx-calv__half-hour"}))),t("div",{class:"erx-calv__events"},l.events.map(e=>{const i=this.getEventPosition(e);return t("div",{class:"erx-calv__event",style:{top:`${i.top}px`,height:`${i.height}px`,background:e.color||"var(--erx-color-primary, #667eea)"},key:e.id,onClick:s=>this.handleEventClick(e,s)},t("span",{class:"erx-calv__event-time"},new Date(e.start).toLocaleTimeString(this.locale,{hour:"2-digit",minute:"2-digit"})),t("span",{class:"erx-calv__event-title"},e.title))})),l.isToday&&this.renderCurrentTimeLine())))))}renderDayView(){const a=this.getTimeSlots(),r=this.getEventsForDate(this.currentDate),o=r.filter(e=>!e.allDay),l=r.filter(e=>e.allDay);return t("div",{class:"erx-calv__day",part:"day"},t("div",{class:"erx-calv__day-header-single"},this.currentDate.toLocaleDateString(this.locale,{weekday:"long",month:"long",day:"numeric"})),l.length>0&&t("div",{class:"erx-calv__all-day-single"},l.map(e=>t("div",{class:"erx-calv__all-day-event",style:{background:e.color||"var(--erx-color-primary, #667eea)"},key:e.id,onClick:i=>this.handleEventClick(e,i)},e.title))),t("div",{class:"erx-calv__day-body"},t("div",{class:"erx-calv__time-column"},a.filter(e=>e.minute===0).map(e=>t("div",{class:"erx-calv__time-slot",style:{height:`${this.hourHeight}px`},key:e.label},t("span",{class:"erx-calv__time-label"},e.label)))),t("div",{class:"erx-calv__day-content"},a.filter(e=>e.minute===0).map(e=>t("div",{class:"erx-calv__hour-cell",style:{height:`${this.hourHeight}px`},key:e.label,onClick:()=>this.handleSlotClick(this.currentDate,e.hour,e.minute)},t("div",{class:"erx-calv__half-hour"}))),t("div",{class:"erx-calv__events"},o.map(e=>{const i=this.getEventPosition(e);return t("div",{class:"erx-calv__event erx-calv__event--day",style:{top:`${i.top}px`,height:`${i.height}px`,background:e.color||"var(--erx-color-primary, #667eea)"},key:e.id,onClick:s=>this.handleEventClick(e,s)},t("span",{class:"erx-calv__event-time"},new Date(e.start).toLocaleTimeString(this.locale,{hour:"2-digit",minute:"2-digit"})),t("span",{class:"erx-calv__event-title"},e.title),e.location&&t("span",{class:"erx-calv__event-location"},e.location))})),this.isToday(this.currentDate)&&this.renderCurrentTimeLine())))}renderCurrentTimeLine(){const a=new Date,o=((a.getHours()-this.startHour)*60+a.getMinutes())/60*this.hourHeight;return o<0||o>(this.endHour-this.startHour)*this.hourHeight?null:t("div",{class:"erx-calv__current-time",style:{top:`${o}px`}},t("div",{class:"erx-calv__current-time-dot"}),t("div",{class:"erx-calv__current-time-line"}))}render(){return t("div",{key:"43e0caaf394d14cafff0f5fb3a937d57ed24cabb",class:{"erx-calv":!0,"erx-calv--disabled":this.disabled},part:"container"},t("div",{key:"2a67c052a0fca42e93ad9221db340e1883b9c0b4",class:"erx-calv__toolbar",part:"toolbar"},t("button",{key:"8688b2925ba110cbdaf14d477de0b2f0cda713b5",class:"erx-calv__nav-btn",onClick:()=>this.navigate("prev")},"←"),t("button",{key:"1e0f1b8e778d1cce918879c9b8c2e8b0a60407f0",class:"erx-calv__nav-btn",onClick:()=>this.navigate("next")},"→"),t("button",{key:"5a3619e43039439d81aa385f2ccd1dec27c6f6b5",class:"erx-calv__today-btn",onClick:()=>{this.currentDate=new Date}},"Today")),this.view==="week"&&this.renderWeekView(),this.view==="day"&&this.renderDayView())}};x.style=d();export{x as erx_calendar_views};

import{r as i,c as n,g as l,h as r}from"./index-DLMfuaWg.js";const x=()=>":host{font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-cmd__backdrop{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0.5);display:flex;align-items:flex-start;justify-content:center;padding-top:15vh}.erx-cmd{width:100%;max-width:560px;background:var(--erx-surface, #fff);border-radius:12px;box-shadow:0 16px 48px rgba(0,0,0,0.2);overflow:hidden}.erx-cmd__header{display:flex;align-items:center;gap:12px;padding:16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-cmd__search-icon{font-size:18px;color:var(--erx-text-tertiary, #9ca3af)}.erx-cmd__input{flex:1;border:none;background:transparent;font-size:16px;color:var(--erx-text, #111827);outline:none}.erx-cmd__input::-moz-placeholder{color:var(--erx-text-tertiary, #9ca3af)}.erx-cmd__input::placeholder{color:var(--erx-text-tertiary, #9ca3af)}.erx-cmd__shortcut{padding:4px 8px;background:var(--erx-surface-secondary, #f9fafb);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;font-size:12px;font-family:inherit;color:var(--erx-text-tertiary, #9ca3af)}.erx-cmd__results{max-height:400px;overflow-y:auto}.erx-cmd__group{padding:8px 0}.erx-cmd__group-title{padding:8px 16px;font-size:11px;font-weight:600;color:var(--erx-text-tertiary, #9ca3af);text-transform:uppercase;letter-spacing:0.5px}.erx-cmd__item{display:flex;align-items:center;gap:12px;width:100%;padding:12px 16px;border:none;background:transparent;text-align:left;cursor:pointer;transition:background 150ms ease}.erx-cmd__item:hover:not(:disabled),.erx-cmd__item--focused{background:var(--erx-surface-secondary, #f9fafb)}.erx-cmd__item--disabled{opacity:0.5;cursor:not-allowed}.erx-cmd__item-icon{font-size:18px;width:24px;text-align:center;flex-shrink:0}.erx-cmd__item-content{flex:1;min-width:0}.erx-cmd__item-label{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827)}.erx-cmd__item-desc{display:block;font-size:12px;color:var(--erx-text-secondary, #6b7280);margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.erx-cmd__item-shortcut{padding:4px 8px;background:var(--erx-surface-secondary, #f9fafb);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:4px;font-size:11px;font-family:inherit;color:var(--erx-text-tertiary, #9ca3af);flex-shrink:0}.erx-cmd__item-recent{padding:2px 6px;background:var(--erx-color-primary, #667eea);color:white;border-radius:4px;font-size:10px;font-weight:600;flex-shrink:0}.erx-cmd__empty{padding:32px 16px;text-align:center;color:var(--erx-text-tertiary, #9ca3af);font-size:14px}.erx-cmd__footer{display:flex;align-items:center;gap:16px;padding:12px 16px;border-top:1px solid var(--erx-border-color, #e5e7eb);background:var(--erx-surface-secondary, #f9fafb)}.erx-cmd__hint{font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-cmd__hint kbd{display:inline-block;padding:2px 6px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:4px;font-size:11px;font-family:inherit;margin-right:4px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-cmd,:host(.dark) .erx-cmd{background:var(--erx-surface)}:host-context(.dark) .erx-cmd__input,:host(.dark) .erx-cmd__input{color:var(--erx-text)}:host-context(.dark) .erx-cmd__item-label,:host(.dark) .erx-cmd__item-label{color:var(--erx-text)}:host-context(.dark) .erx-cmd__shortcut,:host(.dark) .erx-cmd__shortcut{background:var(--erx-surface-secondary);border-color:var(--erx-border-color)}:host-context(.dark) .erx-cmd__footer,:host(.dark) .erx-cmd__footer{background:var(--erx-surface-secondary);border-color:var(--erx-border-color)}",p=class{constructor(e){i(this,e),this.erxSelect=n(this,"erxSelect"),this.erxOpenChange=n(this,"erxOpenChange"),this.erxSearch=n(this,"erxSearch")}get el(){return l(this)}items=[];placeholder="Type a command or search...";shortcutHint="âŒ˜K";maxResults=10;showRecent=!0;emptyMessage="No results found";open=!1;disabled=!1;erxSelect;erxOpenChange;erxSearch;query="";focusedIndex=0;inputEl;handleOpenChange(e){this.erxOpenChange.emit({open:e}),e&&(this.query="",this.focusedIndex=0,setTimeout(()=>this.inputEl?.focus(),50))}handleGlobalKeyDown(e){(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),this.open=!this.open),e.key==="Escape"&&this.open&&(e.preventDefault(),this.open=!1)}async openPalette(){this.disabled||(this.open=!0)}async closePalette(){this.open=!1}async togglePalette(){this.disabled||(this.open=!this.open)}get filteredItems(){let e=this.items;if(this.query){const t=this.query.toLowerCase();e=e.filter(s=>{const c=s.label.toLowerCase().includes(t),a=s.description?.toLowerCase().includes(t),o=s.keywords?.some(d=>d.toLowerCase().includes(t));return c||a||o})}else this.showRecent&&(e=[...e].sort((t,s)=>t.recent&&!s.recent?-1:!t.recent&&s.recent?1:0));return e.slice(0,this.maxResults)}get groupedItems(){const e=new Map;return this.filteredItems.forEach(t=>{const s=t.category||"Commands";e.has(s)||e.set(s,[]),e.get(s).push(t)}),e}handleInput=e=>{const t=e.target;this.query=t.value,this.focusedIndex=0,this.erxSearch.emit({query:this.query})};handleKeyDown=e=>{const t=this.filteredItems;switch(e.key){case"ArrowDown":e.preventDefault(),this.focusedIndex=(this.focusedIndex+1)%t.length;break;case"ArrowUp":e.preventDefault(),this.focusedIndex=this.focusedIndex<=0?t.length-1:this.focusedIndex-1;break;case"Enter":e.preventDefault(),t[this.focusedIndex]&&this.selectItem(t[this.focusedIndex]);break}};handleBackdropClick=()=>{this.open=!1};selectItem(e){e.disabled||(this.erxSelect.emit({item:e,query:this.query}),this.open=!1)}getFlatIndex(e){return this.filteredItems.indexOf(e)}render(){if(!this.open)return null;const e=this.groupedItems,t=this.filteredItems.length>0;return r("div",{class:"erx-cmd__backdrop",onClick:this.handleBackdropClick,part:"backdrop"},r("div",{class:"erx-cmd",onClick:s=>s.stopPropagation(),part:"container"},r("div",{class:"erx-cmd__header",part:"header"},r("span",{class:"erx-cmd__search-icon"},"ðŸ”"),r("input",{type:"text",class:"erx-cmd__input",ref:s=>this.inputEl=s,value:this.query,placeholder:this.placeholder,onInput:this.handleInput,onKeyDown:this.handleKeyDown,part:"input"}),r("kbd",{class:"erx-cmd__shortcut"},this.shortcutHint)),r("div",{class:"erx-cmd__results",part:"results"},t?Array.from(e.entries()).map(([s,c])=>r("div",{class:"erx-cmd__group",part:"group"},r("div",{class:"erx-cmd__group-title",part:"group-title"},s),c.map(a=>{const o=this.getFlatIndex(a);return r("button",{class:{"erx-cmd__item":!0,"erx-cmd__item--focused":o===this.focusedIndex,"erx-cmd__item--disabled":!!a.disabled,"erx-cmd__item--recent":!!a.recent},onClick:()=>this.selectItem(a),onMouseEnter:()=>this.focusedIndex=o,disabled:a.disabled,part:"item"},a.icon&&r("span",{class:"erx-cmd__item-icon"},a.icon),r("div",{class:"erx-cmd__item-content"},r("span",{class:"erx-cmd__item-label"},a.label),a.description&&r("span",{class:"erx-cmd__item-desc"},a.description)),a.shortcut&&r("kbd",{class:"erx-cmd__item-shortcut"},a.shortcut),a.recent&&r("span",{class:"erx-cmd__item-recent"},"Recent"))}))):r("div",{class:"erx-cmd__empty",part:"empty"},this.emptyMessage)),r("div",{class:"erx-cmd__footer",part:"footer"},r("span",{class:"erx-cmd__hint"},r("kbd",null,"â†‘â†“")," Navigate"),r("span",{class:"erx-cmd__hint"},r("kbd",null,"â†µ")," Select"),r("span",{class:"erx-cmd__hint"},r("kbd",null,"esc")," Close"))))}static get watchers(){return{open:[{handleOpenChange:0}]}}};p.style=x();export{p as erx_command};

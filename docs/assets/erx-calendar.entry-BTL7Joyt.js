import{r as h,c as x,h as r}from"./index-DLMfuaWg.js";const f=()=>":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-cal{background:var(--erx-surface, #fff);border-radius:12px;border:1px solid var(--erx-border-color, #e5e7eb);overflow:hidden}.erx-cal--disabled{opacity:0.6;pointer-events:none}.erx-cal__header{display:flex;align-items:center;gap:8px;padding:12px 16px;border-bottom:1px solid var(--erx-border-color, #e5e7eb)}.erx-cal__nav-btn{width:32px;height:32px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text, #111827);font-size:14px;cursor:pointer;transition:all 150ms ease}.erx-cal__nav-btn:hover{background:var(--erx-surface-tertiary, #f3f4f6)}.erx-cal__title{flex:1;text-align:center}.erx-cal__month-year{font-size:16px;font-weight:600;color:var(--erx-text, #111827)}.erx-cal__today-btn{height:32px;padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:13px;font-weight:500;cursor:pointer}.erx-cal__today-btn:hover{background:var(--erx-surface-tertiary, #f3f4f6)}.erx-cal__view-switcher{display:flex;gap:4px}.erx-cal__view-btn{height:32px;padding:0 12px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);color:var(--erx-text-secondary, #6b7280);font-size:12px;font-weight:500;cursor:pointer}.erx-cal__view-btn--active{background:var(--erx-color-primary, #667eea);border-color:var(--erx-color-primary, #667eea);color:white}.erx-cal__body{padding:12px}.erx-cal__weekdays{display:grid;grid-template-columns:repeat(7, 1fr);margin-bottom:8px}.erx-cal__weekday{text-align:center;font-size:12px;font-weight:600;color:var(--erx-text-secondary, #6b7280);padding:8px 0}.erx-cal__weeks{display:flex;flex-direction:column;gap:4px}.erx-cal__week{display:grid;grid-template-columns:repeat(7, 1fr);gap:4px}.erx-cal__day{min-height:80px;padding:4px;border-radius:6px;cursor:pointer;transition:all 150ms ease;background:var(--erx-surface, #fff);border:1px solid transparent}.erx-cal__day:hover{background:var(--erx-surface-secondary, #f9fafb)}.erx-cal__day--other-month{opacity:0.4}.erx-cal__day--today{background:rgba(102,126,234,0.05);border-color:var(--erx-color-primary, #667eea)}.erx-cal__day--selected{background:rgba(102,126,234,0.1);border-color:var(--erx-color-primary, #667eea)}.erx-cal__day-number{display:flex;align-items:center;justify-content:center;width:28px;height:28px;font-size:13px;font-weight:500;color:var(--erx-text, #111827);border-radius:50%}.erx-cal__day--today .erx-cal__day-number{background:var(--erx-color-primary, #667eea);color:white}.erx-cal__day-events{margin-top:4px;display:flex;flex-direction:column;gap:2px}.erx-cal__event{padding:2px 4px;border-radius:3px;font-size:10px;color:white;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.erx-cal__event:hover{filter:brightness(1.1)}.erx-cal__more{font-size:10px;color:var(--erx-text-secondary, #6b7280);padding:2px 4px}.erx-cal__year{display:grid;grid-template-columns:repeat(4, 1fr);gap:12px;padding:16px}.erx-cal__year-month{padding:16px;border-radius:8px;background:var(--erx-surface-secondary, #f9fafb);cursor:pointer;text-align:center;transition:all 150ms ease}.erx-cal__year-month:hover{background:var(--erx-surface-tertiary, #f3f4f6)}.erx-cal__year-month-name{display:block;font-size:14px;font-weight:500;color:var(--erx-text, #111827)}.erx-cal__year-month-count{display:inline-block;margin-top:4px;padding:2px 8px;border-radius:10px;background:var(--erx-color-primary, #667eea);color:white;font-size:11px;font-weight:600}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-cal,:host(.dark) .erx-cal{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-cal__month-year,:host(.dark) .erx-cal__month-year,:host-context(.dark) .erx-cal__day-number,:host(.dark) .erx-cal__day-number{color:var(--erx-text)}",p=class{constructor(e){h(this,e),this.erxSelect=x(this,"erxSelect"),this.erxEventSelect=x(this,"erxEventSelect"),this.erxViewChange=x(this,"erxViewChange")}events=[];config={view:"month"};selectedDate;disabled=!1;currentDate=new Date;view="month";selected=null;erxSelect;erxEventSelect;erxViewChange;componentWillLoad(){this.view=this.config.view||"month",this.selectedDate&&(this.selected=new Date(this.selectedDate),this.currentDate=new Date(this.selectedDate))}async goToDate(e){this.currentDate=new Date(e)}async setView(e){this.view=e,this.emitViewChange()}get locale(){return this.config.locale||"en-US"}get firstDayOfWeek(){return this.config.firstDayOfWeek??0}getMonthDays(){const e=this.currentDate.getFullYear(),t=this.currentDate.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0),s=new Date(a),i=(a.getDay()-this.firstDayOfWeek+7)%7;s.setDate(s.getDate()-i);const o=[];let c=[];for(let l=0;l<42;l++){const d=new Date(s);if(d.setDate(s.getDate()+l),c.push(d),c.length===7&&(o.push(c),c=[],d>n&&o.length>=5))break}return o}getWeekDayNames(){const e=[],t=new Date(2024,0,this.firstDayOfWeek);for(let a=0;a<7;a++){const n=new Date(t);n.setDate(t.getDate()+a),e.push(n.toLocaleDateString(this.locale,{weekday:"short"}))}return e}isToday(e){const t=new Date;return e.toDateString()===t.toDateString()}isSelected(e){return this.selected?.toDateString()===e.toDateString()}isCurrentMonth(e){return e.getMonth()===this.currentDate.getMonth()}getEventsForDate(e){return this.events.filter(t=>{const a=new Date(t.start),n=t.end?new Date(t.end):a;return e>=new Date(a.toDateString())&&e<=new Date(n.toDateString())})}navigate(e){const t=new Date(this.currentDate);this.view==="month"?t.setMonth(t.getMonth()+(e==="next"?1:-1)):this.view==="week"?t.setDate(t.getDate()+(e==="next"?7:-7)):this.view==="day"?t.setDate(t.getDate()+(e==="next"?1:-1)):this.view==="year"&&t.setFullYear(t.getFullYear()+(e==="next"?1:-1)),this.currentDate=t,this.emitViewChange()}goToToday(){this.currentDate=new Date,this.selected=new Date,this.emitViewChange()}handleDateSelect(e){this.selected=e;const t=this.getEventsForDate(e);this.erxSelect.emit({date:e,events:t})}handleEventClick(e,t,a){a.stopPropagation(),this.erxEventSelect.emit({event:e,date:t})}emitViewChange(){const e=new Date(this.currentDate),t=new Date(this.currentDate);if(this.view==="month")e.setDate(1),t.setMonth(t.getMonth()+1,0);else if(this.view==="week"){const a=(e.getDay()-this.firstDayOfWeek+7)%7;e.setDate(e.getDate()-a),t.setDate(e.getDate()+6)}this.erxViewChange.emit({view:this.view,start:e,end:t})}formatMonthYear(){return this.currentDate.toLocaleDateString(this.locale,{month:"long",year:"numeric"})}renderMonthView(){const e=this.getMonthDays(),t=this.getWeekDayNames();return r("div",{class:"erx-cal__month",part:"month"},r("div",{class:"erx-cal__weekdays"},t.map(a=>r("div",{class:"erx-cal__weekday",key:a},a))),r("div",{class:"erx-cal__weeks"},e.map((a,n)=>r("div",{class:"erx-cal__week",key:n},a.map(s=>{const i=this.getEventsForDate(s);return r("div",{class:{"erx-cal__day":!0,"erx-cal__day--today":this.isToday(s),"erx-cal__day--selected":this.isSelected(s),"erx-cal__day--other-month":!this.isCurrentMonth(s),"erx-cal__day--has-events":i.length>0},key:s.toISOString(),onClick:()=>this.handleDateSelect(s)},r("span",{class:"erx-cal__day-number"},s.getDate()),i.length>0&&r("div",{class:"erx-cal__day-events"},i.slice(0,3).map(o=>r("div",{class:"erx-cal__event",style:{background:o.color||"var(--erx-color-primary, #667eea)"},key:o.id,onClick:c=>this.handleEventClick(o,s,c),title:o.title},o.title)),i.length>3&&r("div",{class:"erx-cal__more"},"+",i.length-3," more")))})))))}renderYearView(){const e=[];for(let t=0;t<12;t++)e.push(new Date(this.currentDate.getFullYear(),t,1));return r("div",{class:"erx-cal__year",part:"year"},e.map(t=>{const a=this.events.filter(n=>{const s=new Date(n.start);return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()});return r("div",{class:"erx-cal__year-month",key:t.getMonth(),onClick:()=>{this.currentDate=t,this.view="month",this.emitViewChange()}},r("span",{class:"erx-cal__year-month-name"},t.toLocaleDateString(this.locale,{month:"short"})),a.length>0&&r("span",{class:"erx-cal__year-month-count"},a.length))}))}render(){return r("div",{key:"172621b0786b4da842e152692015c28960f97126",class:{"erx-cal":!0,"erx-cal--disabled":this.disabled},part:"container"},r("div",{key:"a70ff5f92156f0b9ea8648254c477ee06d186c99",class:"erx-cal__header",part:"header"},r("button",{key:"920c083f61d25f5cd02241147af35d4cf4490072",class:"erx-cal__nav-btn",onClick:()=>this.navigate("prev")},"←"),r("div",{key:"5950ced4c543cc9315f1e96782267bb514544b1a",class:"erx-cal__title"},r("span",{key:"ed64b9c99d0b4f9a077982aa628f46fee35f079c",class:"erx-cal__month-year"},this.formatMonthYear())),r("button",{key:"56834057b38f0d8b7304418befbdaafec00d1e31",class:"erx-cal__nav-btn",onClick:()=>this.navigate("next")},"→"),r("button",{key:"36e44a63efbd0254a1d85a6aff7f5ecf4b091c97",class:"erx-cal__today-btn",onClick:()=>this.goToToday()},"Today"),r("div",{key:"caa868e9ef86ecb321c80e046942f3ea9d311606",class:"erx-cal__view-switcher"},["month","year"].map(e=>r("button",{class:{"erx-cal__view-btn":!0,"erx-cal__view-btn--active":this.view===e},key:e,onClick:()=>{this.view=e,this.emitViewChange()}},e.charAt(0).toUpperCase()+e.slice(1))))),r("div",{key:"2c360aed024a65ba85f5d000c66a29df59a660cb",class:"erx-cal__body",part:"body"},this.view==="month"&&this.renderMonthView(),this.view==="year"&&this.renderYearView()))}};p.style=f();export{p as erx_calendar};

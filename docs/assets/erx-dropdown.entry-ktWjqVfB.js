import{r as i,c as n,g as p,h as r}from"./index-DLMfuaWg.js";const l=()=>":host{display:inline-block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.erx-dropdown{position:relative}.erx-dropdown--disabled{opacity:0.6}.erx-dropdown__trigger{cursor:pointer}.erx-dropdown__default-trigger{display:flex;align-items:center;gap:8px;padding:8px 16px;border:1px solid var(--erx-border-color, #e5e7eb);border-radius:6px;background:var(--erx-surface, #fff);font-size:14px;color:var(--erx-text, #111827);cursor:pointer}.erx-dropdown__default-trigger:hover:not(:disabled){background:var(--erx-surface-secondary, #f9fafb)}.erx-dropdown__caret{font-size:10px;color:var(--erx-text-tertiary, #9ca3af);transition:transform 150ms ease}.erx-dropdown--open .erx-dropdown__caret{transform:rotate(180deg)}.erx-dropdown__menu{position:absolute;z-index:1000;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,0.12);padding:4px 0}.erx-dropdown__menu--bottom-start{top:100%;left:0;margin-top:4px}.erx-dropdown__menu--bottom-end{top:100%;right:0;margin-top:4px}.erx-dropdown__menu--top-start{bottom:100%;left:0;margin-bottom:4px}.erx-dropdown__menu--top-end{bottom:100%;right:0;margin-bottom:4px}.erx-dropdown__menu--left-start{right:100%;top:0;margin-right:4px}.erx-dropdown__menu--left-end{right:100%;bottom:0;margin-right:4px}.erx-dropdown__menu--right-start{left:100%;top:0;margin-left:4px}.erx-dropdown__menu--right-end{left:100%;bottom:0;margin-left:4px}.erx-dropdown__item-wrapper{position:relative}.erx-dropdown__item{display:flex;align-items:center;gap:12px;width:100%;padding:10px 16px;border:none;background:transparent;font-size:14px;color:var(--erx-text, #111827);text-align:left;cursor:pointer;transition:background 150ms ease}.erx-dropdown__item:hover:not(:disabled){background:var(--erx-surface-secondary, #f9fafb)}.erx-dropdown__item--focused{background:var(--erx-surface-secondary, #f9fafb)}.erx-dropdown__item--disabled{opacity:0.5;cursor:not-allowed}.erx-dropdown__item--danger{color:var(--erx-color-danger, #ef4444)}.erx-dropdown__item--danger:hover:not(:disabled){background:rgba(239,68,68,0.1)}.erx-dropdown__icon{font-size:16px;flex-shrink:0}.erx-dropdown__label{flex:1}.erx-dropdown__shortcut{font-size:12px;color:var(--erx-text-tertiary, #9ca3af)}.erx-dropdown__arrow{font-size:10px;color:var(--erx-text-tertiary, #9ca3af)}.erx-dropdown__divider{height:1px;margin:4px 0;background:var(--erx-border-color, #e5e7eb)}.erx-dropdown__header{padding:8px 16px;font-size:12px;font-weight:600;color:var(--erx-text-tertiary, #9ca3af);text-transform:uppercase;letter-spacing:0.5px}.erx-dropdown__submenu{position:absolute;left:100%;top:0;margin-left:4px;background:var(--erx-surface, #fff);border:1px solid var(--erx-border-color, #e5e7eb);border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,0.12);padding:4px 0;min-width:160px}@media (prefers-color-scheme: dark){:host{color-scheme:dark}}:host-context(.dark) .erx-dropdown__menu,:host(.dark) .erx-dropdown__menu{background:var(--erx-surface);border-color:var(--erx-border-color)}:host-context(.dark) .erx-dropdown__item,:host(.dark) .erx-dropdown__item{color:var(--erx-text)}:host-context(.dark) .erx-dropdown__default-trigger,:host(.dark) .erx-dropdown__default-trigger{background:var(--erx-surface);border-color:var(--erx-border-color);color:var(--erx-text)}:host-context(.dark) .erx-dropdown__submenu,:host(.dark) .erx-dropdown__submenu{background:var(--erx-surface);border-color:var(--erx-border-color)}",c=class{constructor(e){i(this,e),this.erxSelect=n(this,"erxSelect"),this.erxOpenChange=n(this,"erxOpenChange")}get el(){return p(this)}items=[];placement="bottom-start";trigger="click";open=!1;closeOnSelect=!0;minWidth="180px";disabled=!1;erxSelect;erxOpenChange;focusedIndex=-1;submenuOpen=null;triggerEl;hoverTimeout;handleOpenChange(e){this.erxOpenChange.emit({open:e}),e||(this.focusedIndex=-1,this.submenuOpen=null)}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),document.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("keydown",this.handleKeyDown),this.hoverTimeout&&clearTimeout(this.hoverTimeout)}async openMenu(){this.disabled||(this.open=!0)}async closeMenu(){this.open=!1}async toggleMenu(){this.disabled||(this.open=!this.open)}handleOutsideClick=e=>{this.el.contains(e.target)||(this.open=!1)};handleKeyDown=e=>{if(!this.open)return;const o=this.items.filter(t=>t.type!=="divider"&&t.type!=="header"&&!t.disabled);switch(e.key){case"Escape":this.open=!1,this.triggerEl?.focus();break;case"ArrowDown":e.preventDefault(),this.focusedIndex=(this.focusedIndex+1)%o.length;break;case"ArrowUp":e.preventDefault(),this.focusedIndex=this.focusedIndex<=0?o.length-1:this.focusedIndex-1;break;case"Enter":case" ":e.preventDefault(),this.focusedIndex>=0&&o[this.focusedIndex]&&this.selectItem(o[this.focusedIndex]);break}};handleTriggerClick=()=>{this.trigger==="click"&&!this.disabled&&(this.open=!this.open)};handleTriggerMouseEnter=()=>{this.trigger==="hover"&&!this.disabled&&(this.hoverTimeout&&clearTimeout(this.hoverTimeout),this.open=!0)};handleTriggerMouseLeave=()=>{this.trigger==="hover"&&(this.hoverTimeout=window.setTimeout(()=>{this.open=!1},150))};handleMenuMouseEnter=()=>{this.trigger==="hover"&&this.hoverTimeout&&clearTimeout(this.hoverTimeout)};selectItem(e,o=[]){if(!e.disabled){if(e.children?.length){this.submenuOpen=this.submenuOpen===e.id?null:e.id;return}this.erxSelect.emit({item:e,path:[...o,e]}),this.closeOnSelect&&(this.open=!1)}}renderItem(e,o,t=[]){if(e.type==="divider")return r("div",{class:"erx-dropdown__divider",part:"divider"});if(e.type==="header")return r("div",{class:"erx-dropdown__header",part:"header"},e.label);const d=e.children&&e.children.length>0;return r("div",{class:"erx-dropdown__item-wrapper"},r("button",{class:{"erx-dropdown__item":!0,"erx-dropdown__item--disabled":!!e.disabled,"erx-dropdown__item--danger":!!e.danger,"erx-dropdown__item--focused":o===this.focusedIndex,"erx-dropdown__item--has-children":!!d},onClick:()=>this.selectItem(e,t),onMouseEnter:()=>d&&(this.submenuOpen=e.id),disabled:e.disabled,role:"menuitem",part:"item"},e.icon&&r("span",{class:"erx-dropdown__icon"},e.icon),r("span",{class:"erx-dropdown__label"},e.label),e.shortcut&&r("span",{class:"erx-dropdown__shortcut"},e.shortcut),d&&r("span",{class:"erx-dropdown__arrow"},"▶")),d&&this.submenuOpen===e.id&&r("div",{class:"erx-dropdown__submenu",part:"submenu"},e.children.map((s,a)=>this.renderItem(s,a,[...t,e]))))}render(){const e=`erx-dropdown__menu--${this.placement}`;return r("div",{key:"642de6efdea50c3d2a5ca9d0e1fe2ffc46d0cfae",class:{"erx-dropdown":!0,"erx-dropdown--open":this.open,"erx-dropdown--disabled":this.disabled},part:"container"},r("div",{key:"196a8d18eade649a4fb5dc3be5487fdcc00981e3",class:"erx-dropdown__trigger",ref:o=>this.triggerEl=o,onClick:this.handleTriggerClick,onMouseEnter:this.handleTriggerMouseEnter,onMouseLeave:this.handleTriggerMouseLeave,part:"trigger"},r("slot",{key:"47933ea72d431e8314941d1d58b8b80b8715d694",name:"trigger"},r("button",{key:"5e45ad1ee283a2617151bb63af044ee5dbf8950d",class:"erx-dropdown__default-trigger",disabled:this.disabled},"Menu",r("span",{key:"1a48b10b8b92f4f44dcc9cecd83f25a960f4290a",class:"erx-dropdown__caret"},"▼")))),this.open&&r("div",{key:"85d9080c27ee4284b1d26680896ffd5b85612d36",class:`erx-dropdown__menu ${e}`,onMouseEnter:this.handleMenuMouseEnter,onMouseLeave:this.handleTriggerMouseLeave,role:"menu",style:{minWidth:this.minWidth},part:"menu"},r("slot",{key:"a926bba6df294a2617a9742ba3cfbec413fd75ec"},this.items.map((o,t)=>this.renderItem(o,t)))))}static get watchers(){return{open:[{handleOpenChange:0}]}}};c.style=l();export{c as erx_dropdown};

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erx-command - ERX Components</title>
  <script type="module" src="https://unpkg.com/@erplora/erx/dist/erx/erx.esm.js"></script>
  <script nomodule src="https://unpkg.com/@erplora/erx/dist/erx/erx.js"></script>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="component-page" style="padding: 2rem;">
    <a href="../index.html" class="back-link">&larr; Back to Components</a>

    <div class="component-header">
      <h1>erx-command</h1>
      <p>A command palette component (Cmd+K style) for quick navigation, search, and action execution. Provides keyboard-driven access to application features.</p>
    </div>

    <div class="demo-section">
      <h2>Open Command Palette</h2>
      <div class="demo-box">
        <p style="margin-bottom: 1rem;">Press <kbd style="background: var(--bg); padding: 0.25rem 0.5rem; border-radius: 4px; border: 1px solid var(--border);">Cmd/Ctrl + K</kbd> to open the command palette, or click the button below:</p>
        <button onclick="openCommand()" style="padding: 0.75rem 1.5rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
          <span>Open Command Palette</span>
          <kbd style="background: rgba(255,255,255,0.2); padding: 0.125rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Cmd+K</kbd>
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>With Categories</h2>
      <div class="demo-box">
        <button onclick="openCommandWithCategories()" style="padding: 0.75rem 1.5rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
          Open Categorized Command Palette
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Search Mode Only</h2>
      <div class="demo-box">
        <button onclick="openSearchMode()" style="padding: 0.75rem 1.5rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
          Open Search Mode
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Recent Items</h2>
      <div class="demo-box">
        <button onclick="openWithRecent()" style="padding: 0.75rem 1.5rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
          Open With Recent Items
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Static Preview</h2>
      <div class="demo-box">
        <div style="background: var(--bg); border: 1px solid var(--border); border-radius: 12px; max-width: 600px; margin: 0 auto; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);">
          <div style="padding: 1rem; border-bottom: 1px solid var(--border);">
            <input type="text" placeholder="Type a command or search..." style="width: 100%; padding: 0.75rem; border: none; background: transparent; font-size: 1rem; color: var(--text); outline: none;">
          </div>
          <div style="padding: 0.5rem;">
            <div style="padding: 0.5rem 0.75rem; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">Actions</div>
            <div style="padding: 0.75rem; border-radius: 8px; background: var(--primary); color: white; cursor: pointer; display: flex; align-items: center; gap: 0.75rem;">
              <span style="opacity: 0.7;">+</span>
              <span>Create new document</span>
              <span style="margin-left: auto; font-size: 0.75rem; opacity: 0.7;">Ctrl+N</span>
            </div>
            <div style="padding: 0.75rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.75rem;">
              <span style="opacity: 0.5;">S</span>
              <span>Save current document</span>
              <span style="margin-left: auto; font-size: 0.75rem; color: var(--text-muted);">Ctrl+S</span>
            </div>
            <div style="padding: 0.75rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.75rem;">
              <span style="opacity: 0.5;">P</span>
              <span>Print document</span>
              <span style="margin-left: auto; font-size: 0.75rem; color: var(--text-muted);">Ctrl+P</span>
            </div>
            <div style="padding: 0.5rem 0.75rem; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-top: 0.5rem;">Navigation</div>
            <div style="padding: 0.75rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.75rem;">
              <span style="opacity: 0.5;">H</span>
              <span>Go to Home</span>
            </div>
            <div style="padding: 0.75rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.75rem;">
              <span style="opacity: 0.5;">S</span>
              <span>Go to Settings</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Props</h2>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid var(--border);">
            <th style="text-align: left; padding: 0.5rem;">Prop</th>
            <th style="text-align: left; padding: 0.5rem;">Type</th>
            <th style="text-align: left; padding: 0.5rem;">Default</th>
            <th style="text-align: left; padding: 0.5rem;">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>commands</code></td>
            <td style="padding: 0.5rem;">array</td>
            <td style="padding: 0.5rem;">[]</td>
            <td style="padding: 0.5rem;">Array of command objects</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>placeholder</code></td>
            <td style="padding: 0.5rem;">string</td>
            <td style="padding: 0.5rem;">'Type a command...'</td>
            <td style="padding: 0.5rem;">Search input placeholder</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>shortcut</code></td>
            <td style="padding: 0.5rem;">string</td>
            <td style="padding: 0.5rem;">'cmd+k'</td>
            <td style="padding: 0.5rem;">Keyboard shortcut to open</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>show-recent</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Show recent commands</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>max-results</code></td>
            <td style="padding: 0.5rem;">number</td>
            <td style="padding: 0.5rem;">10</td>
            <td style="padding: 0.5rem;">Maximum results to display</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>search-mode</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Enable search-only mode</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="demo-section">
      <h2>Events</h2>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid var(--border);">
            <th style="text-align: left; padding: 0.5rem;">Event</th>
            <th style="text-align: left; padding: 0.5rem;">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>erxSelect</code></td>
            <td style="padding: 0.5rem;">Emitted when a command is selected</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>erxSearch</code></td>
            <td style="padding: 0.5rem;">Emitted when search query changes</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>erxOpen</code></td>
            <td style="padding: 0.5rem;">Emitted when palette opens</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>erxClose</code></td>
            <td style="padding: 0.5rem;">Emitted when palette closes</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Command Palette Component -->
    <erx-command id="command-palette"></erx-command>
  </div>

  <script>
    const basicCommands = [
      { id: 'new', label: 'Create new document', icon: 'add', shortcut: 'Ctrl+N', category: 'Actions' },
      { id: 'save', label: 'Save current document', icon: 'save', shortcut: 'Ctrl+S', category: 'Actions' },
      { id: 'print', label: 'Print document', icon: 'print', shortcut: 'Ctrl+P', category: 'Actions' },
      { id: 'home', label: 'Go to Home', icon: 'home', category: 'Navigation' },
      { id: 'settings', label: 'Go to Settings', icon: 'settings', category: 'Navigation' },
      { id: 'profile', label: 'Go to Profile', icon: 'person', category: 'Navigation' },
    ];

    const categorizedCommands = [
      { id: 'new-invoice', label: 'Create Invoice', icon: 'document', shortcut: 'Ctrl+I', category: 'Sales' },
      { id: 'new-quote', label: 'Create Quote', icon: 'document-text', category: 'Sales' },
      { id: 'new-customer', label: 'Add Customer', icon: 'person-add', category: 'Customers' },
      { id: 'search-customer', label: 'Search Customers', icon: 'search', category: 'Customers' },
      { id: 'inventory', label: 'View Inventory', icon: 'cube', category: 'Inventory' },
      { id: 'add-product', label: 'Add Product', icon: 'add-circle', category: 'Inventory' },
      { id: 'reports', label: 'View Reports', icon: 'stats-chart', category: 'Reports' },
      { id: 'export', label: 'Export Data', icon: 'download', category: 'Reports' },
    ];

    const recentCommands = [
      { id: 'recent-1', label: 'Invoice #1234', icon: 'time', category: 'Recent' },
      { id: 'recent-2', label: 'Customer: John Doe', icon: 'time', category: 'Recent' },
      { id: 'recent-3', label: 'Product: Widget A', icon: 'time', category: 'Recent' },
    ];

    const commandPalette = document.getElementById('command-palette');
    commandPalette.commands = basicCommands;

    commandPalette.addEventListener('erxSelect', (e) => {
      console.log('Command selected:', e.detail);
      alert(`Selected: ${e.detail.command.label}`);
    });

    function openCommand() {
      commandPalette.commands = basicCommands;
      commandPalette.open();
    }

    function openCommandWithCategories() {
      commandPalette.commands = categorizedCommands;
      commandPalette.open();
    }

    function openSearchMode() {
      commandPalette.setAttribute('search-mode', true);
      commandPalette.setAttribute('placeholder', 'Search...');
      commandPalette.commands = basicCommands;
      commandPalette.open();
    }

    function openWithRecent() {
      commandPalette.commands = [...recentCommands, ...basicCommands];
      commandPalette.setAttribute('show-recent', true);
      commandPalette.open();
    }

    // Global keyboard shortcut
    document.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        openCommand();
      }
    });
  </script>
</body>
</html>

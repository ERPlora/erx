<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erx-scheduler - ERX Components</title>
  <script type="module" src="https://unpkg.com/@erplora/erx/dist/erx/erx.esm.js"></script>
  <script nomodule src="https://unpkg.com/@erplora/erx/dist/erx/erx.js"></script>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="component-page" style="padding: 2rem;">
    <a href="../index.html" class="back-link">&larr; Back to Components</a>
    <div class="component-header">
      <h1>erx-scheduler</h1>
      <p>Resource-based event scheduler with timeline view, perfect for booking systems, staff scheduling, and resource management.</p>
    </div>
    <div class="demo-section">
      <h2>Staff Scheduler</h2>
      <div class="demo-box" style="height: 600px; overflow: auto;">
        <erx-scheduler id="staffScheduler"></erx-scheduler>
      </div>
    </div>
    <div class="demo-section">
      <h2>Room Booking</h2>
      <div class="demo-box" style="height: 500px; overflow: auto;">
        <erx-scheduler id="roomScheduler"></erx-scheduler>
      </div>
    </div>
    <div class="demo-section">
      <h2>Event Output</h2>
      <div class="demo-box">
        <div id="eventOutput" style="padding: 1rem; background: var(--bg); border-radius: 8px; font-family: monospace; font-size: 0.875rem;">
          Click on a time slot or event to see the output...
        </div>
      </div>
    </div>
  </div>
  <script>
    const today = new Date();
    const startOfWeek = new Date(today);
    startOfWeek.setDate(today.getDate() - today.getDay());

    // Staff resources
    const staffResources = [
      { id: 'emp1', name: 'John Smith', title: 'Senior Developer', color: '#667eea' },
      { id: 'emp2', name: 'Sarah Johnson', title: 'Product Manager', color: '#10b981' },
      { id: 'emp3', name: 'Mike Wilson', title: 'Designer', color: '#f59e0b' },
      { id: 'emp4', name: 'Emily Davis', title: 'QA Engineer', color: '#ef4444' }
    ];

    // Staff events
    const staffEvents = [
      {
        id: 'e1',
        resourceId: 'emp1',
        title: 'Sprint Planning',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 9, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 11, 0).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'e2',
        resourceId: 'emp1',
        title: 'Code Review',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 14, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 15, 30).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'e3',
        resourceId: 'emp2',
        title: 'Stakeholder Meeting',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 10, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 12, 0).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'e4',
        resourceId: 'emp2',
        title: 'Product Demo',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 3, 15, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 3, 16, 0).toISOString(),
        status: 'pending'
      },
      {
        id: 'e5',
        resourceId: 'emp3',
        title: 'Design Review',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 9, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 10, 30).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'e6',
        resourceId: 'emp4',
        title: 'Testing Session',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 4, 13, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 4, 17, 0).toISOString(),
        status: 'confirmed'
      }
    ];

    // Room resources
    const roomResources = [
      { id: 'room1', name: 'Conference Room A', title: 'Capacity: 12', color: '#667eea' },
      { id: 'room2', name: 'Meeting Room B', title: 'Capacity: 6', color: '#10b981' },
      { id: 'room3', name: 'Board Room', title: 'Capacity: 20', color: '#f59e0b' }
    ];

    // Room events
    const roomEvents = [
      {
        id: 'r1',
        resourceId: 'room1',
        title: 'Team Standup',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 9, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 9, 30).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'r2',
        resourceId: 'room1',
        title: 'Client Presentation',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 14, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 2, 16, 0).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'r3',
        resourceId: 'room2',
        title: '1:1 Meeting',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 11, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 1, 12, 0).toISOString(),
        status: 'confirmed'
      },
      {
        id: 'r4',
        resourceId: 'room3',
        title: 'Board Meeting',
        start: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 3, 10, 0).toISOString(),
        end: new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 3, 13, 0).toISOString(),
        status: 'confirmed'
      }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      const staffScheduler = document.getElementById('staffScheduler');
      const roomScheduler = document.getElementById('roomScheduler');
      const eventOutput = document.getElementById('eventOutput');

      // Configure staff scheduler
      staffScheduler.resources = staffResources;
      staffScheduler.events = staffEvents;
      staffScheduler.config = {
        view: 'week',
        startHour: 8,
        endHour: 18,
        showCurrentTime: true
      };

      // Configure room scheduler
      roomScheduler.resources = roomResources;
      roomScheduler.events = roomEvents;
      roomScheduler.config = {
        view: 'week',
        startHour: 8,
        endHour: 20
      };

      // Event listeners
      [staffScheduler, roomScheduler].forEach(scheduler => {
        scheduler.addEventListener('erxSelect', (e) => {
          eventOutput.innerHTML = `<strong>Slot Selected:</strong><br>Resource: ${e.detail.resource.name}<br>Date: ${e.detail.date.toDateString()}<br>Time: ${e.detail.time.hour}:00`;
        });

        scheduler.addEventListener('erxEventSelect', (e) => {
          eventOutput.innerHTML = `<strong>Event Selected:</strong> ${e.detail.event.title}<br><strong>Resource:</strong> ${e.detail.resource.name}<br><strong>Status:</strong> ${e.detail.event.status}`;
        });
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erx-phone-input - ERX Components</title>
  <script type="module" src="https://unpkg.com/@erplora/erx/dist/erx/erx.esm.js"></script>
  <script nomodule src="https://unpkg.com/@erplora/erx/dist/erx/erx.js"></script>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="component-page" style="padding: 2rem;">
    <a href="../index.html" class="back-link">&larr; Back to Components</a>
    <div class="component-header">
      <h1>erx-phone-input</h1>
      <p>International phone number input with country selector, flag icons, auto-formatting, and validation.</p>
    </div>
    <div class="demo-section">
      <h2>Basic Phone Input</h2>
      <div class="demo-box">
        <erx-phone-input
          id="basic-phone"
          placeholder="Phone number">
        </erx-phone-input>
      </div>
    </div>

    <div class="demo-section">
      <h2>Different Default Countries</h2>
      <div class="demo-box">
        <div class="demo-row">
          <div class="demo-col">
            <span class="demo-label">United Kingdom</span>
            <erx-phone-input
              id="uk-phone"
              default-country="GB"
              placeholder="Phone number">
            </erx-phone-input>
          </div>
          <div class="demo-col">
            <span class="demo-label">Spain</span>
            <erx-phone-input
              id="es-phone"
              default-country="ES"
              placeholder="Phone number">
            </erx-phone-input>
          </div>
        </div>
        <div class="demo-row" style="margin-top: 1rem;">
          <div class="demo-col">
            <span class="demo-label">Japan</span>
            <erx-phone-input
              id="jp-phone"
              default-country="JP"
              placeholder="Phone number">
            </erx-phone-input>
          </div>
          <div class="demo-col">
            <span class="demo-label">Mexico</span>
            <erx-phone-input
              id="mx-phone"
              default-country="MX"
              placeholder="Phone number">
            </erx-phone-input>
          </div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Limited Country Selection</h2>
      <div class="demo-box">
        <erx-phone-input
          id="limited-phone"
          default-country="US"
          placeholder="Phone number">
        </erx-phone-input>
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;">
          Only US, Canada, UK, and Australia available in dropdown.
        </p>
      </div>
    </div>

    <div class="demo-section">
      <h2>Excluded Countries</h2>
      <div class="demo-box">
        <erx-phone-input
          id="excluded-phone"
          default-country="US"
          placeholder="Phone number">
        </erx-phone-input>
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;">
          Some countries have been excluded from the list.
        </p>
      </div>
    </div>

    <div class="demo-section">
      <h2>Without Country Selector</h2>
      <div class="demo-box">
        <erx-phone-input
          id="no-selector-phone"
          default-country="US"
          placeholder="Phone number">
        </erx-phone-input>
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;">
          Country is fixed to US. No dropdown available.
        </p>
      </div>
    </div>

    <div class="demo-section">
      <h2>Without Dial Code</h2>
      <div class="demo-box">
        <erx-phone-input
          id="no-dialcode-phone"
          default-country="US"
          placeholder="Phone number">
        </erx-phone-input>
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;">
          Dial code is hidden from the display (still included in value).
        </p>
      </div>
    </div>

    <div class="demo-section">
      <h2>Without Auto-Formatting</h2>
      <div class="demo-box">
        <erx-phone-input
          id="no-format-phone"
          default-country="US"
          placeholder="Phone number">
        </erx-phone-input>
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;">
          Numbers are not automatically formatted as you type.
        </p>
      </div>
    </div>

    <div class="demo-section">
      <h2>Pre-filled Value</h2>
      <div class="demo-box">
        <erx-phone-input
          id="prefilled-phone"
          default-country="US"
          value="5551234567">
        </erx-phone-input>
      </div>
    </div>

    <div class="demo-section">
      <h2>Disabled State</h2>
      <div class="demo-box">
        <erx-phone-input
          id="disabled-phone"
          default-country="US"
          value="5559876543"
          disabled>
        </erx-phone-input>
      </div>
    </div>

    <div class="demo-section">
      <h2>Validation Status</h2>
      <div class="demo-box">
        <erx-phone-input
          id="validation-phone"
          default-country="US"
          placeholder="Enter phone number">
        </erx-phone-input>
        <div id="validation-status" style="margin-top: 1rem; padding: 0.75rem; border-radius: 6px; font-size: 0.875rem;">
          Enter a phone number to see validation status.
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Event Output</h2>
      <div class="demo-box">
        <div id="event-output" style="font-family: monospace; font-size: 0.875rem; color: var(--text-muted); white-space: pre-wrap;">
          Enter a phone number to see the event details...
        </div>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Limited countries
      const limitedPhone = document.getElementById('limited-phone');
      limitedPhone.allowedCountries = ['US', 'CA', 'GB', 'AU'];

      // Excluded countries
      const excludedPhone = document.getElementById('excluded-phone');
      excludedPhone.excludedCountries = ['CN', 'RU', 'KP'];

      // Without selector
      const noSelectorPhone = document.getElementById('no-selector-phone');
      noSelectorPhone.showCountrySelector = false;

      // Without dial code
      const noDialcodePhone = document.getElementById('no-dialcode-phone');
      noDialcodePhone.showDialCode = false;

      // Without auto-format
      const noFormatPhone = document.getElementById('no-format-phone');
      noFormatPhone.autoFormat = false;

      // Validation status
      const validationPhone = document.getElementById('validation-phone');
      const validationStatus = document.getElementById('validation-status');

      validationPhone.addEventListener('erxChange', (e) => {
        if (e.detail.isValid) {
          validationStatus.style.background = '#dcfce7';
          validationStatus.style.color = '#166534';
          validationStatus.innerHTML = `<strong>Valid!</strong> Full number: ${e.detail.value}`;
        } else if (e.detail.nationalNumber.length > 0) {
          validationStatus.style.background = '#fef3c7';
          validationStatus.style.color = '#92400e';
          validationStatus.innerHTML = `<strong>Incomplete.</strong> Need more digits.`;
        } else {
          validationStatus.style.background = 'var(--bg)';
          validationStatus.style.color = 'var(--text-muted)';
          validationStatus.innerHTML = 'Enter a phone number to see validation status.';
        }
      });

      // Event handling
      const eventOutput = document.getElementById('event-output');
      document.querySelectorAll('erx-phone-input').forEach(phone => {
        phone.addEventListener('erxChange', (e) => {
          eventOutput.innerHTML = `<strong>erxChange:</strong>\n${JSON.stringify(e.detail, null, 2)}`;
        });
      });
    });
  </script>
</body>
</html>

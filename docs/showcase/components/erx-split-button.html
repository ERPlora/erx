<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erx-split-button - ERX Components</title>
  <script type="module" src="https://unpkg.com/@erplora/erx/dist/erx/erx.esm.js"></script>
  <script nomodule src="https://unpkg.com/@erplora/erx/dist/erx/erx.js"></script>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="component-page" style="padding: 2rem;">
    <a href="../index.html" class="back-link">&larr; Back to Components</a>
    <div class="component-header">
      <h1>erx-split-button</h1>
      <p>Split button with primary action and dropdown menu for additional options.</p>
    </div>
    <div class="demo-section">
      <h2>Basic Split Button</h2>
      <div class="demo-box">
        <erx-split-button
          id="basic-split"
          label="Save">
        </erx-split-button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Variants</h2>
      <div class="demo-box">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <erx-split-button
            id="primary-split"
            label="Primary"
            variant="primary">
          </erx-split-button>

          <erx-split-button
            id="secondary-split"
            label="Secondary"
            variant="secondary">
          </erx-split-button>

          <erx-split-button
            id="success-split"
            label="Success"
            variant="success">
          </erx-split-button>

          <erx-split-button
            id="danger-split"
            label="Danger"
            variant="danger">
          </erx-split-button>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Sizes</h2>
      <div class="demo-box">
        <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
          <erx-split-button
            id="sm-split"
            label="Small"
            size="sm">
          </erx-split-button>

          <erx-split-button
            id="md-split"
            label="Medium"
            size="md">
          </erx-split-button>

          <erx-split-button
            id="lg-split"
            label="Large"
            size="lg">
          </erx-split-button>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>With Icons in Options</h2>
      <div class="demo-box">
        <erx-split-button
          id="icon-split"
          label="New Document">
        </erx-split-button>
      </div>
    </div>

    <div class="demo-section">
      <h2>With Dividers</h2>
      <div class="demo-box">
        <erx-split-button
          id="divider-split"
          label="Actions">
        </erx-split-button>
      </div>
    </div>

    <div class="demo-section">
      <h2>With Disabled Options</h2>
      <div class="demo-box">
        <erx-split-button
          id="disabled-options-split"
          label="Export">
        </erx-split-button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Loading State</h2>
      <div class="demo-box">
        <erx-split-button
          id="loading-split"
          label="Processing..."
          loading>
        </erx-split-button>
        <div style="margin-top: 1rem;">
          <button id="toggle-loading-btn" style="padding: 0.5rem 1rem; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer;">
            Toggle Loading
          </button>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Disabled State</h2>
      <div class="demo-box">
        <erx-split-button
          id="disabled-split"
          label="Disabled"
          disabled>
        </erx-split-button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Interactive Example</h2>
      <div class="demo-box">
        <erx-split-button
          id="interactive-split"
          label="Send Email">
        </erx-split-button>
        <div id="action-output" style="margin-top: 1rem; padding: 1rem; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; font-size: 0.875rem;">
          Click the button or select an option...
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Event Output</h2>
      <div class="demo-box">
        <div id="event-output" style="font-family: monospace; font-size: 0.875rem; color: var(--text-muted); white-space: pre-wrap;">
          Interact with any split button to see the event details...
        </div>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Basic options
      const basicOptions = [
        { value: 'save-draft', label: 'Save as Draft' },
        { value: 'save-template', label: 'Save as Template' },
        { value: 'save-copy', label: 'Save a Copy' },
      ];

      // Set options for basic buttons
      document.getElementById('basic-split').options = basicOptions;
      document.getElementById('primary-split').options = basicOptions;
      document.getElementById('secondary-split').options = basicOptions;
      document.getElementById('success-split').options = basicOptions;
      document.getElementById('danger-split').options = basicOptions;
      document.getElementById('sm-split').options = basicOptions;
      document.getElementById('md-split').options = basicOptions;
      document.getElementById('lg-split').options = basicOptions;

      // Icons in options
      document.getElementById('icon-split').options = [
        { value: 'doc', label: 'Document', icon: 'ðŸ“„' },
        { value: 'spreadsheet', label: 'Spreadsheet', icon: 'ðŸ“Š' },
        { value: 'presentation', label: 'Presentation', icon: 'ðŸ“½ï¸' },
        { value: 'form', label: 'Form', icon: 'ðŸ“' },
      ];

      // With dividers
      document.getElementById('divider-split').options = [
        { value: 'edit', label: 'Edit' },
        { value: 'duplicate', label: 'Duplicate' },
        { value: 'archive', label: 'Archive', divider: true },
        { value: 'delete', label: 'Delete' },
      ];

      // Disabled options
      document.getElementById('disabled-options-split').options = [
        { value: 'pdf', label: 'Export as PDF' },
        { value: 'csv', label: 'Export as CSV' },
        { value: 'excel', label: 'Export as Excel', disabled: true },
        { value: 'json', label: 'Export as JSON', disabled: true },
      ];

      // Loading split
      const loadingSplit = document.getElementById('loading-split');
      loadingSplit.options = basicOptions;

      document.getElementById('toggle-loading-btn').addEventListener('click', () => {
        loadingSplit.loading = !loadingSplit.loading;
        loadingSplit.label = loadingSplit.loading ? 'Processing...' : 'Save';
      });

      // Disabled split
      document.getElementById('disabled-split').options = basicOptions;

      // Interactive example
      const interactiveSplit = document.getElementById('interactive-split');
      const actionOutput = document.getElementById('action-output');

      interactiveSplit.options = [
        { value: 'send-now', label: 'Send Now', icon: 'ðŸ“¤' },
        { value: 'schedule', label: 'Schedule Send', icon: 'ðŸ“…' },
        { value: 'save-draft', label: 'Save as Draft', icon: 'ðŸ’¾' },
      ];

      interactiveSplit.addEventListener('erxClick', () => {
        actionOutput.innerHTML = '<strong>Primary Action:</strong> Email sent!';
        actionOutput.style.background = '#dcfce7';
        actionOutput.style.borderColor = '#22c55e';
      });

      interactiveSplit.addEventListener('erxSelect', (e) => {
        const messages = {
          'send-now': 'Email sent immediately!',
          'schedule': 'Email scheduled for later.',
          'save-draft': 'Email saved as draft.',
        };
        actionOutput.innerHTML = `<strong>Option Selected:</strong> ${messages[e.detail.value] || e.detail.option.label}`;
        actionOutput.style.background = '#dbeafe';
        actionOutput.style.borderColor = '#3b82f6';
      });

      // Event handling for all split buttons
      const eventOutput = document.getElementById('event-output');
      document.querySelectorAll('erx-split-button').forEach(split => {
        split.addEventListener('erxClick', () => {
          eventOutput.innerHTML = `<strong>erxClick:</strong> Primary button clicked`;
        });

        split.addEventListener('erxSelect', (e) => {
          eventOutput.innerHTML = `<strong>erxSelect:</strong>\n${JSON.stringify(e.detail, null, 2)}`;
        });
      });
    });
  </script>
</body>
</html>

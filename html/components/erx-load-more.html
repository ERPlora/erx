<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erx-load-more - ERX Components</title>
  <script type="module" src="https://unpkg.com/@erplora/erx/dist/erx/erx.esm.js"></script>
  <script nomodule src="https://unpkg.com/@erplora/erx/dist/erx/erx.js"></script>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="component-page" style="padding: 2rem;">
    <a href="../index.html" class="back-link">&larr; Back to Components</a>

    <div class="component-header">
      <h1>erx-load-more</h1>
      <p>A load more button component for incrementally loading additional content. Supports infinite scroll, loading states, and progress indicators.</p>
    </div>

    <div class="demo-section">
      <h2>Basic Load More</h2>
      <div class="demo-box">
        <div id="basic-list" style="margin-bottom: 1rem;">
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Item 1</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Item 2</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Item 3</div>
        </div>
        <erx-load-more id="basic-load-more" total="15" loaded="3"></erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>With Progress</h2>
      <div class="demo-box">
        <div id="progress-list" style="margin-bottom: 1rem;">
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Product 1</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Product 2</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Product 3</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Product 4</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Product 5</div>
        </div>
        <erx-load-more id="progress-load-more" total="50" loaded="5" show-progress></erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>Custom Text</h2>
      <div class="demo-box">
        <div style="margin-bottom: 1rem;">
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Comment 1</div>
          <div style="padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;">Comment 2</div>
        </div>
        <erx-load-more
          total="20"
          loaded="2"
          text="Show more comments"
          loading-text="Loading comments..."
          show-count>
        </erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>Loading State</h2>
      <div class="demo-box">
        <erx-load-more total="100" loaded="10" loading></erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>All Loaded</h2>
      <div class="demo-box">
        <erx-load-more total="10" loaded="10" completed-text="All items loaded"></erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>Infinite Scroll</h2>
      <div class="demo-box">
        <p style="margin-bottom: 1rem; color: var(--text-muted);">Scroll down within the container to automatically load more items.</p>
        <div id="infinite-container" style="height: 300px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; padding: 1rem;">
          <div id="infinite-list">
            <!-- Items will be added here -->
          </div>
          <erx-load-more id="infinite-load-more" total="100" loaded="10" infinite-scroll threshold="100"></erx-load-more>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Button Variants</h2>
      <div class="demo-box" style="display: flex; flex-direction: column; gap: 1rem;">
        <div>
          <span class="demo-label">Default</span>
          <erx-load-more total="50" loaded="10" variant="default"></erx-load-more>
        </div>
        <div>
          <span class="demo-label">Outlined</span>
          <erx-load-more total="50" loaded="10" variant="outlined"></erx-load-more>
        </div>
        <div>
          <span class="demo-label">Text</span>
          <erx-load-more total="50" loaded="10" variant="text"></erx-load-more>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Different Sizes</h2>
      <div class="demo-box" style="display: flex; flex-direction: column; gap: 1rem;">
        <erx-load-more total="50" loaded="10" size="small"></erx-load-more>
        <erx-load-more total="50" loaded="10" size="medium"></erx-load-more>
        <erx-load-more total="50" loaded="10" size="large"></erx-load-more>
      </div>
    </div>

    <div class="demo-section">
      <h2>Props</h2>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid var(--border);">
            <th style="text-align: left; padding: 0.5rem;">Prop</th>
            <th style="text-align: left; padding: 0.5rem;">Type</th>
            <th style="text-align: left; padding: 0.5rem;">Default</th>
            <th style="text-align: left; padding: 0.5rem;">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>total</code></td>
            <td style="padding: 0.5rem;">number</td>
            <td style="padding: 0.5rem;">0</td>
            <td style="padding: 0.5rem;">Total number of items</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>loaded</code></td>
            <td style="padding: 0.5rem;">number</td>
            <td style="padding: 0.5rem;">0</td>
            <td style="padding: 0.5rem;">Currently loaded items</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>loading</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Show loading state</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>text</code></td>
            <td style="padding: 0.5rem;">string</td>
            <td style="padding: 0.5rem;">'Load More'</td>
            <td style="padding: 0.5rem;">Button text</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>show-progress</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Show progress bar</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>show-count</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Show remaining count</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>infinite-scroll</code></td>
            <td style="padding: 0.5rem;">boolean</td>
            <td style="padding: 0.5rem;">false</td>
            <td style="padding: 0.5rem;">Enable auto-load on scroll</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>threshold</code></td>
            <td style="padding: 0.5rem;">number</td>
            <td style="padding: 0.5rem;">200</td>
            <td style="padding: 0.5rem;">Scroll threshold in pixels</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>variant</code></td>
            <td style="padding: 0.5rem;">'default' | 'outlined' | 'text'</td>
            <td style="padding: 0.5rem;">'default'</td>
            <td style="padding: 0.5rem;">Button variant</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>size</code></td>
            <td style="padding: 0.5rem;">'small' | 'medium' | 'large'</td>
            <td style="padding: 0.5rem;">'medium'</td>
            <td style="padding: 0.5rem;">Button size</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="demo-section">
      <h2>Events</h2>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid var(--border);">
            <th style="text-align: left; padding: 0.5rem;">Event</th>
            <th style="text-align: left; padding: 0.5rem;">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.5rem;"><code>erxLoadMore</code></td>
            <td style="padding: 0.5rem;">Emitted when load more is triggered</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // Basic load more
    const basicLoadMore = document.getElementById('basic-load-more');
    const basicList = document.getElementById('basic-list');
    let basicCount = 3;

    basicLoadMore.addEventListener('erxLoadMore', async () => {
      basicLoadMore.loading = true;

      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));

      // Add more items
      for (let i = 0; i < 3; i++) {
        basicCount++;
        if (basicCount <= 15) {
          const item = document.createElement('div');
          item.style.cssText = 'padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;';
          item.textContent = `Item ${basicCount}`;
          basicList.appendChild(item);
        }
      }

      basicLoadMore.loaded = basicCount;
      basicLoadMore.loading = false;
    });

    // Progress load more
    const progressLoadMore = document.getElementById('progress-load-more');
    const progressList = document.getElementById('progress-list');
    let progressCount = 5;

    progressLoadMore.addEventListener('erxLoadMore', async () => {
      progressLoadMore.loading = true;
      await new Promise(resolve => setTimeout(resolve, 1000));

      for (let i = 0; i < 5; i++) {
        progressCount++;
        if (progressCount <= 50) {
          const item = document.createElement('div');
          item.style.cssText = 'padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;';
          item.textContent = `Product ${progressCount}`;
          progressList.appendChild(item);
        }
      }

      progressLoadMore.loaded = progressCount;
      progressLoadMore.loading = false;
    });

    // Infinite scroll
    const infiniteLoadMore = document.getElementById('infinite-load-more');
    const infiniteList = document.getElementById('infinite-list');
    let infiniteCount = 0;

    // Initial load
    function addInfiniteItems(count) {
      for (let i = 0; i < count; i++) {
        infiniteCount++;
        const item = document.createElement('div');
        item.style.cssText = 'padding: 1rem; background: var(--bg); border-radius: 8px; margin-bottom: 0.5rem;';
        item.textContent = `Item ${infiniteCount}`;
        infiniteList.appendChild(item);
      }
      infiniteLoadMore.loaded = infiniteCount;
    }

    addInfiniteItems(10);

    infiniteLoadMore.addEventListener('erxLoadMore', async () => {
      if (infiniteCount >= 100) return;

      infiniteLoadMore.loading = true;
      await new Promise(resolve => setTimeout(resolve, 800));

      addInfiniteItems(10);
      infiniteLoadMore.loading = false;
    });
  </script>
</body>
</html>
